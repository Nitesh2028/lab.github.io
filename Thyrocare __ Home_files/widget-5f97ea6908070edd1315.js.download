!function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],p=0,m=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);m.length;)m.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=function(e){return o.p+"js/"+({}[e]||e)+"-"+{4:"45e13f6813822396df55"}[e]+".js"}(e);var s=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",s.name="ChunkLoadError",s.type=r,s.request=c,n[1](s)}a[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://widget.happyfoxchat.com/v2/visitor/",o.oe=function(e){throw console.error(e),e};var i=window.__HFC__=window.__HFC__||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;c.push([1,3]),n()}({"0BHY":function(e,t){var n={_CHAT_SERVER_URL:"http://localhost:7000",_CHAT_SOCKET_SERVER_URL:"http://localhost:7001",_CHAT_WEBSOCKET_SERVER_URL:"ws://localhost:7001",_AGENT_VINFO_WEBSOCKET_SERVER_URL:"ws://localhost:9002",_VISITOR_VINFO_WEBSOCKET_SERVER_URL:"ws://localhost:9001",_API_VERSION:"v1",_VINFO_API_VERSION:"v1",chatServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._CHAT_SERVER_URL=e),this._CHAT_SERVER_URL},chatSocketServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._CHAT_SOCKET_SERVER_URL=e),this._CHAT_SOCKET_SERVER_URL},chatWebsocketServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._CHAT_WEBSOCKET_SERVER_URL=e),this._CHAT_WEBSOCKET_SERVER_URL},vInfoVisitorWebsocketServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._VISITOR_VINFO_WEBSOCKET_SERVER_URL=e),this._VISITOR_VINFO_WEBSOCKET_SERVER_URL},vInfoAgentWebsocketServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._AGENT_VINFO_WEBSOCKET_SERVER_URL=e),this._AGENT_VINFO_WEBSOCKET_SERVER_URL},version:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._API_VERSION=e),this._API_VERSION},base:function(){return"".concat(this.chatServer(),"/api/").concat(this.version())},sBase:function(){return"".concat(this.chatSocketServer(),"/api/").concat(this.version())},wsBase:function(){return"".concat(this.chatWebsocketServer(),"/api/").concat(this.version())},vInfoVisitorWsBase:function(){return"".concat(this.vInfoVisitorWebsocketServer(),"/api/").concat(this._VINFO_API_VERSION)},vInfoAgentWsBase:function(){return"".concat(this.vInfoAgentWebsocketServer(),"/api/").concat(this._VINFO_API_VERSION)}},r={api:n,company:function(e){return"".concat(this.api.base(),"/companies/").concat(e)},companies:function(){return"".concat(this.api.base(),"/companies")},whoami:function(){return"".concat(this.api.base(),"/companies/me")},agent:function(e){return"".concat(this.api.base(),"/agents/").concat(e)},agentNameUpdate:function(e){return"".concat(this.api.base(),"/agents/").concat(e,"/name")},agentMaxChatLimit:function(e){return"".concat(this.api.base(),"/agents/").concat(e,"/maxChatLimit")},agents:function(){return"".concat(this.api.base(),"/agents")},broadcast:function(){return"".concat(this.api.base(),"/companies/broadcast")},visitor:function(e){return"".concat(this.api.base(),"/visitors/").concat(e)},profile:function(e){return"".concat(this.api.base(),"/profiles/").concat(e)},profiles:function(){return"".concat(this.api.base(),"/profiles")},department:function(e){return"".concat(this.api.base(),"/departments/").concat(e)},departments:function(e){return e?"".concat(this.api.base(),"/departments?profile=").concat(e):"".concat(this.api.base(),"/departments")},setAgentsInDept:function(e){return"".concat(this.api.base(),"/departments/").concat(e,"/agents")}},a={api:n,sBase:function(){return"".concat(this.api.sBase(),"/r/visitors")},wsBase:function(){return"".concat(this.api.wsBase(),"/r/visitors")},vInfoWsBase:function(){return"".concat(this.api.vInfoVisitorWsBase(),"/visitor")},register:function(){return this.sBase()},wsSession:function(e){return"".concat(this.wsBase(),"/ws?session=").concat(e)},vInfoWsSession:function(e){return"".concat(this.vInfoWsBase(),"/ws?accessToken=").concat(e)}},c={api:n,base:function(){return"".concat(this.api.base(),"/agents")},sBase:function(){return"".concat(this.api.sBase(),"/r/agents-sessions")},wsBase:function(){return"".concat(this.api.wsBase(),"/r/agents-sessions/ws")},newSession:function(e){return"".concat(this.sBase())},wsSession:function(e){return"".concat(this.wsBase(),"?session=").concat(e)},vInfoWsBase:function(){return"".concat(this.api.vInfoAgentWsBase(),"/r/agents-sessions")},vInfoWsSession:function(e){return"".concat(this.vInfoWsBase(),"/ws?session=").concat(e)}};e.exports={api:n,company:r,visitor:a,agent:c}},1:function(e,t,n){n("mE87"),n("NpXZ"),n("OIfW"),n("I6Pt"),e.exports=n("B4DJ")},"1wLG":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/41ad2ebdeec87f209c484c66815edeb2.svg"},"3cWP":function(e,t,n){var r=n("xHiZ"),a=n("NbRN"),c=n("OBa8"),o=n("CliE"),i=n("8im8"),s=n("s994"),u=n("OOiM"),l=n("0BHY"),p=s.promisifyRequest(a);function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=t,!e)throw new Error("Session token is missing");return this._sessionToken=e,c.extend(this,new o),this}m.prototype.getClientState=function(){return this.connect().then((function(e){return e.sendAck("SendClientState")}))},m.prototype.setAvailability=function(e){return this.connect().then((function(t){return t.sendAck("SetAvailability",{status:e})}))},m.prototype.acceptChat=function(e){return this.connect().then((function(t){return t.sendAck("AgentAcceptChat",{chat:e})}))},m.prototype.getChatEvents=function(e){return this.connect().then((function(t){return t.sendAck("SendChatDetails",{chat:e})}))},m.prototype.sendTextMessage=function(e,t){return this.connect().then((function(n){return n.sendAck("ChatAgentMessage",{chat:e,text:t})}))},m.prototype.sendIsTyping=function(e,t){return this.connect().then((function(n){return n.sendAck("IsTyping",{chat:e,text:t})}))},m.prototype.fetchFreeAgents=function(e){return this.connect().then((function(t){return t.sendAck("SendFreeAgentsList",{department:e})}))},m.prototype.getFreeDepartments=function(e){var t=e.chatId,n=e.profileId;return this.connect().then((function(e){return e.sendAck("SendFreeDepartmentsList",{chat:t,profile:n})}))},m.prototype.transerChatToAgent=function(e){var t=e.chatId,n=e.agentId;return this.connect().then((function(e){return e.sendAck("InitiateAgentTransferRequest",{chat:t,agent:n})}))},m.prototype.acceptChatTransferRequest=function(e){return this.connect().then((function(t){return t.sendAck("AcceptTransferRequest",{chat:e})}))},m.prototype.declineChatTransferRequest=function(e){return this.connect().then((function(t){return t.sendAck("DeclineTransferRequest",{chat:e})}))},m.prototype.transferChatToDepartment=function(e){var t=e.chatId,n=e.departmentId;return this.connect().then((function(e){return e.sendAck("InitiateDepartmentTransfer",{chat:t,department:n})}))},m.prototype.startMonitoringChat=function(e){return this.connect().then((function(t){return t.sendAck("StartMonitoringChat",{chat:e})}))},m.prototype.stopMonitoringChat=function(e){return this.connect().then((function(t){return t.sendAck("StopMonitoringChat",{chat:e})}))},m.prototype.updateVisitorDetails=function(e){return this.connect().then((function(t){return t.sendAck("UpdateVisitorDetails",e)}))},m.prototype.endChat=function(e){return this.connect().then((function(t){return t.sendAck("AgentEndChat",{chat:e})}))},m.prototype.sendAudio=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendAudio",{chat:e,name:r,url:a,size:c})}));return s.attachCallback(o,n)},m.prototype.sendVideo=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendVideo",{chat:e,name:r,url:a,size:c})}));return s.attachCallback(o,n)},m.prototype.sendFile=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendFile",{chat:e,name:r,url:a,size:c})}));return s.attachCallback(o,n)},m.prototype.sendImage=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendImage",{chat:e,name:r,url:a,size:c})}));return s.attachCallback(o,n)},m.prototype.blockVisitor=function(e,t){var n=this.connect().then((function(t){return t.sendAck("BlockVisitorAndEndChat",{chat:e})}));return s.attachCallback(n,t)},m.prototype.submitTags=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("UpdateChatTags",{chatId:e,tags:t})}));return s.attachCallback(r,n)},m.prototype.updateCustomPrechatFields=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("UpdateCustomPrechatFields",{visitorId:e,customPrechatFields:t})}));return s.attachCallback(r,n)},m.prototype.requestVisitorDetails=function(e,t){var n=this.connect().then((function(t){return t.sendAck("RequestVisitorDetails",{chat:e})}));return s.attachCallback(n,t)},m.prototype.sendAgentStatus=function(e){var t=this.connect().then((function(e){return e.sendAck("SendAgentsStatus")}));return s.attachCallback(t,e)},m.prototype.setChatLanguage=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("SetChatLanguage",{chat:e,lang:t})}));return s.attachCallback(r,n)},m.prototype.startTranslation=function(e,t){var n=this.connect().then((function(t){return t.sendAck("StartTranslation",{chat:e})}));return s.attachCallback(n,t)},m.prototype.stopTranslation=function(e,t){var n=this.connect().then((function(t){return t.sendAck("StopTranslation",{chat:e})}));return s.attachCallback(n,t)},m.prototype.sendAgentSpecialMessage=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,c=r.replyFor,o=this.connect().then((function(r){var a={chat:e,type:t,text:n};return c&&(a.replyFor=c),r.sendAck("AgentSpecialMessage",a)}));return s.attachCallback(o,a)},m.prototype.connect=function(){return this._connectOnce()},m.prototype._connectOnce=function(){return this._connPromise||(this._connPromise=this._createWebsocketConnection()),this._connPromise},m.prototype._createWebsocketConnection=function(){var e=this;return u.Socket(l.agent.wsSession(this._sessionToken),this.options).then((function(t){return t.on("message",e._messageHandler,e),t.on("disconnected",e.onDisconnect,e),t.on("connecting",e.onConnecting,e),t.on("connected",e.onConnect,e),t.on("reconnected",e.onReconnect,e),t.on("max_retries_made",e.onMaxRetriesMade,e),e.onConnect(),r.resolve(t)}))},m.prototype._messageHandler=function(e){c.isString(e)&&(e=i.parseSafe(e)),e?this.emit("notification",e):console.error("Received invalid payload:",e)},m.prototype.onDisconnect=function(e){this._connPromise=null,this.state="disconnected",this.emit("disconnected")},m.prototype.onConnecting=function(e){this.emit("connecting")},m.prototype.onConnect=function(e){this.emit("connected")},m.prototype.onReconnect=function(e){this.emit("reconnected")},m.prototype.onMaxRetriesMade=function(e){this.emit("max_retries_made")},m.prototype.disconnect=function(){var e=this;return"disconnected"!==this.state&&this._connPromise?this._connPromise.then((function(t){e._connPromise=null,t.disconnect()})):r.resolve()},e.exports={newSession:function(e,t){return p({uri:l.agent.newSession(),method:"POST",json:{loginId:t},headers:{"X-HFC-CHAT-AUTH":e}})},Session:m,APISession:function(e){if(!e)throw new Error("Auth token is missing");this._authToken=e}}},"3zkq":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/0189ff32f6d81d15e8f7376ec10233a9.png"},"6NVh":function(e,t,n){var r=n("neSE").parsePhoneNumberFromString,a=n("KPS2").hasScript,c=/^\s*$/,o=/([0-9\s\-]{7,})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s={visitorName:function(e){var t,n,r,o=!0;return!e||c.test(e)?(o=!1,t="TEXT_EMPTY",n="Please enter a name",r="label.nameError"):e.length>100?(o=!1,t="MAX_LENGTH_EXCEEDED",n="Name cannot exceed ".concat(100," characters"),r="label.nameLengthError"):a(e)&&(o=!1,t="HAS_SCRIPT",n="Name cannot contain script"),{isValid:o,type:t,i18nKey:r,errorMessage:n}},email:function(e){var t,n,r,o=!0;return!e||c.test(e)?(o=!1,t="TEXT_EMPTY",n="Please enter an E-mail",r="label.emailError"):e.length>100?(o=!1,t="MAX_LENGTH_EXCEEDED",n="E-mail cannot exceed ".concat(100," characters"),r="label.emailLengthError"):a(e)?(o=!1,t="HAS_SCRIPT",n="E-mail cannot contain script"):i.test(e)||(o=!1,t="IVALID_EMAIL",n="Please enter a valid E-mail",r="label.emailError"),{isValid:o,type:t,i18nKey:r,errorMessage:n}},genericPhoneNumber:function(e){return o.test(e)},phoneNumber:function(e){var t,n,o,i=!0;return!e||c.test(e)?(i=!1,t="TEXT_EMPTY",n="Please enter a phone number",o="label.phoneNumberError"):e.length>20?(i=!1,t="MAX_LENGTH_EXCEEDED",n="Phone number cannot exceed ".concat(20," characters")):a(e)?(i=!1,t="HAS_SCRIPT",n="Phone number cannot contain script"):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r(e);return!!t&&t.isValid()}(e)||(i=!1,t="INVALID_PHONE_NUMBER",n="Please enter a valid Phone number",o="label.phoneNumberError"),{isValid:i,type:t,i18nKey:o,errorMessage:n}},offlineMessage:function(e){var t,n,r,a=!0;return!e||c.test(e)?(a=!1,t="TEXT_EMPTY",n="Please enter a message",r="label.messageError"):e.length>1e3&&(a=!1,t="MAX_LENGTH_EXCEEDED",n="Message cannot exceed ".concat(1e3," characters"),r="label.messageLengthError"),{isValid:a,type:t,i18nKey:r,errorMessage:n}},department:function(e){var t,n,r,a=!0;return e||(a=!1,t="VALUE_REQUIRED",n="Please select a department",r="label.departmentError"),{isValid:a,type:t,i18nKey:r,errorMessage:n}},visitorConsent:function(e){var t,n,r,a=!0;return e||(a=!1,t="VALUE_REQUIRED",n="Please accept the terms to proceed",r="label.consentError"),{isValid:a,type:t,i18nKey:r,errorMessage:n}}};e.exports=s},"6ydX":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/40a004ee375e3e739bb591a05199553d.png"},"8im8":function(e,t,n){var r=n("D0pk");e.exports.findArrayModifications=function(e,t){var n=[],r=[];for(var a in t){var c=t[a];-1===e.indexOf(c)&&r.push(c)}for(var a in e){var o=e[a];-1===t.indexOf(o)&&n.push(o)}return{addedElements:r,removedElements:n}},e.exports.parseSafe=function(e,t){var n;t=r.defaults(t||{},{default:{}});try{n=JSON.parse(e)}catch(r){n=t.default,console.error("Error: Could not parse the given string to object. Error:",r,"\nString:",e)}return n},e.exports.doesArrayIntersect=function(e,t){e||(e=[]),t||(t=[]);var n,r,a=!1;for(n in e)if(r=e[n],-1!==t.indexOf(r)){a=!0;break}return a},e.exports.sortObject=function(t){var n={},r=Object.keys(t);for(var a in r.sort((function(e,t){return(e=e.toLowerCase())<(t=t.toLowerCase())?-1:e>t?1:0})),r){var c=r[a];"object"!=typeof t[c]||t[c]instanceof Array?n[c]=t[c]:n[c]=e.exports.sortObject(t[c])}return n}},"8oMm":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/0d6a370342298ae6bbdbbdb85d2f7867.png"},"8uCd":function(e,t,n){},AnA6:function(e,t,n){"use strict";var r=n("OBa8");e.exports=function(e,t,n){"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=e,this.message=t,r.extend(this,n)},n("sG8X").inherits(e.exports,Error)},B4DJ:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"api",(function(){return id})),n.d(r,"availability",(function(){return sd}));var a=n("bsK2"),c=n.n(a),o=n("aqL7"),i=n("qNah"),s=n("TOeW"),u=n("IG+Q"),l=n.n(u),p=n("rI0a"),m=n.n(p),f=c.a.createContext({});function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var O,h,v=(O=function(e){var t=e.name,n=e.title,r=e.fillColor,a=e.fillOpacity,o=e.height,i=e.width;switch(t){case"chat-bubble":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"30",viewBox:"0 0 32 30"},c.a.createElement("title",null,n||"Chat"),c.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M19.981 0H12.02C5.395 0 0 5.861 0 13.056c0 3.517 1.302 6.71 3.423 9.054.558.606.782 1.455.67 2.304l-.595 4.406c-.112.808.632 1.415 1.34 1.091l7.367-3.718a2.489 2.489 0 0 1 1.079-.243h6.92C26.717 25.91 32 20.13 32 13.056 32 5.86 26.605 0 19.981 0z"}));case"offline-chat-bubble":return c.a.createElement("svg",{width:"32",height:"22",viewBox:"0 0 32 22",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("title",null,n||"Offline Chat"),c.a.createElement("path",{d:"M2.53 1.3C1.61.586 1.819 0 2.992 0H29.01c1.172 0 1.38.586.457 1.3l-11.526 8.967c-.523.407-1.243.586-1.942.552-.7.034-1.42-.146-1.942-.552L2.53 1.3zM30.3 3.666c.935-.697 1.7-.323 1.7.829v15.41C32 21.057 31.04 22 29.867 22H2.133C.96 22 0 21.057 0 19.905V4.495c0-1.152.765-1.526 1.7-.83l12.598 9.393c.471.346 1.088.517 1.704.509.614.008 1.231-.162 1.702-.51L30.3 3.667z",fill:"#FFF",fillRule:"nonzero"}));case"attachment":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},c.a.createElement("title",null,n||"Attachment"),c.a.createElement("path",{fill:"#777",fillRule:"nonzero",stroke:"#FFF",strokeWidth:".2",d:"M15.877 9.883l-5.015-7.081C10.108 1.738 9.212 1.14 8.2 1.02c-1.403-.164-2.51.687-2.716.86L2.77 3.846c-1.031.747-1.62 1.64-1.745 2.655-.177 1.425.65 2.56.808 2.753l4.89 6.898c.21.297.64.344.963.11.323-.233.417-.662.207-.958l-4.93-6.958c-.003-.005-.624-.78-.507-1.678.077-.59.464-1.141 1.151-1.64l2.79-2.024c.005-.005.76-.643 1.645-.534.589.073 1.14.472 1.644 1.183l5.02 7.086c.014.02 1.037 1.463.822 2.8-.09.569-.396 1.035-.934 1.425-1.8 1.302-3.047.07-4.126-1.453-.766-1.08-3.052-4.171-3.151-4.306 0 0-1.484-1.901-.496-2.618.638-.461 1.41.029 2.412 1.442l2.976 4.181c.213.283.636.327.953.098.318-.23.412-.65.216-.945l-2.972-4.185c-.873-1.23-2.33-3.293-4.48-1.736-.556.402-.915.95-.955 1.597-.08 1.305.947 2.744 1.16 2.99.215.294 2.37 3.361 3.093 4.383 1.937 2.734 4.073 3.284 6.21 1.735.856-.62 1.368-1.422 1.52-2.385.308-1.94-1.02-3.8-1.077-3.879z"}));case"close":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"9",viewBox:"0 0 9 9"},c.a.createElement("title",null,n||"Close"),c.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M4.5 3.097L7.306.29A.992.992 0 0 1 8.71 1.694L5.903 4.5 8.71 7.306A.992.992 0 1 1 7.306 8.71L4.5 5.903 1.694 8.71A.992.992 0 0 1 .29 7.306L3.097 4.5.29 1.694A.992.992 0 1 1 1.694.29L4.5 3.097z"}));case"minimize":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"2",viewBox:"0 0 12 2"},c.a.createElement("title",null,n||"Minimize"),c.a.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1 2a1 1 0 1 1 0-2h10a1 1 0 0 1 0 2H1z"}));case"send-web":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14"},c.a.createElement("title",null,n||"Send"),c.a.createElement("path",{fill:"#000",fillRule:"nonzero",d:"M.016 13.35l1.183-5.12a.548.548 0 0 1 .466-.42l6.613-.685c.187-.016.187-.296 0-.327l-6.613-.639a.514.514 0 0 1-.466-.404L.016.65C-.093.214.374-.144.778.058l12.93 6.475a.545.545 0 0 1 0 .965L.778 13.942c-.404.202-.87-.156-.762-.592z",opacity:".4"}));case"email":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"13",viewBox:"0 0 18 13"},c.a.createElement("title",null,n||"Email"),c.a.createElement("path",{fill:"#777",fillRule:"nonzero",d:"M15.353 13H2.647a2.728 2.728 0 0 1-1.872-.732A2.432 2.432 0 0 1 0 10.5v-8C0 1.12 1.185 0 2.647 0h12.706C16.815 0 18 1.12 18 2.5v8c0 1.38-1.185 2.5-2.647 2.5zM2.647 1C1.77 1 1.06 1.672 1.06 2.5v8c0 .828.71 1.5 1.588 1.5h12.706c.877 0 1.588-.672 1.588-1.5v-8c0-.828-.71-1.5-1.588-1.5H2.647zM9 7a.55.55 0 0 1-.318-.1L3.211 3.025a.488.488 0 0 1-.208-.46.504.504 0 0 1 .318-.4.555.555 0 0 1 .525.06L9 5.875l5.03-3.565a.555.555 0 0 1 .525-.06c.174.07.295.223.318.4a.488.488 0 0 1-.208.46L9.318 6.9A.55.55 0 0 1 9 7z"}));case"mute":return c.a.createElement("svg",{width:"21",height:"14",viewBox:"0 0 21 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("title",null,n||"Mute"),c.a.createElement("g",{id:"Final",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("g",{id:"Chat-Widget",transform:"translate(-1242.000000, -1658.000000)",stroke:"#777777",strokeWidth:"1.2"},c.a.createElement("g",{transform:"translate(120.000000, 942.000000)",id:"Group-6"},c.a.createElement("g",{transform:"translate(961.000000, 106.000000)"},c.a.createElement("g",{id:"Rectangle-2",transform:"translate(0.000000, 45.000000)"},c.a.createElement("g",{id:"Group-8",transform:"translate(0.000000, 500.000000)"},c.a.createElement("g",{id:"Group-9",transform:"translate(20.000000, 64.000000)"},c.a.createElement("g",{id:"mute",transform:"translate(142.000000, 2.000000)"},c.a.createElement("path",{d:"M3.64921894,3 L1,3 C0.44771525,3 -6.76353751e-17,3.44771525 0,4 L0,8 C6.76353751e-17,8.55228475 0.44771525,9 1,9 L3.64921894,9 C3.87629044,9 4.09660094,9.07728075 4.27391399,9.21913119 L7.37530495,11.700244 C7.80656689,12.0452535 8.43585926,11.9753321 8.78086881,11.5440702 C8.92271925,11.3667572 9,11.1464466 9,10.9193752 L9,1.08062485 C9,0.528340098 8.55228475,0.0806248475 8,0.0806248475 C7.7729285,0.0806248475 7.552618,0.1579056 7.37530495,0.299756038 L4.27391399,2.78086881 C4.09660094,2.92271925 3.87629044,3 3.64921894,3 Z",id:"Shape"}),c.a.createElement("path",{d:"M19,3 L13,9",id:"Shape"}),c.a.createElement("path",{d:"M13,3 L19,9",id:"Shape"}))))))))));case"unmute":return c.a.createElement("svg",{width:"11px",height:"14px",viewBox:"0 0 11 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("title",null,n||"UnMute"),c.a.createElement("g",{id:"Final",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("g",{id:"Chat-Widget",transform:"translate(-1291.000000, -1658.000000)",stroke:"#777777",strokeWidth:"1.2"},c.a.createElement("g",{transform:"translate(120.000000, 942.000000)",id:"Group-6"},c.a.createElement("g",{transform:"translate(961.000000, 106.000000)"},c.a.createElement("g",{id:"Rectangle-2",transform:"translate(0.000000, 45.000000)"},c.a.createElement("g",{id:"Group-8",transform:"translate(0.000000, 500.000000)"},c.a.createElement("g",{id:"Group-9",transform:"translate(20.000000, 64.000000)"},c.a.createElement("g",{id:"unmute",transform:"translate(191.000000, 2.000000)"},c.a.createElement("path",{d:"M3.64921894,3 L1,3 C0.44771525,3 -6.76353751e-17,3.44771525 0,4 L0,8 C6.76353751e-17,8.55228475 0.44771525,9 1,9 L3.64921894,9 C3.87629044,9 4.09660094,9.07728075 4.27391399,9.21913119 L7.37530495,11.700244 C7.80656689,12.0452535 8.43585926,11.9753321 8.78086881,11.5440702 C8.92271925,11.3667572 9,11.1464466 9,10.9193752 L9,1.08062485 C9,0.528340098 8.55228475,0.0806248475 8,0.0806248475 C7.7729285,0.0806248475 7.552618,0.1579056 7.37530495,0.299756038 L4.27391399,2.78086881 C4.09660094,2.92271925 3.87629044,3 3.64921894,3 Z",id:"Shape"}))))))))));case"default-user":return c.a.createElement("svg",{width:"25",height:"25",viewBox:"0 0 220 220",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("title",null,n||"User"),c.a.createElement("path",{d:"M110.249 42c16.932 0 30.378 13.651 30.378 30.228v14.139c0 16.576-13.446 29.74-30.378 29.74-16.932 0-30.876-13.164-30.876-29.74v-14.14C79.373 55.652 93.317 42 110.25 42zm-22.41 76.544c-2.49 1.95-11.951 7.801-19.92 10.239-9.461 2.925-17.927 6.338-18.923 13.651-.996 7.8-.996 23.402-.996 23.402 21.414 17.552 102.586 17.552 124 0 0 0 0-15.601-.996-23.402-.498-7.313-9.462-10.726-18.924-13.651-7.968-2.438-16.931-8.288-19.92-10.239-6.473 3.9-13.943 6.339-21.911 6.339-8.466 0-15.936-2.438-22.41-6.339z",fill:"#C8C8C8",fillRule:"evenodd"}));case"user-profile":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},c.a.createElement("path",{fill:"#777",fillRule:"nonzero",d:"M12.13 16H3.97C2.105 16 0 14.501 0 12.516c0-1.616.541-3.27 1.484-4.633.18-.272.561-.311.822-.117.24.176.28.507.12.74-.822 1.168-1.283 2.647-1.283 4.01 0 1.343 1.524 2.375 2.827 2.375h8.16c1.444 0 2.747-1.13 2.747-2.375v-.214c0-1.246-.461-2.628-1.243-3.796-.16-.253-.12-.564.12-.74a.577.577 0 0 1 .822.137C15.48 9.246 16 10.842 16 12.302v.214C16 14.384 14.195 16 12.13 16zm.08-11.893C12.21 1.83 10.307 0 7.98 0 5.634 0 3.75 1.85 3.75 4.107c0 2.277 1.904 4.107 4.23 4.107 2.326 0 4.23-1.83 4.23-4.107zm-1.142 0c0 1.655-1.384 3.017-3.108 3.017-1.704 0-3.108-1.343-3.108-3.017 0-1.654 1.384-3.017 3.108-3.017 1.724 0 3.108 1.363 3.108 3.017z"}));case"rounded-tick-icon":return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 60 60"},c.a.createElement("path",{fill:"#FFF",fillRule:"nonzero",d:"M30 0C13.402 0 0 13.491 0 30c0 16.598 13.491 30 30 30 16.598 0 30-13.491 30-30C60 13.402 46.598 0 30 0zm0 55.74C15.799 55.74 4.26 44.2 4.26 30 4.26 15.799 15.8 4.26 30 4.26 44.201 4.26 55.74 15.8 55.74 30 55.74 44.201 44.2 55.74 30 55.74zm-2.929-17.13c.533 0 1.154-.178 1.509-.622l12.603-12.603c.8-.8.8-2.22 0-3.018-.798-.799-2.219-.799-3.017 0L27.07 33.462l-5.237-5.237c-.798-.799-2.219-.799-3.017 0-.8.799-.8 2.219 0 3.018l6.745 6.745c.355.355.976.621 1.509.621z"}));case"star":return c.a.createElement("svg",{width:"25",height:"25",viewBox:"0 0 56 53",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("title",null,n),c.a.createElement("path",{d:"M28 44.26l-15.542 8.123c-1.222.638-2.023.057-1.787-1.313l2.965-17.186L1.062 21.7c-.988-.958-.68-1.895.684-2.092l17.377-2.51 7.762-15.636c.616-1.241 1.611-1.247 2.23 0l7.762 15.635 17.377 2.51c1.366.198 1.67 1.136.684 2.093L42.364 33.884l2.965 17.186c.235 1.364-.567 1.95-1.787 1.313L28 44.26z",fill:r,fillRule:"evenodd",fillOpacity:a||1}));case"exclamation":return c.a.createElement("svg",{width:i||84,height:o||66,viewBox:"0 0 84 66",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("title",null,n||"Exclamation"),c.a.createElement("g",{fill:"none",fillRule:"evenodd"},c.a.createElement("path",{d:"M37.345 2.933c2.527-3.896 6.625-3.892 9.15 0L82.67 58.721c2.527 3.896.824 7.054-3.831 7.054H5c-4.643 0-6.356-3.162-3.832-7.054L37.345 2.933z",fill:r||"#FF2540"}),c.a.createElement("path",{fill:r||"#FFF",d:"M39.14 19.412h6.022v29.267H39.14zM39.14 52.262h6.022v4.778H39.14z"})));default:return null}},function(e){var t=e.name,n=e.title,r=e.fillColor,a=e.fillOpacity,o=g(e,["name","title","fillColor","fillOpacity"]),i=O({name:t,title:n,fillColor:r,fillOpacity:a});return c.a.cloneElement(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o))}),x=(h=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(h)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(h.substr(0,4))),j=(navigator.platform.indexOf("Win"),-1!==navigator.userAgent.indexOf("Trident/")),y=-1!==navigator.userAgent.indexOf("Edge/");function E(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var w=function(e){var t=e.className,n=e.disableAnimation,r=void 0===n?x:n,o=E(e,["className","disableAnimation"]),i=Object(a.useContext)(f),s=i.theme,u=i.position,l=u.isBadgeVertical,p=u.isBadgeCompact,d=u.bagdePosition,b=m()("badge",t,{"badge-vertical":l&!p&&!x},{right:l&&"right"===d&&!x},{left:l&&"left"===d&&!x},{"animated fadeInUp-trans-50":!r&&!l});return c.a.createElement("div",Object.assign({className:b,style:l&!p&&!x?s:{}},o))},I=function(e){var t=e.icon,n=e.imgSrc,r=e.altText,o=E(e,["icon","imgSrc","altText"]),i=Object(a.useContext)(f).theme;return c.a.createElement("div",{className:"badge-image-container",style:i},!n&&c.a.createElement(v,Object.assign({className:"badge-image",name:t},o)),n&&c.a.createElement("img",Object.assign({className:"img badge-image",src:n,alt:r},o)))},T=function(e){var t=Object.assign({},e);return c.a.createElement(I,t)},R=function(e){var t=e.badgeTitle,n=e.icon,r=e.imgSrc,o=e.title,i=Object(a.useContext)(f).position.isBadgeCompact;return c.a.createElement(c.a.Fragment,null,!i&&!x&&c.a.createElement("div",{className:"badge-content text-truncate"},t),c.a.createElement(I,{icon:n,imgSrc:r,title:o}))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C="WIDGET/START",N="WIDGET/INIT_IPOST",P="WIDGET/LISTEN_TO_IPOST",D="WIDGET/CREATE_SUCCESS",F="WIDGET/FETCH_PING_SUCCESS",M="WIDGET/WIDGET_RENDERED",L="WIDGET/DO_EXPAND_WIDGET",V="WIDGET/DO_COLLAPSE_WIDGET",H="WIDGET/EXPAND_WIDGET",B="WIDGET/EXPAND_IFRAME",G="WIDGET/COLLAPSE_IFRAME",U="USER_CLICKED_BADGE",W=function(e){var t=e.responseJson;return{type:F,responseJson:t}},q=function(){return{type:L}},z=function(){return{type:V}},K=function(){return{type:B}},J=function(){return{type:G}},X=function(){return{type:H}},Y=function(){return{type:"WIDGET/COLLAPSE_WIDGET"}},Q=function(){return{type:U}};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne="VISITOR/UPDATE_VISITOR_INFO",re="VISITOR/UPDATE_VISITOR_ACCESS_TOKEN",ae="VISITOR/UPDATE_CURRENT_CHAT",ce="VISITOR/UNSET_CURRENT_CHAT",oe="VISITOR/SET_VISITOR_STATE",ie="VISITOR/SET_LAST_CHAT_AGENT_ID",se="VISITOR/SET_LAST_CHAT_TIMESTAMP",ue="VISITOR/LOAD_VISITOR",le="VISITOR/FETCH_INTEGRATIONS",pe="VISITOR/UNSET_VISITOR",me="VISITOR/BLOCK_VISITOR",fe="VISITOR/SET_VISITOR_ID",de="MUTE_AUDIO",be="UNMUTE_AUDIO",ge={PASSIVE:"passive",SENDING_FIRST_MESSAGE:"sending_first_message",WAITING:"waiting",CHATTING:"chatting"},Oe=function(e){return{type:ne,payload:e}},he=function(e){return ee({type:ae},e)},ve=function(){return{type:ce}},xe=function(e){return ee({type:ue},e)},je=function(e){return ee({type:"VISITOR/LOAD_VISITOR_FROM_STORAGE"},e)},ye=function(e){return{type:ie,payload:e}},Ee=function(e){return{type:se,payload:e}},we=function(e){return{type:"VISITOR/FETCH_INTEGRATIONS_SUCCESS",payload:e}},Ie=function(e){return{type:"VISITOR/UPDATE_CUSTOM_PRECHAT_DATA",payload:e}},Te=function(){return{type:me}},Re=function(e){var t=e.visitorId;return{type:fe,payload:{visitorId:t}}},ke=function(e){return{type:"VISITOR/SET_VISITOR_FIRST_MESSAGE",payload:e}};function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae=function(e){return Object(u.get)(e,"visitor.name")},Ce=function(e){return Object(u.get)(e,"visitor.email","")},Ne=function(e){return Object(u.get)(e,"visitor.phoneNumber")},Pe=function(e){return Object(u.get)(e,"visitor.department")},De=function(e){return Object(u.get)(e,"visitor.accessToken")},Fe=function(e){return Object(u.get)(e,"visitor.currentChatId")},Me=function(e){return Object(u.get)(e,"visitor.previousChatId")},Le=function(e){return Object(u.get)(e,"visitor.state")},Ve=function(e){return Object(u.get)(e,"visitor.customPrechatData",{})},He=function(e){return Object(u.get)(e,"visitor.sound","on")},Be=function(e){return"off"===He(e)},Ge=function(e){return Object(u.get)(e,"visitor.id")},Ue=function(e){return Object(u.get)(e,"visitor.firstMessage")},We=function(e){return{name:Object(u.get)(e,"visitor.name"),email:Object(u.get)(e,"visitor.email"),phoneNumber:Object(u.get)(e,"visitor.phoneNumber"),department:Object(u.get)(e,"visitor.department")}},qe=function(e){var t=Fe(e);t&&t.length<=4&&(t=void 0);var n=Le(e);return n===ge.SENDING_FIRST_MESSAGE&&(n=ge.PASSIVE),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({accessToken:De(e),id:Ge(e),currentChatId:t,state:n,lastChatWith:Qe(e),lastChatAt:Ze(e),customPrechatData:Ve(e),sound:He(e)},Ae(e)&&{name:Ae(e)},{},Ce(e)&&{email:Ce(e)},{},Pe(e)&&{department:Pe(e)},{},Ne(e)&&{phoneNumber:Ne(e)})},ze=function(e){return Object(u.get)(e,"visitor.geo.country","")},Ke=function(e){return Object(u.get)(e,"visitor.geo.countryName","")},Je=function(e){return Object(u.get)(e,"visitor.geo.state","")},Xe=function(e){return Object(u.get)(e,"visitor.geo.city","")},Ye=function(e){return De(e)},Qe=function(e){return Object(u.get)(e,"visitor.lastChatWith")},Ze=function(e){return Object(u.get)(e,"visitor.lastChatAt")},$e=function(e,t){var n=function(e){return Object(u.get)(e,"visitor.apps",[])}(e);return Object(u.find)(n,{name:t})},et=function(e){var t=$e(e,"mailchimp");return Object(u.get)(t,"settings.showSubscribeForm",!1)},tt=function(e){var t=Object(u.get)(e,"visitor.integrations",[]),n=Object(u.find)(t,{name:"mailchimp"},{});return"subscribed"===Object(u.get)(n,"result.status")},nt=function(e){var t=$e(e,"magento");return Object(u.get)(t,"settings.storeUrl","")},rt=function(e){var t=$e(e,"shopify");return Object(u.get)(t,"settings.showCartInfo",!1)},at=function(e){var t=$e(e,"woocommerce");return Object(u.get)(t,"settings.showCartInfo",!1)},ct=function(e){var t=$e(e,"magento");return Object(u.get)(t,"settings.showCartInfo",!1)},ot=function(e){return function(e){if("string"==typeof e&&e){var t;try{t=new URL(e)}catch(t){console.error("Invalid URL. URL:",e,"Error:",t)}return t.hostname}return""}(nt(e))},it=function(e){return!Ge(e)},st=function(e){var t=Le(e);return!!Object(u.includes)([ge.WAITING,ge.CHATTING],t)},ut=function(e){return Object(u.get)(e,"customField.customFields")},lt=function(e,t){return Object(u.get)(e,"customField.customFields[".concat(t,"]"))},pt=function(e,t){return Object(u.get)(e,"customField.customFieldsInfo[".concat(t,"]"))},mt="sending",ft="sent",dt="failed",bt={NONE:"none",ENGAGED:"engaged",CHATTING:"chatting",CHAT_ENDED:"chat_ended",CHAT_DISMISSED:"chat_dismissed"},gt=function(e){return l.a.get(e,"visitorInfo",{})},Ot=function(e){var t={visitor_name:Ae(e),email:Ce(e),phone_number:Ne(e)},n=ht(e);return l.a.extend(t,n),t},ht=function(e){var t=[],n={},r=ut(e);for(var a in r){var c=r[a];c&&(t.push(a),n[vt(a)]=c)}return t.length>0&&(n["visitor.custom_field_keys"]=JSON.stringify(t)),n},vt=function(e){return"visitor.custom_field."+e},xt=function(e){return l.a.get(e,"visitorInfo.engaged_by.agent_id")},jt=function(e){return l.a.get(e,"visitorInfo.chat_status",bt.NONE)},yt=function(e){return l.a.get(e,"visitorInfo.engage_messages",[])||[]},Et=function(e){return jt(e)===bt.ENGAGED},wt=function(e){var t=gt(e);return{agentId:l.a.get(t,"engaged_by.agent_id"),agentChatId:l.a.get(t,"engaged_by.agent_chat_id"),agentName:l.a.get(t,"engaged_by.agent_name"),profilePictureUrl:l.a.get(t,"engaged_by.profile_pic_url"),isEngaged:t.chat_status===bt.ENGAGED,chat_status:t.chat_status,messages:t.engage_messages||[]}},It=function(e){return l.a.get(e,"visitorInfo.tempChatId")},Tt=function(e){return l.a.get(e,"visitorInfo.badge_status")},Rt=function(e){var t=yt(e);return l.a.map(t,"message_id")},kt=n("eK2b"),_t=function(e){return Object(u.get)(e,"agent.showAgentName")},St=function(e){return Object(u.get)(e,"agent.showAgentPicture")},At=function(e){return Object(u.get)(e,"agent.profilePictureUrl")},Ct=function(e){return _t(e)?Object(u.get)(e,"agent.agentName"):void 0},Nt=function(e){return Ct(e)||"Agent"},Pt=function(e){return Object(u.get)(e,"agent.previousAgent.agentName","")},Dt=function(e){return Object(u.get)(e,"agent.joinedAgents",[])},Ft=function(e){var t=Object(u.get)(e,"agent",{});return{agentName:t.agentName,agentId:t.agentId,isBot:t.isBot,profilePictureUrl:t.profilePictureUrl}},Mt="none",Lt="closed",Vt={SENDING:"sending",SENT:"sent",FAILED:"failed",DELIVERED:"delivered",READ:"read"},Ht=function(e){var t=_t(e),n=function(e){return l.a.get(e,"visitorInfo.engaged_by.agent_name")}(e);return t?n:""},Bt=function(e){var t=St(e),n=function(e){return l.a.get(e,"visitorInfo.engaged_by.profile_pic_url")}(e);return t?n:""},Gt=Object(kt.a)([jt,Tt,Le],(function(e,t,n){return e===bt.ENGAGED&&n!==ge.CHATTING&&t!==Lt})),Ut=function(e){return Object(u.get)(e,"page.currentPage.url")},Wt=function(e){return Object(u.get)(e,"page.currentPage.domain")},qt=function(e){return Object(u.get)(e,"page.currentPage.host")},zt=function(e){return Object(u.get)(e,"page.currentPage.timestamp")},Kt=function(e){return Object(u.get)(e,"page.isWindowActive",!1)},Jt=function(e){return Object(u.get)(e,"page.unReadMessages.length",0)},Xt=function(e){return Object(u.get)(e,"widget")},Yt=function(e){return Object(u.get)(e,"config.EMBED_TOKEN")},Qt=function(e){return Object(u.get)(e,"widget.accessToken")},Zt=function(e){return Object(u.get)(e,"widget.name")},$t=function(e){return Object(u.get)(e,"widget.profileChatId")},en=function(e,t){return Object(u.get)(function(e,t){return Object(u.get)(e,"department.departments['".concat(t,"']"))}(e,t),"departmentChatId_v2")},tn=function(e,t){var n=function(e){return Object(u.get)(e,"department.departments",{})}(e);return l.a.get(l.a.find(n,{departmentChatId_v2:t}),"_id")},nn=function(e){return Object(u.get)(e,"widget.broadcastDepartment")},rn=function(e){return en(e,nn(e))},an=function(e){return Object(u.get)(e,"widget.isWidgetExpanded",!1)},cn=function(e){return Object(u.get)(e,"widget.isIframeExpanded",!1)},on=function(e){return Object(u.get)(e,"widget.currentForm","conversation")},sn=function(e){return Object(u.get)(e,"widget.prechat.name.enabled",!1)},un=function(e){return Object(u.get)(e,"widget.prechat.email.enabled",!1)},ln=function(e){return Object(u.get)(e,"widget.prechat.phoneNumber.enabled",!1)},pn=function(e){return Object(u.get)(e,"widget.prechat.department.enabled",!1)},mn=function(e){return!Object(u.get)(e,"widget.prechat.name.optional",!1)},fn=function(e){return!Object(u.get)(e,"widget.prechat.email.optional",!1)},dn=function(e){return!Object(u.get)(e,"widget.prechat.phoneNumber.optional",!1)},bn=function(e){return!Object(u.get)(e,"widget.prechat.department.optional",!1)},gn=function(e){return Object(u.get)(e,"widget.chatApiConnectionStatus","connected")},On=function(e){return"connected"!==gn(e)},hn=function(e){return Object(u.get)(e,"widget.appearance",{badgeStyle:"full",widgetSize:"m",position:"bottomRight",quickReply:{}})},vn=function(e){return hn(e).position},xn=function(e){return hn(e).quickReply},jn=function(e){return"m"===function(e){return hn(e).widgetSize}(e)},yn=function(e){return"compact"===hn(e).badgeStyle},En=function(e){return"left"===vn(e)||"right"===vn(e)},wn=function(e){return Object(u.get)(e,"widget.removeHfcBranding")},In=function(e){return Object(u.get)(e,"widget.hideRatingForm")},Tn=function(e){return Object(u.get)(e,"widget.maximizedOnLoad")},Rn=function(e){return Object(u.get)(e,"widget.canShowBadge")},kn=function(e){return Object(u.get)(e,"widget.sdkShowBadge")},_n=function(e){var t=function(e){return Object(u.get)(e,"widget.text.firstMessage")}(e),n=We(e).name;return t.replace(/{visitorName}/,n||"")},Sn=function(e){return Object(u.get)(e,"widget.clientStateProcessed",!1)},An=function(e){return Object(u.get)(e,"widget.text.titleBar","")},Cn=function(e){return Object(u.get)(e,"widget.text.welcomeText","")},Nn=function(e){return Object(u.get)(e,"widget.text.startButton","")},Pn=function(e){return Object(u.get)(e,"widget.isWidgetExpandedOnce")||!1},Dn=function(e){return Object(u.get)(e,"widget.routing.isQueueEnabled",!1)},Fn=function(e){return Object(u.get)(e,"widget.prechat.enabled",!1)},Mn=function(e){return l.a.get(e,"widget.text.welcomeQuickReply.replies",[])},Ln=function(e){return Object(u.get)(e,"widget.prechat.enabledInBotMode",!0)},Vn=Object(s.b)((function(e){var t,n,r=Object(u.get)(e,"widget.text.badge",""),a=Et(e),c=Jt(e),o=Le(e);if(a)(t=Ht(e))&&(r=t),n=Bt(e);else if(o===ge.CHATTING){r=An(e);var i=_t(e),s=St(e);i&&(r=Nt(e));var l=At(e);n=s?l:""}return{badgeTitle:r,notificationCount:0,unreadMessages:c,imgSrc:n,title:r,agentName:t}}),(function(e){return{onBadgeClick:function(){return e(Q())}}}))((function(e){var t=e.onBadgeClick,n=e.unreadMessages;return c.a.createElement(w,{onClick:t},n>0&&c.a.createElement("div",{className:"unread-messages-count"},n),c.a.createElement(R,Object.assign({icon:"chat-bubble"},e)))})),Hn=Object(s.b)((function(e){return{badgeTitle:Object(u.get)(e,"widget.text.offlineBadge",""),notificationCount:0}}),(function(e){return{onBadgeClick:function(){return e(Q())}}}))((function(e){var t=e.onBadgeClick;return c.a.createElement(w,{onClick:t},c.a.createElement(R,Object.assign({icon:"offline-chat-bubble"},e)))})),Bn=function(e,t){return Object(u.get)(e,"triggeredChat.triggeredChats['".concat(t,"']"),{})},Gn=function(e){return Object(u.get)(e,"triggeredChat.triggeredChats",{})},Un=function(e,t){return Object(u.get)(Bn(e,t),"name")},Wn=function(e,t){return Object(u.get)(Bn(e,t),"message")},qn=function(e){return Object(u.get)(e,"triggeredChat.activeTriggeredChat",{})},zn=function(e){return!!Object(u.get)(qn(e),"triggeredChatId")},Kn=function(e){var t=Object(u.get)(qn(e),"triggeredChatId");return Object(u.get)(Gn(e),"".concat(t,".mute"))},Jn=function(e){return Object(u.get)(e,"triggeredChat.sdkIsTriggeredChatsEnabled")},Xn=function(e){return Object(u.get)(qn(e),"message")},Yn="TRIGGERED_CHAT/TRIGGERED_CHAT_SATISFIED",Qn="TRIGGERED_CHAT/CLOSE_TRIGGERED_CHAT",Zn="TRIGGERED_CHAT/SEND_TRIGGERED_CHAT_REPLY",$n=function(){return{type:Qn}},er=c.a.createElement(I,{icon:"chat-bubble"}),tr=Object(s.b)((function(e){var t=qn(e);return{message:t.message,availableAgents:t.availableAgents,canShowAgentProfilePic:St(e),canShowAgentName:_t(e)}}),(function(e){return{onCloseClick:function(){e($n())}}}))((function(e){var t=e.message,n=e.availableAgents,r=e.canShowAgentProfilePic,o=e.canShowAgentName,i=e.onCloseClick,s=Object(a.useContext)(f).theme,u=Object(a.useMemo)((function(){return function(e,t){var n=0;return e&&0!==t.length&&t.forEach((function(e){e.profilePictureUrl&&(n+=1)})),n}(r,n)}),[r,n]);return c.a.createElement("div",{className:"titlebar",style:s},c.a.createElement("div",{className:"profile-pics agent-count_".concat(u)},!r&&er,r&&c.a.createElement(c.a.Fragment,null,0!==n.length&&0!==u&&n.map((function(e){var t=e.id,n=e.name,r=e.profilePictureUrl;return r?c.a.createElement(T,{key:"agent_".concat(t),imgSrc:r,title:o?n:""}):null})),(0===n.length||0===u)&&er)),c.a.createElement("div",{className:"sub-title"},t),c.a.createElement("div",{className:"titlebar-action-container"},c.a.createElement("div",{className:"icon",onClick:i},c.a.createElement(v,{name:"close",title:"Close"}))))})),nr=n("Ujrv"),rr=n("6NVh"),ar=n("ffmp"),cr=c.a.createContext(!1),or=function(e){var t={};for(var n in e)t["".concat(e[n].fieldId)]="";return t},ir={name:rr.visitorName,email:rr.email,phoneNumber:rr.phoneNumber,message:rr.offlineMessage,department:rr.department,visitorConsent:rr.visitorConsent},sr={text:ar.validateText,dropdown:ar.validateDropdown,radio:ar.validateRadio,checkbox:ar.validateCheckbox,textarea:ar.validateTextarea},ur=function(){var e=Object(a.useContext)(f),t=e.removeHfcBranding,n=e.i18n,r=Object(s.d)(Wt),o=r;try{o=new URL(r).host}catch(e){}return t?null:c.a.createElement("a",{className:"powered-by",href:"https://happyfox.com/live-chat/?utm_source=".concat(o,"&utm_medium=widget-link"),target:"_blank"},n.t("label.footer"))},lr=function(e){return Object(u.get)(e,"availability.profileAvailability",!1)},pr=function(e){return Object(u.get)(e,"availability.finalAvailability.available",!1)},mr=function(e){return Object(u.get)(e,"availability.finalAvailability.availableAndFree",!1)},fr=function(e){return Object(u.get)(e,"availability.allDepartmentAvailability",[])},dr=function(e,t){var n=fr(e),r=Object(u.find)(n,{id:t});return Object(u.get)(r,"agents",[])},br=function(e,t){var n=fr(e);return Object(u.find)(n,{id:t})||{}},gr=function(e,t){var n=br(e,t);return!!n&&(n.available&&!n.available_agents_busy)},Or=Object(kt.a)([fr],(function(e){var t=!1;return e.forEach((function(e){e.available&&!e.available_agents_busy&&(t=!0)})),t})),hr=function(e,t){var n="",r=!0;if(!t)return{statusText:n,isAvailable:r};var a=br(e,t),c=a.available,o=a.available_agents_busy,i=function(e){return l.a.get(e,"widget.routing.isMaxChatLimitEnabled",!1)}(e),s=Dn(e);return c?i?(s&&o&&(r=!0,n="busy"),!s&&o&&(r=!1,n="busy")):o&&(r=!1,n="busy"):(r=!1,n="offline"),{statusText:n,isAvailable:r}},vr=function(e){var t=e.option,n=Object(s.d)(on),r=t.departmentChatId_v2,o=Object(s.d)((function(e){return hr(e,r)})).statusText,i=Object(a.useCallback)((function(){return"prechat"===n&&o?" ("+o+")":""}),[n,o]);return c.a.createElement("option",{value:r},t.name," ",i())},xr=function(e){var t=e.name,n=e.label,r=e.data,a=e.value,o=e.onChange,i=r.options;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:"form-label select"},n),c.a.createElement("select",{className:"form-input select",name:t,value:a,onChange:o},i.map((function(e){return c.a.createElement(vr,{key:e._id,option:e})}))))},jr=n("QnGl");function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(n,!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}var Tr={lng:"en",fallbackLng:"en"},Rr=function(){return""};function kr(){var e;return e=regeneratorRuntime.mark((function e(t){var r,a,c,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},a=l.a.defaults(r,Tr),c=a.lng,o=wr({},c,{translation:t}),"en"===c){e.next=9;break}return e.next=7,n.e(4).then(n.t.bind(null,"2kmL",3));case 7:i=e.sent,o.en=i.default;case 9:return e.prev=9,e.next=12,jr.a.init(Er({},a,{resources:o}));case 12:Rr=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Error while initializing language features",e.t0);case 18:case"end":return e.stop()}}),e,null,[[9,15]])})),(kr=function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ir(c,r,a,o,i,"next",e)}function i(e){Ir(c,r,a,o,i,"throw",e)}o(void 0)}))}).apply(this,arguments)}var _r={init:function(e){return kr.apply(this,arguments)},t:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rr.apply(null,t)}};function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Cr=function(e){var t=e.className,n=Ar(e,["className"]);return c.a.createElement("form",Object.assign({className:m()("form",t)},n,{noValidate:!0,autoComplete:"off"}))},Nr=function(e){var t,n,r=e.className,o=e.children,i=e.error,s=void 0===i?{}:i,u=Ar(e,["className","children","error"]),l=Object(a.useContext)(cr);return s!=={}&&(t=!!s.type,n=s.errorMessage),c.a.createElement("div",Object.assign({className:m()("form-group",{"has-error":s&&t},r)},u),o,l&&c.a.createElement("span",{className:"form-text error-message"},s&&n))},Pr=function(e){var t=e.id,n=e.label,r=e.className,a=e.value,o=void 0===a?"":a,i=e.validations,s=void 0===i?{}:i,u=e.data,l=void 0===u?{}:u,p=Ar(e,["id","label","className","value","validations","data"]),f=l.helpText,d=l.isHelpTextEnabled,b=s.isRequired;return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({id:t,className:m()("form-input",r,{"not-empty":o}),value:Array.isArray(o)?o[0]:o},p)),n&&c.a.createElement("label",{className:"form-label",htmlFor:t},n," ",!b&&" (".concat(_r.t("label.optional"),")")),d&&c.a.createElement("span",{className:"form-text help-text"},f))},Dr=c.a.forwardRef((function(e,t){var n=e.className,r=e.label,a=e.id,o=e.validations,i=void 0===o?{}:o,s=e.data,u=void 0===s?{}:s,l=Ar(e,["className","label","id","validations","data"]),p=i.isRequired,f=u.helpText,d=u.isHelpTextEnabled;return c.a.createElement(c.a.Fragment,null,c.a.createElement("textarea",Object.assign({id:a,ref:t,className:m()("form-input textarea",n,{"not-empty":l.value})},l)),r&&c.a.createElement("label",{className:"form-label",htmlFor:a},r," ",!p&&" (".concat(_r.t("label.optional"),")")),d&&c.a.createElement("span",{className:"form-text help-text"},f))}));Dr.displayName="TextArea";var Fr=Dr,Mr=function(e){e.className;var t=e.name,n=e.label,r=e.data,a=void 0===r?{}:r,o=e.value,i=e.validations,s=void 0===i?{}:i,u=Ar(e,["className","name","label","data","value","validations"]),l=a.options,p=a.helpText,f=a.isHelpTextEnabled,d=s.isRequired;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:m()("form-label select",{"mb-0":f})},n," ",!d&&" (".concat(_r.t("label.optional"),")")),c.a.createElement("select",Object.assign({className:"form-input select",name:t},u,{value:Array.isArray(o)?o[0]:o}),c.a.createElement("option",{value:""},"Choose Option"),l.map((function(e){var t=e._id,n=e.text;return c.a.createElement("option",{key:t,value:t},n)}))),f&&c.a.createElement("span",{className:"form-text help-text"},p))},Lr=function(e){var t=e.className,n=e.buttonText,r=e.children,o=Ar(e,["className","buttonText","children"]),i=Object(a.useContext)(f).theme;return c.a.createElement("div",Object.assign({className:m()("form-footer",t)},o),r&&r,!r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"button button-primary",type:"submit",style:i},n),c.a.createElement(ur,null)))},Vr={text:Pr,email:Pr,phone:function(e){var t=e.id,n=e.label,r=e.className,a=e.value,o=void 0===a?"":a,i=e.validations,s=void 0===i?{}:i,u=Ar(e,["id","label","className","value","validations"]),l=s.isRequired;return c.a.createElement(c.a.Fragment,null,c.a.createElement(nr.a,Object.assign({id:t,value:o,className:m()("form-input",r,{"not-empty":o})},u)),n&&c.a.createElement("label",{className:"form-label",htmlFor:t},n," ",!l&&" (".concat(_r.t("label.optional"),")")))},textarea:Fr,checkbox:function(e){var t=e.className,n=e.name,r=e.label,a=e.data,o=void 0===a?{}:a,i=e.value,s=e.validations,u=void 0===s?{}:s,l=Ar(e,["className","name","label","data","value","validations"]),p=o.options,f=o.helpText,d=o.isHelpTextEnabled,b=u.isRequired;return c.a.createElement(c.a.Fragment,null,r&&c.a.createElement("label",{className:m()("form-label checkbox",{"mb-0":d})},r," ",!b&&" (".concat(_r.t("label.optional"),")")),d&&c.a.createElement("span",{className:"form-text help-text"},f),p.map((function(e){return c.a.createElement("label",{key:e._id,className:"form-label checkbox"},c.a.createElement("input",Object.assign({type:"checkbox",className:m()("form-input checkbox",t)},l,{name:n,value:e._id,checked:i.includes(e._id)})),e.text)})))},select:Mr,department:xr,visitorConsent:function(e){var t=e.className,n=e.name,r=e.label,a=e.data,o=void 0===a?{}:a,i=Ar(e,["className","name","label","data"]),s=o.options;return c.a.createElement(c.a.Fragment,null,r&&c.a.createElement("label",{className:"form-label checkbox"},r),s.map((function(e){return c.a.createElement("label",{key:e._id,className:"form-label checkbox"},c.a.createElement("input",Object.assign({className:m()("form-input checkbox",t)},i,{name:n,value:e._id,type:"checkbox"})),e.text)})))},dropdown:Mr,radio:function(e){e.className;var t=e.name,n=e.label,r=e.data,a=void 0===r?{}:r,o=e.validations,i=void 0===o?{}:o,s=Ar(e,["className","name","label","data","validations"]),u=a.options,l=a.isHelpTextEnabled,p=a.helpText,f=i.isRequired;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:m()("form-label radio",{"mb-0":l})},n," ",!f&&" (".concat(_r.t("label.optional"),")")),l&&c.a.createElement("span",{className:"form-text help-text"},p),u.map((function(e){var n=e.id,r=e._id,a=e.text,o=e.isSelectedByDefault,i=n||r;return c.a.createElement(c.a.Fragment,{key:i},c.a.createElement("input",Object.assign({className:"form-input radio",type:"radio",name:t},s,{value:i,defaultChecked:o})),a,c.a.createElement("br",null))})))}},Hr=function(e,t,n,r){return{handleChange:function(a){var c,o=a.event,i=a.id,s=a.validations,l=a.origin,p=a.type,m=a.field,f=a.previousValue;if(n&&r(!1),"phone"===p)c=o||"";else if("checkbox"===o.target.type&&"visitorConsent"===i)c=o.target.checked;else if("checkbox"===o.target.type&&"custom"===l){var d=o.target.value,b=o.target.checked,g=f||[];if(c=Object.values(g),!b&&c.includes(d)){var O=c.indexOf(d);c.splice(O,1)}else c.push(d)}else c=Object(u.includes)(["dropdown","select","radio","text","textarea"],p)&&"custom"===l?o.target.value?[o.target.value]:[]:o.target.value;e(Sr({},i,c));var h=s.isRequired,v=Gr({origin:l,value:c,id:i,type:p,field:m});"TEXT_EMPTY"!==v.type||h?t(Sr({},i,v)):t(Sr({},i,{}))}}},Br=function(e){var t=e.formFields,n=e.storeData,r=e.errorUpdateFn,a=e.submitFormFn;t.forEach((function(e){var t=e.fieldId,a=e.validations,c=e.type,o=e.origin,i=a.isRequired,s=n[t];if(i){var u=Gr({origin:o,value:s,id:t,type:c,field:e});r(Sr({},t,u))}else s||r(Sr({},t,{}))})),a()},Gr=function(e){var t,n=e.origin,r=e.value,a=e.id,c=e.type,o=e.field;if("custom"===n){if(!(t=sr[c](o,r)).isValid){var i=t.errors,s=Object(u.get)(i,"0.type"),p=Object(u.get)(i,"0.message"),m=Object(u.get)(i,"0.i18nKey");Object.assign(t,{type:s,errorMessage:p,i18nKey:m})}}else t=ir[a](r);if(t.i18nKey)if("CHECKBOX_MIN_OPTIONS"===t.type){var f=l.a.get(o,"validations.noOfOptionsAllowed.min");t.errorMessage=_r.t(t.i18nKey,{count:f})}else if("CHECKBOX_MAX_OPTIONS"===t.type){var d=l.a.get(o,"validations.noOfOptionsAllowed.max");t.errorMessage=_r.t(t.i18nKey,{count:d})}else"TEXT_LENGTH_ERROR"===t.type?t.errorMessage=_r.t(t.i18nKey,{count:50}):t.errorMessage=_r.t(t.i18nKey);return t};function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wr=Object(s.b)(null,(function(e){return{onSendReply:function(t){var n=t.text;e({type:Zn,payload:{text:n}})}}}))((function(e){var t=e.onSendReply,n=Object(a.useContext)(f).i18n,r=Ur(Object(a.useState)(""),2),o=r[0],i=r[1],s=function(e){var n=l.a.trim(e);n&&(t({text:n}),i(""))};return c.a.createElement(w,{className:"badge-triggered",disableAnimation:!0},c.a.createElement("div",{className:"triggeredchat-wrapper"},c.a.createElement(tr,null),c.a.createElement(Cr,{className:"reply-area-wrapper"},c.a.createElement("div",{className:"reply-area"},c.a.createElement(Fr,{value:o,onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),s(o))},onChange:function(e){return i(e.target.value)},placeholder:n.t("label.triggeredChatReplyAreaPlaceholder"),autoFocus:!0})),c.a.createElement("div",{className:"send-icon",role:"button",onClick:function(){return s(o)}},c.a.createElement(v,{name:"send-web",title:"Send"})))))})),qr="SEND_PROACTIVE_CHAT_REPLY",zr="PROACTIVE_CHAT_SATISFIED",Kr="DISMISS_PROACTIVE_CHAT",Jr="HIDE_PROACTIVE_CHAT_BADGE",Xr="VISITOR_ENGAGED",Yr="PROACTIVE_MESSAGE_READ",Qr=function(e){return{type:Xr,payload:l.a.pick(e,["agent","message_id","timestamp","text"])}},Zr=function(){return{type:zr}},$r=function(e){return{type:Kr,payload:l.a.pick(e,["engagedMessageIds"])}},ea=function(e){return{type:"ADD_PROACTIVE_TEMP_CHAT_ID",payload:e}},ta=c.a.memo((function(){var e=Object(a.useContext)(f).theme,t=Object(s.d)(yt),n=Object(s.d)(Bt),r=Object(s.d)(Ht),o=Object(s.c)(),i=Object(a.useCallback)((function(){o({type:Jr})}),[o]),u=l.a.get(l.a.last(t),"text","");return c.a.createElement("div",{className:"titlebar",style:e},c.a.createElement("div",{className:"profile-pics"},n&&c.a.createElement(T,{imgSrc:n,title:r}),!n&&c.a.createElement(I,{icon:"chat-bubble"})),c.a.createElement("div",{className:"sub-title"},u),c.a.createElement("div",{className:"titlebar-action-container"},c.a.createElement("div",{className:"icon"},c.a.createElement(v,{name:"close",title:"Close",onClick:i}))))}));function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ra=Object(s.b)(null,(function(e){return{onSendReply:function(t){var n=t.text;e({type:qr,payload:{text:n}})}}}))((function(e){var t=e.onSendReply,n=Object(a.useContext)(f).i18n,r=na(Object(a.useState)(""),2),o=r[0],i=r[1];return c.a.createElement(w,{className:"badge-proactive",disableAnimation:!0},c.a.createElement("div",{className:"proactivechat-wrapper"},c.a.createElement(ta,null),c.a.createElement(Cr,{className:"reply-area-wrapper"},c.a.createElement("div",{className:"reply-area"},c.a.createElement(Fr,{value:o,onKeyDown:function(e){if(13===e.keyCode&&!1===e.shiftKey){e.preventDefault();var n=Object(u.trim)(o);if(!n)return;t({text:n}),i("")}},onChange:function(e){return i(e.target.value)},placeholder:n.t("label.triggeredChatReplyAreaPlaceholder"),autoFocus:!0})),c.a.createElement("div",{className:"send-icon",role:"button",onClick:function(){return t({text:o})}},c.a.createElement(v,{name:"send-web",title:"Send"})))))})),aa=function(e,t){return Object(u.get)(e,"department.departments['".concat(t,"']"))},ca=function(e,t){return Object(u.get)(aa(e,t),"departmentChatId_v2")},oa=function(e,t){return Object(u.get)(aa(e,t),"name")},ia=Object(kt.a)([function(e){return Object(u.get)(e,"department.departments")}],(function(e){return l.a.find(e,{isDefault:!0})})),sa=Object(kt.a)([ia],(function(e){return Object(u.get)(e,"departmentChatId_v2","")})),ua=Object(kt.a)([Or,mr,function(e){return Object(u.get)(e,"widget.prechat.department.enabled",!1)},Le,lr,Dn,pr],(function(e,t,n,r,a,c,o){if(r===ge.CHATTING)return!0;if(!a)return!1;return!(!c||!o)||(n?e:t)})),la=function(e){var t=qn(e);if(l.a.isEmpty(t))return!1;var n=l.a.get(t,"deptChatId");return gr(e,n)},pa=function(e){var t="offline",n=zn(e),r=Gt(e),a=la(e);return(ua(e)||a)&&(t=r?"proactiveChat":n?"triggeredChat":"online"),t},ma=Object(s.b)((function(e){return{typeOfBadge:pa(e)}}))((function(e){var t=e.typeOfBadge;return c.a.createElement(c.a.Fragment,null,"online"===t&&c.a.createElement(Vn,null),"offline"===t&&c.a.createElement(Hn,null),"triggeredChat"===t&&c.a.createElement(Wr,null),"proactiveChat"===t&&c.a.createElement(ra,null))})),fa=n("MEJg");function da(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ba=function(){return c.a.createElement("div",{className:"connecting-banner"},"Connecting...")},ga=function(e){var t=e.className,n=da(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("chatbox",t)},n))},Oa=function(e){return Object(u.get)(e,"attachments.showProgressBar",!1)},ha=function(e){return Object(u.get)(e,"attachments.uploadPercent",0)},va=function(e){return Object(u.get)(e,"attachments.uploadedFileCount",0)},xa=function(e){return Object(u.get)(e,"attachments.totalFileCount",0)},ja=function(e){return Object(u.get)(e,"attachments.uploadCancelled",!1)},ya=function(e){return Object(u.get)(e,"attachments.uploadFailed",!1)},Ea="UPLOAD_FAILURE",wa="CANCEL_UPLOAD",Ia="ATTACHMENTS/PROCESS_SELECTED_FILES",Ta=["audio","video","file","image"],Ra=function(e){return{type:"UPLOAD_START",fileCount:e}},ka=function(){return{type:"UPLOAD_COMPLETE"}},_a=function(){return{type:"UPLOAD_CANCELLED"}},Sa=function(){return{type:Ea}},Aa=function(){return{type:"UPLOAD_FAILED"}},Ca=function(e){return{type:"UPDATE_FILE_UPLOAD_PERCENT",data:e}},Na=function(){return{type:"UPLOAD_FILE_SUCCESS"}},Pa=function(e){return{type:"SET_FILE_VALIDATION_ERRORS",errors:e}},Da=function(){return{type:"RESET_FILE_UPLOAD"}},Fa=function(){return{type:"HIDE_ATTACHMENT_STATUS_BAR"}},Ma=Object(s.b)((function(e){return{fileUploadPercent:ha(e),uploadedFileCount:va(e),totalFileCount:xa(e),uploadCancelled:ja(e),uploadFailed:ya(e)}}),(function(e){return{cancelUpload:function(){return e({type:wa})}}}))((function(e){var t=e.fileUploadPercent,n=e.uploadedFileCount,r=e.totalFileCount,o=e.uploadFailed,i=e.uploadCancelled,s=e.cancelUpload,u=Object(a.useContext)(f).i18n,l=u.t("attachmentLabel.uploading");return r>1&&(l="\n      ".concat(u.t("attachmentLabel.uploading")," \n      ").concat(n," \n      ").concat(u.t("attachmentLabel.of")," \n      ").concat(r,"\n      ").concat(u.t("attachmentLabel.file_plural"),"\n      ")),l+="...",c.a.createElement("div",{className:"progress-bar"},!i&&!o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"progress-completed",style:{width:t+"%"}}),c.a.createElement("div",{className:"progress-status"},l),c.a.createElement("div",{onClick:s,className:"progress-cancel"})),(o||i)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"progress-status"},c.a.createElement(v,{width:"18",height:"18",name:"exclamation",title:u.t("attachmentLabel.uploadCancelled")}),c.a.createElement("span",{className:"status-text"},o&&u.t("attachmentLabel.failedToUpload"),i&&u.t("attachmentLabel.uploadCancelled")))))})),La=function(e,t){return!!e&&!(e&&!t)},Va=function(e,t,n){var r=t.indexOf(e),a=n[e];if(0===r)return!0;var c=n[t[r-1]];return a.by!==c.by},Ha="CONV_FORM/SHOW_CONVERSATION_FORM",Ba="CONV_FORM/ADD_CHAT",Ga="CONV_FORM/SEND_VISITOR_MESSAGE",Ua="CONV_FORM/END_CHAT",Wa="CONV_FORM/END_CHAT_SUCCESS",qa="CONV_FORM/DO_END_CHAT_PROCESS",za="CONV_FORM/CHAT_AGAIN",Ka="CONV_FORM/SEND_VISITOR_ATTACHMENT",Ja="CONV_FORM/SEND_IS_TYPING",Xa="CONV_FORM/MESSAGE_READ",Ya=function(){return{type:Ha}},Qa=function(e){return{type:"CONV_FORM/ADD_VISITOR_MESSAGE",text:e.text,tempMessageId:e.tempMessageId,chatId:e.chatId,replyFor:e.replyFor,messageType:e.messageType}},Za=function(e){return{type:Ga,payload:l.a.pick(e,["text","messageId","replyFor","messageType"])}},$a=function(e){return{type:"CONV_FORM/ADD_VISITOR_ATTACHMENT",attachment:e.attachment,tempMessageId:e.tempMessageId,chatId:e.chatId,messageType:e.messageType}},ec=function(e){var t=e.file,n=e.tempMessageId;return{type:Ka,attachment:t,tempMessageId:n}},tc=function(){return{type:Ua}},nc=function(e){return{type:Wa,payload:l.a.defaults(e,{silent:!1})}},rc=function(){return{type:"CONV_FORM/SHOW_CHAT_AGAIN_BANNER"}},ac=function(e){return{type:"CONV_FORM/ADD_DUMMY_CHAT",tempChatId:e.tempChatId}},cc=function(e){return{type:Ba,payload:l.a.pick(e,["id","departmentId","messages","messageIds","lastVisitorMessageId","lastTranslatedAgentMessageId","lastTranslatedVisitorMessageId","lastAgentMessageId","isTranslating","showAgentTranslatedText","showVisitorTranslatedText","googleTranslationLogoShownOnce"])}},oc=function(){return{type:"CONV_FORM/SHOW_IS_TYPING"}},ic=function(){return{type:"CONV_FORM/REMOVE_IS_TYPING"}},sc=function(){return{type:qa}},uc=function(){return{type:"SHOW_DEFAULT_QUICK_REPLIES"}},lc=function(e){return{type:"CONV_FORM/MARK_SPECIAL_MESSAGES_REPLIED",payload:{chatId:e.chatId}}},pc=function(e){return Object(u.get)(e,"features.botEnabled",!1)},mc=Object(s.b)((function(e){var t=Le(e),n=t===ge.CHATTING||t===ge.WAITING,r=on(e),a=At(e),c=Ct(e),o=Et(e),i=pc(e);return o&&(a=Bt(e),c=Ht(e)),{canShowCloseIcon:n,isMediumSizedWidget:jn(e),showAgentPicture:St(e),profilePictureUrl:a,agentName:c,currentForm:r,isEngagedWithProactiveChat:o,isBotEnabled:i}}),(function(e){return{onMinimizeClick:function(){e(z())},onEndChatClick:function(){e({type:"CONV_FORM/OPEN_CONFIRM_END_CHAT_MODAL"})}}}))((function(e){var t=e.title,n=e.subTitle,r=e.onMinimizeClick,o=e.onEndChatClick,i=e.canShowCloseIcon,s=e.isMediumSizedWidget,u=e.showAgentPicture,l=e.profilePictureUrl,p=e.agentName,m=e.currentForm,d=e.isEngagedWithProactiveChat,b=e.isBotEnabled,g=Object(a.useContext)(f),O=g.theme,h=g.i18n,j=Object(a.useMemo)((function(){return La(u,l)}),[u,l]);return c.a.createElement("div",{className:"titlebar",style:O},(s||x)&&c.a.createElement("div",{className:"profile-pics"},!j&&c.a.createElement(I,{icon:"chat-bubble"}),j&&c.a.createElement(T,{imgSrc:l,title:p||""})),c.a.createElement("div",{className:"title-text-wrapper"},(d||b)&&c.a.createElement(c.a.Fragment,null,p&&c.a.createElement("div",{className:"title"},p),!p&&c.a.createElement("div",{className:"title"},"Agent")),!d&&!b&&c.a.createElement("div",{className:"title"},t),"conversation"!==m&&c.a.createElement("div",{className:"sub-title"},n)),c.a.createElement("div",{className:"titlebar-action-container"},c.a.createElement("div",{className:"icon",onClick:r,role:"button"},c.a.createElement(v,{name:"minimize",title:h.t("label.minimize")})),i&&c.a.createElement("div",{className:"icon",onClick:o},c.a.createElement(v,{name:"close",title:h.t("label.endChat")}))))})),fc=Object(s.b)((function(e){return{title:Object(u.get)(e,"widget.text.offlineBadge",""),subTitle:Object(u.get)(e,"widget.text.offlineWelcomeText","")}}))((function(e){return c.a.createElement(mc,e)})),dc=c.a.memo((function(){var e=Object(s.d)(An),t=Object(s.d)(Cn);return c.a.createElement(mc,{title:e,subTitle:t})})),bc=c.a.memo((function(){var e=Object(s.d)(An);return c.a.createElement(mc,{title:e})})),gc={CONVERSATION:"conversation",PRECHAT:"prechat",INPROGRESS_CHAT:"inprogresschat",OFFLINE:"offline"},Oc=Object(s.b)((function(e){return{currentForm:on(e)}}))((function(e){var t=e.currentForm,n=l.a.includes([gc.CONVERSATION,gc.INPROGRESS_CHAT],t);return c.a.createElement(c.a.Fragment,null,t===gc.OFFLINE&&c.a.createElement(fc,null),t===gc.PRECHAT&&c.a.createElement(dc,null),n&&c.a.createElement(bc,null))})),hc="OFFLINE_FORM/SUBMIT_OFFLINE_FORM",vc="OFFLINE_FORM/LOAD_AND_SHOW_OFFLINE_FORM",xc="OFFLINE_FORM/SUBMIT_OFFLINE_FORM_SUCCESS",jc=function(){return{type:"OFFLINE_FORM/CLOSE_OFFLINE_FORM_RESPONSE_MODAL"}},yc=function(){return{type:xc}},Ec=function(e){return{type:vc,payload:e}},wc=function(e){var t=e.formData,n=e.handleChange,r=e.handleSubmit,a=e.preChatFormFields,o=e.preChatErrors,i=e.visitorCountry,s=e.fromFooterButtonText;return c.a.createElement(Cr,{className:"content-main prechat-form",onSubmit:r},c.a.createElement("div",{className:"form-content"},a.map((function(e){var r=Vr[e.type],a=e.fieldId,s=e.label,u=e.validations,l=e.type,p=e.origin,m=u.isRequired,f=t[a],d={id:a,name:a,label:s,type:l,value:f,validations:u,data:e};"phone"===l&&(d.country=i),"textarea"===l&&(d.rows=5);var b=t[a];return d.onChange=function(t){return n({event:t,id:a,validations:u,origin:p,type:l,field:e,previousValue:b})},c.a.createElement(Nr,{key:a,id:"__anchor-".concat(a),error:o[a],required:m},c.a.createElement(r,d))}))),c.a.createElement(Lr,{buttonText:s}))};function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rc=function(e){return Object(u.get)(e,"forms.prechat.fields",[])},kc=function(e){return Object(u.get)(e,"forms.prechat.keyStrokeData",{})},_c=function(e){return Object(u.get)(e,"forms.prechat.errors")},Sc=function(e){return Object(u.get)(e,"widget.text.offlineSendMessageButton")},Ac=function(e){return Object(u.get)(e,"forms.offline.fields",[])},Cc=function(e){return Object(u.get)(e,"forms.offline.keyStrokeData")},Nc=function(e){return Object(u.get)(e,"forms.offline.errors")},Pc=function(e){return Object(u.get)(e,"forms.editVisitorInfo.fields")},Dc=function(e){return Object(u.get)(e,"forms.editVisitorInfo.keyStrokeData")},Fc=function(e){return Object(u.get)(e,"forms.editVisitorInfo.errors")},Mc=Object(kt.a)([kc],(function(e){return Object(u.pickBy)(e,(function(e,t){return"PCF"!==t.split("-")[0]}))})),Lc=Object(kt.a)([kc],(function(e){return Object(u.pickBy)(e,(function(e,t){return"PCF"===t.split("-")[0]}))})),Vc=Object(kt.a)([Ve,function(e){return Object(u.get)(e,"forms.customPrechatFields",[])}],(function(e,t){var n=!0,r=Object.keys(e);return t.forEach((function(e){var t=e.fieldId,a=e.validations.isRequired;!r.includes(t)&&a&&(n=!1)})),n})),Hc=Object(kt.a)([We,Ve],(function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(n,!0).forEach((function(t){Tc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t);return Object(u.pickBy)(n,u.identity)})),Bc=function(e){return Object(u.get)(e,"forms.prechat.messageId",null)};function Gc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qc=Object(s.b)((function(e){return{offlineSendMessageButtonText:Sc(e),offlineFormFields:Ac(e),offlineKeyStrokeData:Cc(e),offlineErrors:Nc(e),visitorCountry:ze(e)}}),(function(e){return{submitOfflineFormClick:function(){return e({type:hc})},onFormDataUpdate:function(t){return e({type:"OFFLINE_FORM/UPDATE_OFFLINE_FORM_DATA",payload:t})},onErrorUpdate:function(t){return e({type:"OFFLINE_FORM/UPDATE_OFFLINE_FORM_ERROR_DATA",payload:t})}}}))((function(e){var t=e.offlineFormFields,n=e.offlineKeyStrokeData,r=e.offlineErrors,o=e.offlineSendMessageButtonText,i=e.onFormDataUpdate,s=e.onErrorUpdate,u=e.submitOfflineFormClick,l=e.visitorCountry,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(n,!0).forEach((function(t){Wc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.useMemo)((function(){return or(t)}),[t]),{},n),m=Gc(Object(a.useState)(!1),2),f=m[0],d=m[1],b=Hr(i,s,f,d).handleChange;if(f)for(var g in r)if(!1===r[g].isValid){document.getElementById("__anchor-".concat(g)).scrollIntoView({behavior:"smooth"});break}return c.a.createElement(cr.Provider,{value:!0},c.a.createElement(wc,{formData:p,handleChange:b,handleSubmit:function(e){e.preventDefault(),Br({formFields:t,storeData:p,errorUpdateFn:s,submitFormFn:u}),d(!0)},preChatFormFields:t,preChatErrors:r,visitorCountry:l,fromFooterButtonText:o}))})),zc="PRECHAT_FORM/SUBMIT_PRECHAT_FORM",Kc="PRECHAT_FORM/LOAD_AND_SHOW_PRECHAT_FORM",Jc="PRECHAT_FORM/SUBMIT_INPROGRESS_FORM",Xc=function(e){return{type:"PRECHAT_FORM/UPDATE_DATE",payload:e}},Yc=function(e){return{type:"PRECHAT_FORM/UPDATE_PRECHAT_FORM_ERROR_DATA",payload:e}},Qc=function(e){return{type:"PRECHAT_FORM/SAVE_PRECHAT_MESSAGEID",payload:e}};function Zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var to=Object(s.b)((function(e){var t=kc(e),n=t.department,r=hr(e,n).isAvailable;return{preChatFormFields:Rc(e),preChatKeyStrokeData:t,preChatErrors:_c(e),visitorCountry:ze(e),startButtonText:Nn(e),offlieButtonText:Sc(e),isSelectedDepartmentAvailable:r}}),(function(e){return{onSubmitClick:function(){return e({type:zc})},onFormDataUpdate:function(t){return e(Xc(t))},onErrorUpdate:function(t){return e(Yc(t))}}}))((function(e){var t=e.preChatFormFields,n=e.preChatKeyStrokeData,r=e.preChatErrors,o=e.onFormDataUpdate,i=e.onErrorUpdate,s=e.onSubmitClick,u=e.visitorCountry,l=e.startButtonText,p=e.offlieButtonText,m=e.isSelectedDepartmentAvailable,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$c(n,!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.useMemo)((function(){return or(t)}),[t]),{},n),d=Zc(Object(a.useState)(!1),2),b=d[0],g=d[1],O=Zc(Object(a.useState)(!m),2),h=O[0],v=O[1],x=Hr(o,i,b,g).handleChange;if(Object(a.useEffect)((function(){v(!m)}),[m]),b)for(var j in r)if(!1===r[j].isValid){document.getElementById("__anchor-".concat(j)).scrollIntoView({behavior:"smooth"});break}var y=h?p:l;return c.a.createElement(cr.Provider,{value:!0},c.a.createElement(wc,{formData:f,handleChange:x,handleSubmit:function(e){e.preventDefault(),Br({formFields:t,storeData:f,errorUpdateFn:i,submitFormFn:s}),g(!0)},preChatFormFields:t,preChatErrors:r,visitorCountry:u,fromFooterButtonText:y}))}));function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var co=Object(s.b)((function(e){var t=kc(e);return{inprogressPreChatFormFields:Rc(e),inprogressPreChatKeyStrokeData:t,inprogressPreChatErrors:_c(e),visitorCountry:ze(e)}}),(function(e){return{onSubmitClick:function(t){return e((n={messageId:t},{type:Jc,payload:l.a.pick(n,["messageId"])}));var n},onFormDataUpdate:function(t){return e(Xc(t))},onErrorUpdate:function(t){return e(Yc(t))}}}))((function(e){var t=e.inprogressPreChatFormFields,n=e.inprogressPreChatKeyStrokeData,r=e.inprogressPreChatErrors,o=e.onFormDataUpdate,i=e.onErrorUpdate,s=e.onSubmitClick,u=e.visitorCountry,l=e.submitButtonText,p=e.messageId,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(n,!0).forEach((function(t){ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.useMemo)((function(){return or(t)}),[t]),{},n),f=no(Object(a.useState)(!1),2),d=f[0],b=f[1],g=Hr(o,i,d,b).handleChange,O=function(){s(p)};if(d)for(var h in r)if(!1===r[h].isValid){document.getElementById("__anchor-".concat(h)).scrollIntoView({behavior:"smooth"});break}return c.a.createElement(cr.Provider,{value:!0},c.a.createElement(wc,{formData:m,handleChange:g,handleSubmit:function(e){e.preventDefault(),Br({formFields:t,storeData:m,errorUpdateFn:i,submitFormFn:O}),b(!0)},preChatFormFields:t,preChatErrors:r,visitorCountry:u,fromFooterButtonText:l}))})),oo=Object(s.b)((function(e){return{currentForm:on(e),prechatMessageId:Bc(e)}}))((function(e){var t=e.currentForm,n=e.prechatMessageId;return c.a.createElement(c.a.Fragment,null,t===gc.OFFLINE&&c.a.createElement(qc,null),t===gc.INPROGRESS_CHAT&&c.a.createElement(co,{submitButtonText:"Submit",messageId:n}),t===gc.PRECHAT&&c.a.createElement(to,null))}));function io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var so=function(e,t,n,r){var c=io(Object(a.useState)(!0),2),o=c[0],i=c[1],s=t.messageIds,u=t.messages,p=Object(a.useCallback)((function(){var t=e.current,n=t.scrollHeight-t.clientHeight;t.scrollTop=n>0?n:0}),[e]);Object(a.useEffect)((function(){var t=function(){var t=e.current,n=t.scrollHeight,r=t.clientHeight,a=t.scrollTop;i(!!(n-a<=r+120))};return e.current.addEventListener("scroll",t),function(){return e.current.removeEventListener("scroll",t)}}),[e]);var m=Object(a.useCallback)((function(){var e=l.a.last(s);return l.a.get(u,"".concat(e),{})}),[s,u]);return Object(a.useEffect)((function(){var t=e.current;if(t.scrollHeight>t.clientHeight){var a=m();if("visitor"===a.by||a.isBot)p();else{if(!n&&r)return;o&&p()}}}),[e,m,s,p,r]),{scrollToBottom:p}},uo=n("k6Wu"),lo=n("d/FD"),po=n.n(lo);function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var bo=function(e){var t=e.className,n=fo(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("content-main conversation-wrapper",t)},n))},go=c.a.forwardRef((function(e,t){var n=e.className,r=fo(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("chat-container",n)},r,{ref:t}))})),Oo=function(e){var t=e.className,n=fo(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("conversation-footer",t)},n))},ho=c.a.forwardRef((function(e,t){var n=e.className,r=fo(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("quote",n)},r,{ref:t}))})),vo=function(e){var t=e.className,n=e.text,r=fo(e,["className","text"]);return c.a.createElement("div",Object.assign({className:m()("system-message",t)},r),n)},xo=function(e){var t=e.className,n=e.message,r=e.googleBadgeShownOnce,o=e.setGoogleBadgeShownOnce,i=fo(e,["className","message","googleBadgeShownOnce","setGoogleBadgeShownOnce"]),s=mo(Object(a.useState)(!r),1)[0];return Object(a.useEffect)((function(){r||o(!0)}),[r,o]),c.a.createElement("div",Object.assign({className:m()("vendor-message",t)},i),function(){switch(n.type){case"google":return s?c.a.createElement("img",{src:po.a,alt:n.text,className:"translated-by-google"}):null;default:return null}}())},jo=c.a.forwardRef((function(e,t){var n=e.className,r=e.attachment,a=fo(e,["className","attachment"]);return c.a.createElement("div",Object.assign({className:m()("quote quote-attachment",n)},a,{ref:t}),c.a.createElement("div",{className:"attachment-thumbnail"},c.a.createElement("img",{className:"attachment-preview",src:uo.getPreviewImage_v2(r)})),c.a.createElement("div",{className:"attachment-desc"},c.a.createElement("a",{className:"attachment-link",href:r.url,target:"_blank",download:!0},r.name),c.a.createElement("div",null,uo.formatBytes(r.size))))})),yo=function(e){var t=e.className,n=fo(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("quote-loader",t)},n),c.a.createElement("div",{className:"bubble bounce1"}),c.a.createElement("div",{className:"bubble bounce2"}),c.a.createElement("div",{className:"bubble bounce3"}))},Eo=function(e){var t=e.className,n=e.value,r=fo(e,["className","value"]);return c.a.createElement("div",Object.assign({className:m()("quote-timestamp",t)},r),n)},wo=function(e){var t=e.className,n=e.value,r=fo(e,["className","value"]);return c.a.createElement("div",Object.assign({className:m()("quote-failed",t)},r),n)},Io="PRE_OPEN_EDIT_VISITOR_INFO_POPUP",To="SUBMIT_EDIT_VISITOR_INFO_FORM",Ro=function(){return{type:Io}},ko=function(){return{type:"OPEN_EDIT_VISITOR_INFO_POPUP"}},_o=function(){return{type:"CLOSE_EDIT_VISITOR_INFO_POPUP"}},So=function(e){return{type:"UPDATE_EDIT_VISITOR_INFO_FORM_DATA",payload:e}},Ao=function(){return{type:"CLEAR_EDIT_VISITOR_INFO_FORM_DATA"}},Co="SEND_EMAIL_TRANSCRIPT",No="SEND_EMAIL_TRANSCRIPT_SUCCESS",Po={SENDING:"sending",SENT:"sent",FAILED:"failed"},Do=function(){return{type:"HIDE_EMAIL_TRANSCRIPT_MODAL"}},Fo=function(){return{type:No}},Mo=function(e){return{type:"SET_EMAIL_TRANSCRIPT_STATE",payload:e}},Lo=c.a.memo((function(){var e=Object(a.useContext)(f).i18n,t=Object(s.c)(),n=Object(s.d)(Be),r=Object(s.d)(Le),o=l.a.includes([ge.CHATTING,ge.WAITING],r),i=Object(a.useCallback)((function(){return t({type:"ATTACHMENTS/SHOW_FILE_UPLOAD"})}),[t]),u=Object(a.useCallback)((function(){return t(Ro())}),[t]),p=Object(a.useCallback)((function(){return t({type:"SHOW_EMAIL_TRANSCRIPT_MODAL"})}),[t]),m=Object(a.useCallback)((function(){return t({type:de})}),[t]),d=Object(a.useCallback)((function(){return t({type:be})}),[t]);return c.a.createElement("div",{className:"convertsation-toolbar"},c.a.createElement("div",{className:"toolbar-icon",onClick:i},c.a.createElement(v,{name:"attachment",title:"Add Attachment"})),c.a.createElement("div",{className:"toolbar-icon",onClick:u},c.a.createElement(v,{name:"user-profile",title:"Edit Your Info"})),o&&c.a.createElement("div",{className:"toolbar-icon",onClick:p},c.a.createElement(v,{name:"email",title:e.t("label.emailChat")})),!n&&c.a.createElement("div",{className:"toolbar-icon",onClick:m},c.a.createElement(v,{name:"mute",title:e.t("label.turnOffSound")})),n&&c.a.createElement("div",{className:"toolbar-icon",onClick:d},c.a.createElement(v,{name:"unmute",title:e.t("label.turnOnSound")})))})),Vo=function(e){var t,n=l.a.get(e,"visitor.currentChatId"),r=l.a.get(e,"chats",[]);return n?t=l.a.find(r,{id:n}):r.length&&(t=r[r.length-1]),t},Ho=function(e){return l.a.get(e,"chats",[])},Bo=function(e){return l.a.get(Vo(e),"departmentId")},Go=function(e){return Object(u.get)(e,"conversationForm.viewReplyText","")},Uo=function(e){return Object(u.get)(e,"conversationForm.isTyping")},Wo=function(e){return Object(u.get)(e,"conversationForm.canShowDefaultQuickReplies",!1)},qo=Object(kt.a)([Ho],(function(e){var t={};l.a.forEach(e,(function(e){Object.assign(t,e.messages)}));var n=l.a.map(e,"messageIds"),r=l.a.flatten(n,(function(e){return e}));return{messages:t,messageIds:r}})),zo=function(e){return Object(u.get)(e,"view.isEndChatConfirmationOpen",!1)},Ko=function(e){return Object(u.get)(e,"view.isChatAgainBannerShown",!1)},Jo=function(e){return Object(u.get)(e,"view.isRatingsFromOpen",!1)},Xo=function(e){return Object(u.get)(e,"view.showOfflineFormSubmitResponseModal")},Yo=function(e){return Object(u.get)(e,"view.showEditVisitorInfoPopup",!1)},Qo=function(e){return Object(u.get)(e,"view.showEmailSubscriptionForm",!1)},Zo=function(e){return Object(u.get)(e,"view.showFileUpload",!1)},$o=function(e){return Object(u.get)(e,"view.showVisitorInfoRequestConfirmation",!1)},ei=function(e){return Object(u.get)(e,"view.showEmailTranscript",!1)},ti=function(e){return Object(u.get)(e,"view.submitRatingsSuccess",!1)};function ni(e){return c.a.createElement("div",{className:"thinking-bubble"},c.a.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 73 57",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("title",null,"Thinking bubble"),c.a.createElement("defs",null),c.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.a.createElement("g",{id:"Thinking-Bubble",transform:"translate(-35.000000, -238.000000)"},c.a.createElement("g",{id:"Thinking-bubble",transform:"translate(20.000000, 4.000000)"},c.a.createElement("g",{transform:"translate(15.000000, 234.000000)"},c.a.createElement("g",{id:"noun_876103_cc",fill:"#ccc",fillRule:"nonzero"},c.a.createElement("path",{d:"M70.3236429,35.2430983 C68.4925297,38.4867671 65.8184105,41.4956651 62.600162,43.9399954 C59.2754534,46.4154689 55.6069183,48.2744695 51.6537011,49.4770705 C47.5254161,50.900867 42.7875488,51.65389 37.9518958,51.65389 C33.2644984,51.65389 28.6133762,50.9192334 24.0813317,49.4555099 C23.2619834,49.2303217 22.4860078,48.9396532 21.6650824,48.6314168 L20.9537714,48.3663016 C20.8244421,48.3183892 20.6911699,48.2960301 20.5578977,48.2960301 C20.2093395,48.2960301 19.8702445,48.4557381 19.6454954,48.745608 C18.714167,49.9498061 17.2962766,50.640543 15.7553656,50.640543 C14.9896417,50.640543 14.2113003,50.4648642 13.5102411,50.1382615 C12.2358746,49.5321697 11.2824655,48.4804928 10.8242929,47.1756788 C10.3747949,45.8908282 10.4528656,44.4997718 11.045099,43.258841 C11.2682708,42.7900981 11.1610222,42.2287246 10.7809203,41.8781656 C8.81890066,40.0734657 7.15102624,37.9062286 5.69528336,35.2734428 C4.11888574,32.2773215 3.31925233,29.13906 3.31925233,25.949692 C3.31925233,22.7746977 4.13702338,19.5909195 5.68424306,16.7473192 C7.56267184,13.3311659 10.1287538,10.3725759 13.3201901,7.94661191 C16.4351329,5.53502167 19.9727616,3.6983801 24.0860632,2.34485512 C28.8089473,1.01927903 33.4742642,0.34770705 37.9518958,0.34770705 C42.595132,0.34770705 47.3479827,1.03604837 51.6702615,2.32888433 C55.9475905,3.73591148 59.5167629,5.57255305 62.5922761,7.95300023 C65.8893838,10.4596167 68.4893753,13.4182067 70.3149683,16.7433265 C71.8645538,19.5877253 72.683902,22.7723021 72.683902,25.949692 C72.6831135,29.1438512 71.88348,32.2805156 70.3236429,35.2430983 Z",id:"Shape"}),c.a.createElement("path",{d:"M4.55210189,57 C7.00489847,57 9,54.9574241 9,52.446691 C9,49.953594 7.04657998,48 4.55210189,48 C2.04239401,48 0,49.9944776 0,52.446691 C0.00080156751,54.9574241 2.04319558,57 4.55210189,57 Z",id:"Shape"})),c.a.createElement("svg",{viewBox:"-30 0 180 30",fill:"#808080"},c.a.createElement("circle",{cx:"15",cy:"15",r:"15"},c.a.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),c.a.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},c.a.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),c.a.createElement("circle",{cx:"105",cy:"15",r:"15"},c.a.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),c.a.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))))))))}ni.defaultProps={width:"50px",height:"50px"};var ri=ni;function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ci=function(e){var t=Object(s.d)(xn),n=ai(Object(a.useState)(!1),2),r=n[0],o=n[1],i=Object(a.useCallback)((function(){var e={};return l.a.isEmpty(t)||(e={color:"#".concat(t.pillColor),borderColor:"#".concat(t.pillBorderColor),backgroundColor:"#".concat(t.pillBgColor)},r&&(e={color:"#".concat(t.hoverPillColor),borderColor:"#".concat(t.hoverPillBorderColor),backgroundColor:"#".concat(t.hoverPillBgColor)})),e}),[r,t]);return c.a.createElement("div",{className:"quick-reply",style:i(),onClick:e.onClick,onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)}},e.quickReply.text)},oi=c.a.forwardRef((function(e,t){var n=e.quickReplies,r=void 0===n?[]:n,o=e.sendMessage,i=e.messageId,u=Object(s.c)(),l=Object(a.useCallback)((function(){return u({type:"HIDE_DEFAULT_QUICK_REPLIES"})}),[u]),p=Object(a.useCallback)((function(e){!i&&l(),o({text:e.text,replyFor:i})}),[l,i,o]);return c.a.createElement("div",{className:"quick-reply-container",ref:t},r.map((function(e,t){return c.a.createElement(ci,{key:t,onClick:function(){return p(e)},quickReply:e})})))}));oi.displayName="QuickReplyComponent";var ii=oi,si=n("k+Fz"),ui=n.n(si),li=function(e){var t=e.linkifyOptions,n=e.message,r=e.theme,a=e.showTranslatedMessage,o=e.getMessage;switch(n.type){case"text":return c.a.createElement(ho,{style:r},c.a.createElement(ui.a,{options:t},o(n,a)));case"audio":case"video":case"file":case"image":return c.a.createElement(jo,{attachment:n.attachment,style:r});default:return null}};function pi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=Object(a.useState)(e),r=pi(n,2),c=r[0],o=r[1];Object(a.useEffect)((function(){o(e)}),[e]);var i=function(e){o(e.target.value),t(e)};return{value:c,onChange:i}};function fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var di=function(e){var t=e.sendMessage,n=e.messageId,r=fi(Object(a.useState)(!1),2),o=r[0],i=r[1],s=mi("",(function(){return i(!1)})),u=Object(a.useCallback)((function(){if(!s.value)return i(!0);t({text:s.value,replyFor:n})}),[n,t,s.value]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"question"},"Please type below"),c.a.createElement("form",{className:"form"},c.a.createElement("div",{className:m()("form-group mb-0",{"has-error":o})},c.a.createElement("textarea",Object.assign({className:"quote-textarea form-input bordered",rows:3,placeholder:"Type here"},s)),c.a.createElement("button",{className:"button button-sm button-primary",type:"button",onClick:u},"Submit"))))},bi=n("nY5J"),gi=n.n(bi);function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var hi=function(e){var t=e.message,n=e.isBotEnabled,r=e.linkifyOptions,o=e.getMessage,i=e.showTranslatedMessage,s=Oi(Object(a.useState)(t.text.length>280),2),u=s[0],l=s[1],p=Object(a.useCallback)((function(){l(!1)}),[]);return c.a.createElement(c.a.Fragment,null,!n&&c.a.createElement(ui.a,{options:r},o(t,i)),n&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:m()("bot-message",{collapsed:u})},c.a.createElement(ui.a,{dangerouslySetInnerHTML:{__html:gi()(t.text)}})),u&&c.a.createElement("span",{className:"show-more",onClick:p},"Show more...")))},vi=function(e){var t,n=e.linkifyOptions,r=e.message,o=e.showTranslatedMessage,i=e.getMessage,u=e.sendMessage,p=e.isBotEnabled,m=Object(s.c)(),f=Object(a.useCallback)((function(){var e;r.isProactiveMessage?m((e=r.id,{type:Yr,payload:{messageId:e}})):m(function(e){return{type:Xa,payload:{messageId:e}}}(r.id))}),[m,r.id,r.isProactiveMessage]);if(Object(a.useEffect)((function(){var e=l.a.includes(["read","seen"],r.status);if(!e&&t){var n=new IntersectionObserver((function(t,n){t[0].intersectionRatio<=0||(n.unobserve(t[0].target),e||f())}));return n.observe(t),function(){return n.disconnect()}}}),[r.status,t,f]),r.replied)return null;switch(r.type){case"text":return c.a.createElement(ho,{ref:function(e){t=e}},c.a.createElement(hi,{message:r,isBotEnabled:p,linkifyOptions:n,getMessage:i,showTranslatedMessage:o}));case"BotQuickReply":return c.a.createElement(ii,{quickReplies:r.text,sendMessage:u,messageId:r.id,ref:function(e){t=e}});case"AgentTextareaPrompt":return c.a.createElement(ho,{ref:function(e){t=e}},c.a.createElement(di,{sendMessage:u,messageId:r.id}));case"audio":case"video":case"file":case"image":return c.a.createElement(jo,{attachment:r.attachment,ref:function(e){t=e}});default:return null}},xi=function(e){return{type:"DELETE_CHAT",payload:{chatId:e.chatId}}},ji=function(){return{type:"DELETE_CHATS"}},yi=function(e){return{type:"ADD_TRANSLATED_VISITOR_MESSAGE",payload:l.a.pick(e,["chatId","messageId","translatedText"])}},Ei=function(e){return{type:"ADD_TRANSLATED_AGENT_MESSAGE",payload:l.a.pick(e,["chatId","messageId","translatedText"])}};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ti(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ki={className:"quote-link",defaultProtocol:"https",target:{url:"_blank"}},_i=Object(s.b)((function(e){return{chat:Vo(e),viewReplyText:Go(e),isTyping:Uo(e),isMediumSizedWidget:jn(e),showAgentPicture:St(e),profilePictureUrl:At(e),agentDisplayName:Nt(e),firstMessage:Ue(e),isClientStateProcessed:Sn(e),allChatMessages:qo(e),isChatAgainBannerShown:Ko(e),visitorState:Le(e),quickReplies:Mn(e),isBotEnabled:pc(e),showQuickReply:Wo(e),currentChatId:Fe(e),joinedAgents:Dt(e)}}),(function(e){return{onSendMessage:function(t){return e(Za(t))},onReplyareaChange:function(t){e({type:"CONV_FORM/SET_VIEW_REPLY_TEXT",value:{value:t}.value})},onVisitorIsTyping:function(t){var n;e((n={text:t}.text,{type:Ja,text:n}))},showTranslatedAgentMessage:function(t){return e(function(e){return{type:"SHOW_TRANSLATED_AGENT_MESSAGE",payload:l.a.pick(e,["chatId","showTranslated"])}}(t))},showTranslatedVisitorMessage:function(t){return e(function(e){return{type:"SHOW_TRANSLATED_VISITOR_MESSAGE",payload:l.a.pick(e,["chatId","showTranslated"])}}(t))}}}))((function(e){var t,n=e.chat,r=void 0===n?{}:n,o=e.viewReplyText,i=void 0===o?"":o,s=e.onSendMessage,u=e.onReplyareaChange,p=e.onVisitorIsTyping,d=e.isTyping,b=e.isMediumSizedWidget,g=e.showAgentPicture,O=e.profilePictureUrl,h=e.agentDisplayName,j=e.firstMessage,y=e.isClientStateProcessed,E=e.allChatMessages,w=e.isChatAgainBannerShown,I=e.visitorState,T=e.quickReplies,R=e.isBotEnabled,k=e.showQuickReply,_=e.showTranslatedAgentMessage,S=e.showTranslatedVisitorMessage,A=e.currentChatId,C=e.joinedAgents,N=Object(a.useRef)(),P=so(N,E,R,d).scrollToBottom,D=Object(a.useContext)(f).theme,F=Ri(Object(a.useState)(!1),2),M=F[0],L=F[1],V=Ri(Object(a.useState)(!1),2),H=V[0],B=V[1],G=Object(a.useCallback)((function(e){var t=e.text,n=Ti(e,["text"]);s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(n,!0).forEach((function(t){Ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({text:t},n))}),[s]),U=function(){var e=l.a.trim(i);e&&(G({text:e}),u(""))};Object(a.useEffect)((function(){P(),L(!0)}),[P]);var W=Object(a.useMemo)((function(){return La(g,O)}),[g,O]);Object(a.useEffect)((function(){t&&!w&&t.focus()}),[t,w]);var q=r.lastAgentMessageId,z=r.lastVisitorMessageId,K=r.lastTranslatedAgentMessageId,J=r.lastTranslatedVisitorMessageId,X=r.showAgentTranslatedText,Y=r.showVisitorTranslatedText,Q=Object(a.useCallback)((function(e){return!!l.a.includes([J,K],e)}),[K,J]),Z=Object(a.useCallback)((function(e,t){var n=e.text;return t&&(n=e.translatedText||n),n}),[]),ee=Object(a.useMemo)((function(){var e=k;return A&&(e=!1),e}),[A,k]),te=Object(a.useMemo)((function(){var e=!R;return C.some((function(e){return!e.isBot}))&&(e=!0),e}),[R,C]);return c.a.createElement(bo,null,c.a.createElement(go,{ref:N,className:m()({"smooth-scroll":M})},(x||R)&&c.a.createElement("div",{className:"flex-fill"}),!y&&c.a.createElement("div",{className:m()("quote-container agent first-message")},c.a.createElement("div",{className:"quote-wrapper"},c.a.createElement(ho,null,j))),l.a.map(E.messageIds,(function(e){var t=l.a.get(E,"messages.".concat(e));if(!R||"system"!==t.by){var n=!b&&Va(e,E.messageIds,E.messages);return c.a.createElement("div",{className:m()("quote-container",t.by,{"has-profile-pic":n}),key:t.id},c.a.createElement("div",{className:"quote-wrapper"},("agent_proactive_message"===t.by||"agent_triggered_message"===t.by)&&"text"===t.type&&c.a.createElement(ho,null,t.text," "),"agent"===t.by&&c.a.createElement(c.a.Fragment,null,n&&c.a.createElement("div",{className:"quote-profile-pic"},!W&&c.a.createElement(v,{name:"default-user"}),W&&c.a.createElement("img",{className:"image",src:O,alt:"",title:h})),c.a.createElement(vi,{message:t,linkifyOptions:ki,showTranslatedMessage:X,getMessage:Z,sendMessage:G,isBotEnabled:R})),"visitor"===t.by&&c.a.createElement(c.a.Fragment,null,c.a.createElement(li,{message:t,linkifyOptions:ki,theme:D,showTranslatedMessage:Y,getMessage:Z}),t.state===dt&&c.a.createElement(wo,{value:"Failed",title:"Failed"})),"system"===t.by&&c.a.createElement(vo,{text:t.text}),"vendor"===t.by&&c.a.createElement(xo,{message:t,googleBadgeShownOnce:H,setGoogleBadgeShownOnce:B}),t.state===mt&&c.a.createElement(yo,null),l.a.includes([q,z],e)&&c.a.createElement(Eo,{value:t.shortTimestamp,title:t.longTimestamp})),Q(e)&&c.a.createElement("div",{className:"quote-options"},"agent"===t.by&&c.a.createElement(c.a.Fragment,null,!X&&c.a.createElement("span",{className:"translate",onClick:function(){return _({chatId:r.id,showTranslated:!0})}},"View Translated"),X&&c.a.createElement("span",{className:"translate",onClick:function(){return _({chatId:r.id,showTranslated:!1})}},"View Original")),"visitor"===t.by&&c.a.createElement(c.a.Fragment,null,!Y&&c.a.createElement("span",{className:"translate",onClick:function(){return S({chatId:r.id,showTranslated:!0})}},"View Translated"),Y&&c.a.createElement("span",{className:"translate",onClick:function(){return S({chatId:r.id,showTranslated:!1})}},"View Original"))))}})),ee&&c.a.createElement(ii,{quickReplies:T,sendMessage:s}),c.a.createElement("div",{className:m()("is-typing-status",{"is-bot":R})},!R&&c.a.createElement(c.a.Fragment,null,d&&c.a.createElement("span",null,"".concat(h," ").concat(_r.t("label.isTyping"))),!d&&c.a.createElement("span",null," ")),R&&d&&c.a.createElement(ri,null))),te&&c.a.createElement(Oo,null,c.a.createElement(Cr,{className:"reply-area-wrapper"},c.a.createElement("div",{className:"reply-area"},c.a.createElement(Fr,{value:i,placeholder:_r.t("label.replyAreaPlaceholder"),onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),U(),I===ge.CHATTING&&p(null))},ref:function(e){t=e},onChange:function(e){var t=e.target.value;u(t),I===ge.CHATTING&&p(t)}})),c.a.createElement("div",{className:"send-icon",role:"button",onClick:function(){return U()}},c.a.createElement(v,{name:"send-web",title:"Send"}))),c.a.createElement(Lo,null)))}));function Si(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ai=function(e){var t=e.className,n=Si(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("modal-wrapper",t)},n))},Ci=function(e){Object(a.useEffect)((function(){var t=function(t){"Escape"!==t.code&&"Escape"!==t.key||e()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[e])};function Ni(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pi=Object(s.b)(null,(function(e){return{onEndClick:function(){e(tc())},onContinueClick:function(){e({type:"CONV_FORM/CLOSE_CONFIRM_END_CHAT_MODAL"})}}}))((function(e){var t=e.onEndClick,n=e.onContinueClick,r=Ni(e,["onEndClick","onContinueClick"]);Ci(n);var o=Object(a.useContext)(f).i18n;return c.a.createElement(Ai,r,c.a.createElement("div",{className:"end-chat-wrapper"},c.a.createElement("p",{className:"confirmation-message"},o.t("label.endChatPrompt")),c.a.createElement("button",{className:"button button-danger end-chat-button",onClick:t},o.t("label.endChat")),c.a.createElement("button",{className:"button button-link continue-chat",onClick:n},o.t("label.continueChat"))))}));function Di(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fi=Object(s.b)(null,(function(e){return{onEndClick:function(){return e(tc())},onContinueClick:function(){return e({type:"CONV_FORM/CLOSE_CONFIRM_END_CHAT_MODAL"})}}}))((function(e){var t=Object(a.useContext)(f).i18n,n=(e.onEndClick,e.onContinueClick,Di(e,["onEndClick","onContinueClick"]));return c.a.createElement(Ai,n,c.a.createElement("div",{className:"offline-form-submit-response"},c.a.createElement("div",{className:"success-icon"},c.a.createElement(v,{name:"rounded-tick-icon"})),c.a.createElement("p",{className:"offline-response"},t.t("label.leaveMessageSuccess")),c.a.createElement(ur,null)))})),Mi="RATINGS/DO_CLOSE_RATINGS_FORM",Li="RATINGS/SUBMIT_RATINGS_FEEDBACK",Vi=function(){return{type:"RATINGS/SHOW_RATINGS_FORM"}},Hi=function(){return{type:Mi}},Bi=function(){return{type:"RATINGS/SUBMIT_RATINGS_SUCCESS"}};function Gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ui(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Wi={1:"veryBad",2:"bad",3:"ok",4:"good",5:"veryGood"},qi=function(e){var t=e.fillColor,n=e.active,r=Ui(e,["fillColor","active"]),a=n?"#fdc72f":t,o=!n&&.5;return c.a.createElement(v,Object.assign({name:"star",fillColor:a,fillOpacity:o},r))},zi=function(e){var t=e.submit,n=e.close,r=Object(a.useContext)(f),o=r.theme,i=r.i18n,u=Gi(Object(a.useState)(),2),l=u[0],p=u[1],m=Gi(Object(a.useState)(!1),2),d=m[0],b=m[1],g=Gi(Object(a.useState)(),2),O=g[0],h=g[1],v=Gi(Object(a.useState)(),2),x=v[0],j=v[1],y=Gi(Object(a.useState)(),2),E=y[0],w=y[1],I=Array.from(new Array(5),(function(e,t){return t+1})),T=Object(s.d)(_t),R=Object(s.d)(Pt),k={backgroundColor:o.color,color:o.backgroundColor,borderColor:o.backgroundColor},_=function(e){var t=Wi[e];return t?i.t("label."+t):""};return c.a.createElement(Cr,{className:"ratings-form",onSubmit:function(e){e.preventDefault(),l?t({ratings:l,ratingsFeedback:x}):w(!0)}},c.a.createElement("p",null,T&&R?i.t("label.rateYourConversation")+" "+R:i.t("label.rateYourConversationCompany")),c.a.createElement("div",{className:"star-container"},c.a.createElement("div",{className:"stars",onMouseOver:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},I.map((function(e){return c.a.createElement(qi,{key:"ratings_level".concat(e),active:d?e<=O:e<=l,onMouseOver:function(){return h(e)},onMouseLeave:function(){return h(l)},fillColor:o.color,onClick:function(){return p(e)}})}))),c.a.createElement("div",{className:"rating-message"},(l||d)&&_(d?O:l),!l&&!d&&E&&c.a.createElement("span",{className:"has-error"},i.t("label.ratingError")))),c.a.createElement(Nr,null,c.a.createElement(Fr,{defaultValue:x,className:"not-empty",label:i.t("label.ratingFeedback"),rows:3,onChange:function(e){return j(e.target.value)}})),c.a.createElement("div",{className:"ratings-footer"},c.a.createElement("button",{className:"button button-primary button-submit",type:"submit",style:k},i.t("label.submitRating")),c.a.createElement("button",{className:"button button-link button-skip",type:"button",onClick:function(){return n()}},i.t("label.skipRating"))))},Ki=function(){var e=Object(a.useContext)(f).i18n;return c.a.createElement("div",{className:"ratings-success animated fadeIn"},c.a.createElement("div",{className:"success-icon"},c.a.createElement(v,{name:"rounded-tick-icon"})),c.a.createElement("p",{className:"rating-response"},e.t("label.thankYouForRating")))},Ji=c.a.memo((function(e){var t=Object.assign({},e),n=Object(s.d)(ti),r=Object(s.c)(),o=Object(a.useCallback)((function(e){return r(function(e){return{type:Li,payload:e}}(e))}),[r]),i=Object(a.useCallback)((function(){return r(Hi())}),[r]),u=Object(a.useContext)(f).theme;return c.a.createElement(Ai,Object.assign({},t,{style:u}),c.a.createElement("div",{className:"ratings-container"},!n&&c.a.createElement(zi,{submit:o,close:i}),n&&c.a.createElement(Ki,null),c.a.createElement(ur,null)))})),Xi="INTEGRATIONS/SUBMIT_MAILCHIMP_SUBSCRIPTION",Yi="INTEGRATIONS/SEND_INTEGRATION_DATA",Qi=function(){return{type:"INTEGRATIONS/SHOW_EMAIL_SUBSCRIPTION_FORM"}};function Zi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var es=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(e),n=$i(t,2),r=n[0],c=n[1],o=Object(a.useState)({}),i=$i(o,2),s=i[0],u=i[1],l=function(e){var t=e.target,n=t.value,r=t.name;c(n);var a=ir[r](n);u(a)};return{error:s,setError:u,bind:{value:r,onChange:l}}},ts=Object(s.b)((function(e){return{visitorInfo:We(e)}}),(function(e){return{skipSubscription:function(){return e({type:"INTEGRATIONS/HIDE_EMAIL_SUBSCRIPTION_FORM"})},submit:function(t){return e(function(e){return{type:Xi,payload:e}}(t))}}}))((function(e){var t=e.visitorInfo,n=e.skipSubscription,r=e.submit,o=Zi(e,["visitorInfo","skipSubscription","submit"]),i=Object(a.useContext)(f),s=i.theme,u=i.themeInverseBordered,l=es(t.name),p=l.error,m=l.setError,d=l.bind,b=es(t.email),g=b.error,O=b.setError,h=b.bind;return c.a.createElement(Ai,Object.assign({},o,{style:s}),c.a.createElement("div",{className:"email-subscrition"},c.a.createElement(cr.Provider,{value:!0},c.a.createElement(Cr,{onSubmit:function(e){switch(e.preventDefault(),!0){case!d.value:m(ir.name(d.value));break;case!h.value:O(ir.email(h.value));break;default:r({name:d.value,email:h.value})}}},c.a.createElement("p",null,"Thanks for chatting."),c.a.createElement("p",null,"Would you like to be in out mailing list?"),c.a.createElement("br",null),c.a.createElement(Nr,{error:p},c.a.createElement(Pr,Object.assign({type:"text",label:"Your Name",name:"name",validations:{required:!0}},d))),c.a.createElement(Nr,{error:g},c.a.createElement(Pr,Object.assign({type:"email",label:"Your E-Mail",name:"email",validations:{required:!0}},h))),c.a.createElement(Lr,{style:{color:s.color}},c.a.createElement("button",{className:"button",style:u},"Subscribe Now"),c.a.createElement("button",{className:"button button-link button-skip",type:"button",onClick:function(){return n()}},"skip subscription"))))))})),ns=n("mnLz");function rs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var as=[].concat(uo.getSupportedTypes(),uo.getSupportedExtensions()),cs=uo.getSupportedExtensions().join(", "),os=Object(s.b)((function(e){return{validationErrors:Object(u.get)(e,"attachments.validationErrors")}}),(function(e){return{closeFileUpload:function(){return e({type:"ATTACHMENTS/CLOSE_FILE_UPLOAD"})},resetFileValidationErrors:function(){return e({type:"RESET_FILE_VALIDATION_ERRORS"})},processSelectedFiles:function(t){return e(function(e){return{type:Ia,files:e}}(t))}}}))((function(e){var t=e.closeFileUpload,n=e.resetFileValidationErrors,r=e.processSelectedFiles,o=e.validationErrors,i=rs(e,["closeFileUpload","resetFileValidationErrors","processSelectedFiles","validationErrors"]),s=Object(a.useContext)(f).i18n,u={onDrop:Object(a.useCallback)((function(e){r(e)}),[r])};j||y||(u.accept=as);var l=Object(ns.a)(u),p=l.getRootProps,m=l.getInputProps;return Ci(t),c.a.createElement(Ai,i,c.a.createElement("div",{className:"file-upload-wrapper"},c.a.createElement(c.a.Fragment,null,!o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"close",onClick:function(e){return function(e){e.stopPropagation(),t()}(e)}},c.a.createElement(v,{name:"close",title:"Close"})),c.a.createElement("div",Object.assign({className:"file-upload-message"},p()),c.a.createElement("input",m()),c.a.createElement("div",null,s.t("attachmentLabel.dropFilesHere")),c.a.createElement("div",null,s.t("attachmentLabel.or")),c.a.createElement("div",null,s.t("attachmentLabel.clickToUpload")))),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"close",onClick:function(){return n()}},c.a.createElement(v,{name:"close",title:"Close"})),c.a.createElement("div",{className:"attachments-error"},c.a.createElement(v,{name:"exclamation",className:"attachments-error-icon",width:"38",height:"36"}),c.a.createElement("p",{className:"attachments-error-msg"},s.t("attachmentLabel.cannotUploadFile")),o.map((function(e,t){return c.a.createElement(c.a.Fragment,{key:"fileUploadErr-".concat(t)},function(){switch(e.type){case"INVALID_COUNT":return c.a.createElement("p",{className:"attachments-error-desc"},s.t("attachmentLabel.maxFilesReachedError",{maxLimit:e.meta.maxLimit}),c.a.createElement("br",null),c.a.createElement("br",null));case"INVALID_SIZE":return c.a.createElement("p",{className:"attachments-error-desc"},s.t("attachmentLabel.fileTooBigError",{fileSize:e.meta.fileSize,maxSize:e.meta.maxSize}),c.a.createElement("br",null),c.a.createElement("br",null));case"INVALID_TYPE":return c.a.createElement("p",{className:"attachments-error-desc"},s.t("attachmentLabel.fileTypeError",{newLine:"\n",extensions:cs}),c.a.createElement("br",null),c.a.createElement("br",null))}}())})))))))})),is=function(e){return l.a.get(e,"emailTranscript.sendTranscriptSuccess",!1)},ss=function(e){return l.a.get(e,"emailTranscript.state")};function us(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ps=function(){var e=Object(s.d)(Ce),t=Object(s.d)(ss),n=Object(a.useContext)(f),r=n.theme,o=n.i18n,i=Object(s.c)(),u=Object(a.useCallback)((function(){return i(Do())}),[i]),l=Object(a.useCallback)((function(e){return i(function(e){return{type:Co,payload:e}}(e))}),[i]),p=function(e){var t=Object(a.useContext)(f).i18n,n=ls(Object(a.useState)(e),2),r=n[0],c=n[1],o=ls(Object(a.useState)({}),2),i=o[0],s=o[1];return Object(a.useEffect)((function(){c(e)}),[e]),{value:r,onChange:function(e){var n=e.target.value,r=Object(rr.email)(n);r.i18nKey&&(r.errorMessage=t.t(r.i18nKey)),c(n),s(r)},error:i,setError:s}}(e),d=p.error,b=p.setError,g=us(p,["error","setError"]),O=t===Po.SENDING;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"info-text"},o.t("label.emailChatPrompt")),c.a.createElement(cr.Provider,{value:!0},c.a.createElement(Cr,{onSubmit:function(e){e.preventDefault();var t=g.value,n=Object(rr.email)(t);n.i18nKey&&(n.errorMessage=o.t(n.i18nKey)),b(n),n.isValid&&l(t)}},c.a.createElement(Nr,{error:d},c.a.createElement(Pr,Object.assign({type:"email"},g,{label:o.t("label.email"),validations:{isRequired:!0}}))),c.a.createElement(Lr,{style:{color:r.color}},c.a.createElement("button",{className:m()("button button-email",{disabled:O}),type:"submit"},o.t("label.emailChat")),c.a.createElement("button",{className:"button button-link button-skip",type:"button",onClick:u},o.t("label.continueChat"))))))},ms=function(){var e=Object(a.useContext)(f).i18n,t=Object(s.c)(),n=Object(a.useCallback)((function(){return t(Do())}),[t]);Ci(n);var r=Object(s.d)(Le),o=l.a.includes([ge.CHATTING,ge.WAITING],r);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"success-icon"},c.a.createElement(v,{name:"rounded-tick-icon"})),o&&c.a.createElement("p",{className:"success-response"},"A copy of this chat transcript will be sent once the chat ends."),!o&&c.a.createElement("p",{className:"success-response"},e.t("label.emailChatSuccessMessage")),c.a.createElement(ur,null))},fs=c.a.memo((function(e){var t=Object.assign({},e),n=Object(s.d)(is),r=Object(a.useMemo)((function(){return c.a.createElement(ms,null)}),[]);return c.a.createElement(Ai,t,c.a.createElement("div",{className:"email-transcript-wrapper"},!n&&c.a.createElement(ps,null),n&&c.a.createElement(c.a.Fragment,null,r)))})),ds=function(e,t){return{appear:e,appearActive:e,enter:e,enterActive:e,enterDone:e,exit:t,exitActive:t,exitDone:t}},bs=function(){var e=ds("slideInDown","slideOutUp"),t=ds("slideInUp","slideOutUp"),n=Object(s.d)(zo),r=Object(s.d)(Xo),a=Object(s.d)(Jo),o=Object(s.d)(Qo),i=Object(s.d)(Zo),u=Object(s.d)(ei);return c.a.createElement(c.a.Fragment,null,c.a.createElement(fa.a,{in:n,timeout:600,classNames:e,unmountOnExit:!0},c.a.createElement(Pi,null)),c.a.createElement(fa.a,{in:r,timeout:600,classNames:e,unmountOnExit:!0},c.a.createElement(Fi,null)),c.a.createElement(fa.a,{in:a,timeout:600,classNames:t,unmountOnExit:!0},c.a.createElement(Ji,null)),c.a.createElement(fa.a,{in:o,timeout:600,classNames:t,unmountOnExit:!0},c.a.createElement(ts,null)),c.a.createElement(fa.a,{in:i,timeout:600,classNames:e,unmountOnExit:!0},c.a.createElement(os,null)),c.a.createElement(fa.a,{in:u,timeout:600,classNames:e,unmountOnExit:!0},c.a.createElement(fs,null)))};function gs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Os=function(e){var t=e.className,n=gs(e,["className"]);return c.a.createElement("div",Object.assign({className:m()("popup-wrapper",t)},n))},hs=c.a.memo((function(e){var t=Object.assign({},e),n=Object(s.c)(),r=Object(a.useContext)(f).i18n,o=Object(a.useCallback)((function(){return n({type:za})}),[n]),i=Object(a.useCallback)((function(){return n({type:"SHOW_EMAIL_TRANSCRIPT_MODAL"})}),[n]);return c.a.createElement(Os,t,c.a.createElement("div",{className:"continue-chat"},c.a.createElement("button",{className:"button button-primary chat-again",onClick:o},r.t("label.chatAgain")),c.a.createElement("button",{className:"button button-link",onClick:i},r.t("label.emailChat")),c.a.createElement(ur,null)))}));function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var js=!1,ys=Object(s.b)((function(e){return{formFields:Pc(e),keyStrokeData:Dc(e),errors:Fc(e),visitorCountry:ze(e)}}),(function(e){return{updateFormData:function(t){return e(So(t))},updateErrors:function(t){return e(function(e){return{type:"UPDATE_EDIT_VISITOR_INFO_ERROR_DATA",payload:e}}(t))},submitForm:function(){return e({type:To})},close:function(){return e(_o())}}}))((function(e){var t=e.formFields,n=e.keyStrokeData,r=e.errors,o=e.visitorCountry,i=e.updateFormData,s=e.updateErrors,u=e.submitForm,l=e.close,p=Object(a.useContext)(f).i18n,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(n,!0).forEach((function(t){xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.useMemo)((function(){return or(t)}),[t]),{},n),d=Hr(i,s).handleChange;if(js)for(var b in r)if(!1===r[b].isValid){document.getElementById("__anchor-".concat(b)).scrollIntoView({behavior:"smooth"});break}return Ci(l),c.a.createElement(Os,null,c.a.createElement("div",{className:"edit-visitor-info"},c.a.createElement("p",{className:"title"},p.t("label.enterYourNameEmail")),c.a.createElement("div",{className:"close",onClick:function(){return l()}},c.a.createElement(v,{name:"close",title:"Close"})),c.a.createElement(cr.Provider,{value:!0},c.a.createElement(Cr,{className:"content-main edit-visitor-info-form",onSubmit:function(e){e.preventDefault(),Br({formFields:t,storeData:m,errorUpdateFn:s,submitFormFn:u}),js=!0}},c.a.createElement("div",{className:"form-content"},t.map((function(e){var t=Vr[e.type],n=e.fieldId,a=e.label,i=e.validations,s=e.type,u=e.origin,l=i.isRequired,p={id:n,name:n,label:a,type:s,value:m[n],validations:i,data:e};"phone"===s&&(p.country=o);var f=m[n];return p.onChange=function(t){d({event:t,id:n,validations:i,origin:u,type:s,field:e,previousValue:f})},c.a.createElement(Nr,{key:n,id:"__anchor-".concat(n),error:r[n],required:l},c.a.createElement(t,p))}))),c.a.createElement(Lr,null,c.a.createElement("button",{className:"button",type:"submit"},p.t("label.continue")))))))})),Es=c.a.memo((function(e){var t=Object.assign({},e),n=Object(a.useContext)(f),r=n.theme,o=n.themeInverseBordered,i=n.i18n,u=Object(s.c)(),l=Object(a.useCallback)((function(){return u(Ro())}),[u]),p=Object(a.useCallback)((function(){return u({type:"VISITOR_DECLINED_AGENT_REQUEST_VISITOR_DETAILS"})}),[u]);return c.a.createElement(Os,Object.assign({className:"align-top"},t),c.a.createElement("div",{className:"agent-request-visitor-details",style:r},c.a.createElement("div",{className:"close",onClick:function(){return p()}},c.a.createElement(v,{name:"close",title:"Close"})),c.a.createElement("button",{className:"button button-primary edit-info",onClick:l,style:o},i.t("label.addYourDetails")),c.a.createElement("span",{style:{color:r.color}},i.t("label.thisChatWillNotBeAffected"))))})),ws=Object(s.b)((function(e){return{isChatAgainBannerShown:Ko(e),isEditVisitorInfoShown:Yo(e),showAgentVInfoReques:$o(e)}}),null)((function(e){var t=e.isChatAgainBannerShown,n=e.isEditVisitorInfoShown,r=e.showAgentVInfoReques,o=Object(a.useMemo)((function(){return ds("slideInUp","slideOutDown")}),[]),i=Object(a.useMemo)((function(){return ds("slideInDown","slideOutUp")}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(fa.a,{in:t,timeout:600,classNames:o,unmountOnExit:!0},c.a.createElement(hs,null)),c.a.createElement(fa.a,{in:n,timeout:600,classNames:o,unmountOnExit:!0},c.a.createElement(ys,null)),c.a.createElement(fa.a,{in:r,timeout:600,classNames:i,unmountOnExit:!0},c.a.createElement(Es,null)))})),Is=function(){var e=Object(a.useContext)(f).themeClasses,t=Object(s.d)(on),n=Object(s.d)(On),r=Object(s.d)(Oa);return c.a.createElement("div",{className:m()("chatbox-container",e)},c.a.createElement(ga,{className:"fadeInUp-trans-5"},c.a.createElement(Oc,null),c.a.createElement("div",{className:"chatbox-content-wrapper"},n&&c.a.createElement(ba,null),c.a.createElement(fa.a,{in:r,classNames:"slideDown",timeout:500,unmountOnExit:!0},c.a.createElement(Ma,null)),"conversation"!==t&&c.a.createElement(oo,null),"conversation"===t&&c.a.createElement(_i,null),c.a.createElement(bs,null),c.a.createElement(ws,null))))},Ts=function(e){return(299*parseInt(e.substr(1,2),16)+587*parseInt(e.substr(3,2),16)+114*parseInt(e.substr(5,2),16))/1e3>=128?"#000000":"#ffffff"},Rs=function(e){return Object(u.get)(e,"config.EMBED_TOKEN")},ks=function(e){var t=Object(u.get)(e,"config.options.showBadge");return!Object(u.isBoolean)(t)||t},_s=function(e){var t=Object(u.get)(e,"config.options.showBadgeOnLoad");return!Object(u.isBoolean)(t)||t},Ss=function(e){return Object(u.get)(e,"config.options.customStyles")},As=function(e){return Object(u.get)(e,"config.options.customCSSFiles")},Cs=Object(kt.a)([function(e){return Object(u.get)(e,"config.options.forceShowWidget",!1)},function(e){return Object(u.get)(e,"widget.hideChatWidget")},function(e){return Object(u.get)(e,"widget.hideWidgetWhenOffline")},pr,function(e){return!0===Object(u.get)(e,"widget.routing.canHideWidgetWhenBusy",!1)&&!1===Dn(e)},function(e){return Object(u.get)(e,"availability.finalAvailability.available_agents_busy",!1)},Le,function(e){return Object(u.get)(e,"widget.sdkShowWidget")},function(e){return Object(u.get)(e,"visitor.blocked",!1)},lr],(function(e,t,n,r,a,c,o,i,s,u){var l=!0;return!1!==i&&(!s&&(o===ge.CHATTING?l:!!e||(t?l=!1:(n&&(r&&u||(l=!1)),a&&c&&(l=!1)),l)))}));function Ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ns(n,!0).forEach((function(t){Ds(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ns(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fs=Object(s.b)((function(e){var t=Et(e),n=zn(e),r=En(e)&&!n&&!t;return{isIframeExpanded:cn(e),isMediumSizedWidget:jn(e),appearance:hn(e),isBadgeCompact:yn(e),bagdePosition:vn(e),removeHfcBranding:wn(e),canShowWidget:Cs(e),canShowBadge:Rn(e),isBadgeVertical:r,isBotEnabled:pc(e)}}))((function(e){var t=e.canShowBadge,n=e.isIframeExpanded,r=e.isMediumSizedWidget,o=e.appearance,i=e.isBadgeCompact,s=e.isBadgeVertical,u=e.bagdePosition,l=e.removeHfcBranding,p=e.canShowWidget,m=e.isBotEnabled,d=o.primaryColor,b=o.secondaryColor,g="#".concat(d),O="#".concat(b),h=Object(a.useMemo)((function(){return Ts(O)}),[O]),v={backgroundColor:O,color:h},j={theme:{backgroundColor:g,color:O},themeInverse:v,themeInverseBordered:Ps({},v,{borderColor:v.backgroundColor}),position:{isBadgeCompact:i,isBadgeVertical:s,bagdePosition:u},removeHfcBranding:l,themeClasses:{xl:!r,"is-mobile":x,"is-bot":m},i18n:_r};return c.a.createElement(c.a.Fragment,null,p&&c.a.createElement(f.Provider,{value:j},t&&c.a.createElement(ma,null),n&&c.a.createElement(Is,null)))})),Ms=function(){return c.a.createElement(Fs,null)};function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bs="CHAT_API/INITIATE_CHAT",Gs="CHAT_API/INITIATE_CHAT_SUCCESS",Us="CHAT_API/LISTEN_TO_CHAT_NOTIFICATIONS",Ws="CHAT_API/SEND_VISITOR_MESSAGE_TO_SERVER",qs="CHAT_API/SEND_VISITOR_MESSAGE_TO_SERVER_SUCCESS",zs="CHAT_API/VISITOR_ALREADY_CHATTING",Ks="CHAT_API/SEND_VISITOR_INTEGRATION_DATA",Js="CHAT_API/CHAT_API_RECONNECTED",Xs=function(e){var t=e.chatId,n=e.tempChatId,r=e.departmentId;return{type:Gs,chatId:t,tempChatId:n,departmentId:r}},Ys=function(e){var t=e.tempMessageId,n=e.tempChatId,r=e.messageType,a=Hs(e,["tempMessageId","tempChatId","messageType"]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(n,!0).forEach((function(t){Vs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Ws,tempMessageId:t,tempChatId:n,messageType:r},a)},Qs=function(e){var t=e.tempMessageId,n=e.messageId,r=e.chatId,a=e.replyFor;return{type:qs,tempMessageId:t,messageId:n,chatId:r,replyFor:a}},Zs=function(e){return{type:"CHAT_API/SEND_VISITOR_MESSAGE_TO_SERVER_FAILED",tempMessageId:e.tempMessageId,chatId:e.chatId}},$s=function(e,t){return{type:Ks,integrationName:e,integrationData:t}},eu=function(){return{type:"CHAT_API/SEND_VISITOR_INTEGRATION_DATA_SUCCESS"}},tu=function(e){return{type:"CHAT_API/SEND_VISITOR_INTEGRATION_DATA_FAILURE",error:e.error}},nu="SDK_SHOW_WIDGET",ru="SDK_SHOW_BADGE",au="SDK_HIDE_BADGE";function cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cu(n,!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var su={isExpanded:!1,isWidgetExpandedOnce:!1,canShowBadge:!0,currentForm:"prechat",chatApiConnectionStatus:"connected",clientStateProcessed:!1,sdkShowWidget:void 0,sdkShowBadge:void 0};function uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uu(n,!0).forEach((function(t){pu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mu={},fu="AVAILABILITY/UPDATE_AVAILABILITY",du=function(e){var t=e.availabilities;return{type:fu,availabilities:t}};function bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bu(n,!0).forEach((function(t){Ou(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hu={};function vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vu(n,!0).forEach((function(t){ju(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yu={departments:[],currentDepartmentId:void 0},Eu={};function wu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(n,!0).forEach((function(t){Ru(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ru(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ku={state:ge.PASSIVE,geo:{},apps:[],integrations:[],customPrechatData:{},currentChatId:void 0,name:void 0,email:void 0,sound:"on",blocked:!1,firstMessage:""},_u="NOTIF/CHAT_ACCEPTED_BY_AGENT",Su="NOTIF/CHAT_AGENT_MESSAGE",Au="NOTIF/CHAT_ENDED_BY_VISITOR",Cu="NOTIF/CHAT_ENDED_BY_AGENT",Nu="NOTIF/AGENT_IS_TYPING",Pu="NOTIF/CHAT_AGENT_ATTACHMENT",Du="NOTIF/CHAT_MESSAGE_READ",Fu="NOTIF/ADD_PROACTIVE_AGENT_MESSAGE",Mu=function(e){var t=e.chatId,n=e.agentId,r=e.agentName,a=e.agentProfilePicUrl,c=e.isBot;return{type:_u,chatId:t,agentId:n,agentName:r,agentProfilePicUrl:a,isBot:c}},Lu=function(e){return{type:Fu,payload:l.a.pick(e,["chatId","messageId","agentId","agentName","text","timestamp","status"])}},Vu=function(e){var t=e.messageId,n=e.chatId,r=e.agentId,a=e.agentName,c=e.text,o=e.isBot;return{type:Su,messageId:t,chatId:n,agentId:r,agentName:a,text:c,isBot:o}},Hu=function(e){var t=e.chatId,n=e.messageId,r=e.type;return{type:"NOTIF/AGENT_SPECIAL_MESSAGE",payload:{messageId:n,chatId:t,agentId:e.agentId,agentName:e.agentName,type:r,text:e.text,isBot:e.isBot}}},Bu=function(e){var t=e.chatId,n=e.messageId,r=e.text,a=e.visitorName;return{type:"NOTIF/CHAT_VISITOR_MESSAGE",messageId:n,chatId:t,visitorId:e.visitorId,visitorName:a,text:r}},Gu=function(e){var t=e.chatId;return{type:Au,chatId:t}},Uu=function(e){var t=e.chatId;return{type:Cu,chatId:t}},Wu=function(e){var t=e.chatId,n=e.messageId,r=e.agentId,a=e.agentName,c=e.attachment;return{type:Pu,chatId:t,messageId:n,agentId:r,agentName:a,attachment:c}},qu=function(e){var t=e.chatId,n=e.messageId;return{type:Du,payload:{chatId:t,messageId:n}}},zu=n("usMY"),Ku=n("C/lX"),Ju=n.n(Ku),Xu=["BotQuickReply","AgentTextareaPrompt"];function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(n,!0).forEach((function(t){Zu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function el(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var tl=[];function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(n,!0).forEach((function(t){al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cl={isEndChatConfirmationOpen:!1,isChatAgainBannerShown:!1,isRatingsFromOpen:!1,showOfflineFormSubmitResponseModal:!1,showEditVisitorInfoPopup:!1,showEmailSubscriptionForm:!1,showFileUpload:!1,showVisitorInfoRequestConfirmation:!1,showEmailTranscript:!1,submitRatingsSuccess:!1};function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(n,!0).forEach((function(t){sl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ul={canShowDefaultQuickReplies:!1},ll=function(){return[{type:"text",fieldId:"name",label:_r.t("label.name"),dataType:"string",allowEditing:!0},{type:"email",fieldId:"email",label:_r.t("label.email"),dataType:"string",allowEditing:!0},{type:"phone",fieldId:"phoneNumber",label:_r.t("label.phoneNumber"),dataType:"string",allowEditing:!0},{type:"department",fieldId:"department",label:_r.t("customText.departmentPickerLabel"),dataType:"string"},{type:"visitorConsent",fieldId:"visitorConsent",priority:9999}]},pl=function(e,t,n){var r=Object(u.orderBy)(n,["order"],"asc"),a=ll().concat(r),c={};c.enabledInBotMode=e.enabledInBotMode,c.enabled=e.enabled,c.fields=[],c.keyStrokeData={},a.forEach((function(n){var r=n.fieldId,a=n.type,o=n.priority,i=n.dataType,s=n.options,l=n.isHelpTextEnabled,p=n.helpText,m="object"==typeof e[r]?e[r].enabled:void 0;if(n&&!1!==m){var f={};f.origin=n.validations?"custom":"default",o&&(f.priority=o),s&&(f.options=s);var d=n.name||n.label;if(Object.assign(f,{fieldId:r,type:a,label:d,dataType:i,isHelpTextEnabled:l,helpText:p}),n.validations)f.validations=n.validations;else{var b={isRequired:!e[r].optional,maxLength:100};f.validations=b}if("visitorConsent"===r){var g=[{_id:r,text:e[r].text}];delete f.label,delete f.options,f.options=g}if("department"===r&&0!==t.length){var O=t.filter((function(e){return!e.isDefault}));0!==O.length&&O.unshift({departmentChatId:"",isDefault:!1,name:_r.t("customText.departmentPickerLabel"),_id:Object(zu.s4)()}),f.options=O}if(Object(u.includes)(["select","dropdown","radio","checkbox"],f.type)&&0===f.options.length)return;Object(u.includes)(["dropdown","radio"],f.type)&&"custom"===f.origin&&f.options.forEach((function(e){e.isSelectedByDefault&&(c.keyStrokeData[f.fieldId]=[e._id])})),c.fields.push(f)}}));var o=Object(u.orderBy)(c.fields,["priority"],"desc");return delete c.fields,c.fields=o,c},ml=function(e){var t=e.showPhoneInOfflineForm,n=e.offlineEnabledCustomPrechatFields,r=e.departments,a=e.prechat,c=Object(u.orderBy)(n,["order"],"asc"),o=[{type:"text",fieldId:"name",label:_r.t("label.name"),dataType:"string"},{type:"email",validationName:"Email",fieldId:"email",label:_r.t("label.email"),dataType:"string"},{type:"phone",fieldId:"phoneNumber",label:_r.t("label.phoneNumber"),dataType:"string",enabled:!1},{type:"department",fieldId:"department",label:_r.t("customText.departmentPickerLabel"),dataType:"string"},{type:"textarea",fieldId:"message",label:_r.t("label.message"),dataType:"string",priority:9999},{type:"visitorConsent",fieldId:"visitorConsent",priority:9999}].concat(c),i={fields:[],keyStrokeData:{}};o.forEach((function(e){var n={},c=e.fieldId,o=e.type,s=e.dataType,l=e.options,p=e.priority,m=e.isHelpTextEnabled,f=e.helpText;if("phone"===o&&(e.enabled=t),("department"!==c||a[c].enabled)&&!1!==e.enabled){n.origin=e.validations?"custom":"default",l&&(n.options=l),p&&(n.priority=p);var d=e.name||e.label;if(Object.assign(n,{fieldId:c,type:o,label:d,dataType:s,isHelpTextEnabled:m,helpText:f}),e.validations)n.validations=e.validations;else{n.validations={isRequired:!0,maxLength:100}}if("visitorConsent"===c){var b=[{_id:c,text:a[c].text}];delete n.label,delete n.options,n.options=b}if("department"===c&&0!==r.length){var g=r.filter((function(e){return!e.isDefault}));0!==g.length&&g.unshift({departmentChatId:"",isDefault:!1,name:_r.t("customText.departmentPickerLabel"),_id:Object(zu.s4)()}),n.options=g}Object(u.includes)(["dropdown","radio"],n.type)&&"custom"===n.origin&&n.options.forEach((function(e){e.isSelectedByDefault&&(i.keyStrokeData[n.fieldId]=[e._id])})),i.fields.push(n)}}));var s=Object(u.orderBy)(i.fields,["priority"],"desc");return delete i.fields,i.fields=s,i},fl=function(e){var t={fields:[]};return ll().filter((function(e){return e.allowEditing})).forEach((function(n){var r=n.fieldId,a=n.type,c=n.dataType,o=n.label,i={isRequired:!0,maxLength:100};"phoneNumber"===r&&(i.isRequired=!e[r].optional),t.fields.push({fieldId:r,type:a,label:o,dataType:c,validations:i})})),t};function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(n,!0).forEach((function(t){gl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ol={prechat:{messageId:null,enabled:null,enabledInBotMode:null,fields:null,keyStrokeData:{},errors:{}},offline:{fields:null,keyStrokeData:{},errors:{}},editVisitorInfo:{fields:null,keyStrokeData:{},errors:{}}},hl=function(e){return{type:"AGENT/UPDATE_AGENT_INFO",payload:e}},vl=function(e){return{type:"AGENT/UPDATE_JOINED_AGENTS",payload:e}};function xl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(n,!0).forEach((function(t){El(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function El(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wl={allAgents:[],joinedAgents:[],showAgentName:void 0,showAgentPicture:void 0,agentId:void 0,agentName:void 0,profilePictureUrl:void 0,isBot:void 0};function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(n,!0).forEach((function(t){Rl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kl={showProgressBar:!1,uploadFailed:!1,uploadCancelled:!1,uploadPercent:0,totalFileCount:0,uploadedFileCount:0,validationErrors:null};function _l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_l(n,!0).forEach((function(t){Al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cl={triggeredChats:[],activeTriggeredChat:void 0,sdkIsTriggeredChatsEnabled:!0},Nl="PAGE/NEW_UNREAD_MESSAGE",Pl="PAGE/UNSET_UNREAD_MESSAGES",Dl=function(e){return{type:"PAGE/SET_CURRENT_PAGE_STATS",payload:e}},Fl=function(e){var t=e.messageId;return{type:Nl,payload:{messageId:t}}},Ml=function(){return{type:Pl}},Ll="PARENT_FRAME_EVENTS/WINDOW_FOCUSED",Vl="PARENT_FRAME_EVENTS/WINDOW_BLURED",Hl={VISIBLE:"visible",FOCUSSED:"focussed",BLURRED:"blurred",HIDDEN:"hidden"},Bl=function(e){return{type:Ll,payload:e}},Gl=function(e){return{type:Vl,payload:e}};function Ul(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(n,!0).forEach((function(t){zl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kl={currentPage:void 0,ip:void 0,unReadMessages:[],isWindowActive:!0},Jl="VISITOR_INFO/CONNECT_TO_VISITOR_INFO_SUCCESS",Xl="VISITOR_INFO/UPDATE_VISITOR_INFO_PROPS",Yl="UPDATE_VISITOR_LAST_ACTIVE_TS",Ql=function(e){var t=e.visitorInfo;return{type:Jl,payload:{visitorInfo:t}}},Zl=function(e){return{type:Xl,payload:l.a.pick(e,["visitor_id","visitor_name","phone_number","email","engaged_by","engage_messages","chat_status","custom_properties"])}},$l=function(){return{type:Yl}},ep=function(e){return{type:"ADD_ENGAGE_MESSAGE",payload:l.a.pick(e,["agent","message_id","timestamp","text"])}};function tp(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?np(n,!0).forEach((function(t){ap(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):np(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cp={accessToken:null,badge_status:Mt};function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?op(n,!0).forEach((function(t){sp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var up="SET_CUSTOM_FIELDS",lp="UNSET_CUSTOM_FIELDS";function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(n,!0).forEach((function(t){fp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dp={customFieldsInfo:{},customFields:{}};function bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bp(n,!0).forEach((function(t){Op(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Op(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hp={sendTranscriptSuccess:!1},vp=Object(i.c)({widget:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:su,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F:return e=Object(u.get)(n,"responseJson.widget.maximizedOnLoad",!1),ou({},t,{embedToken:Object(u.get)(n,"responseJson.widget.embedToken"),accessToken:Object(u.get)(n,"responseJson.accessToken_v2"),profileChatId:Object(u.get)(n,"responseJson.widget.profileChatId_v2"),broadcastDepartment:Object(u.get)(n,"responseJson.widget.broadcastDepartment"),hideChatWidget:Object(u.get)(n,"responseJson.widget.hideChatWidget"),hideWidgetWhenOffline:Object(u.get)(n,"responseJson.widget.hideWidgetWhenOffline"),text:Object(u.get)(n,"responseJson.widget.text",{}),maximizedOnLoad:e,isExpanded:e,prechat:Object(u.get)(n,"responseJson.widget.prechat"),appearance:Object(u.get)(n,"responseJson.widget.appearance",{}),removeHfcBranding:Object(u.get)(n,"responseJson.widget.removeHfcBranding",!1),hideRatingForm:Object(u.get)(n,"responseJson.widget.hideRatingForm",!1),routing:Object(u.get)(n,"responseJson.widget.routing",{})});case B:return ou({},t,{isIframeExpanded:!0});case G:return ou({},t,{isIframeExpanded:!1});case H:return ou({},t,{isWidgetExpanded:!0,isWidgetExpandedOnce:!0});case"WIDGET/COLLAPSE_WIDGET":return ou({},t,{isWidgetExpanded:!1});case Ha:return ou({},t,{currentForm:gc.CONVERSATION});case Kc:return ou({},t,{currentForm:gc.PRECHAT});case"PRECHAT_FORM/SHOW_INPROGRESS_CHAT_FORM":return ou({},t,{currentForm:gc.INPROGRESS_CHAT});case vc:return ou({},t,{currentForm:gc.OFFLINE});case"CHAT_API/CHAT_API_CONNECTING":return ou({},t,{chatApiConnectionStatus:"connecting"});case"CHAT_API/CHAT_API_CONNECTED":return ou({},t,{chatApiConnectionStatus:"connected"});case"CHAT_API/CHAT_API_DISCONNECTED":return ou({},t,{chatApiConnectionStatus:"disconnected"});case Js:return ou({},t,{chatApiConnectionStatus:"connected"});case"CLIENT_STATE_PROCESSED":return ou({},t,{clientStateProcessed:!0});case nu:return ou({},t,{sdkShowWidget:!0,sdkShowBadge:!0});case"SDK_HIDE_WIDGET":return ou({},t,{sdkShowWidget:!1});case ru:return ou({},t,{sdkShowBadge:!0});case au:return ou({},t,{sdkShowBadge:!1});case"WIDGET/UPDATE_CAN_SHOW_BADGE":return ou({},t,{canShowBadge:Object(u.get)(n,"canShowBadge")});default:return t}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WIDGET/SET_CONFIG":return lu({},Object(u.get)(t,"config"));default:return e}},availability:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fu:return gu({},e,{},Object(u.get)(t,"availabilities"));default:return e}},department:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return xu({},e,{departments:Object(u.keyBy)(Object(u.get)(t,"responseJson.widget.departments"),"_id")});default:return e}},features:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eu,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return _.get(t,"responseJson.features");default:return e}},visitor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ku,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Tu({},e,{geo:Object(u.get)(t,"responseJson.geo",{}),apps:Object(u.get)(t,"responseJson.apps",[])});case ne:return Tu({},e,{},t.payload);case re:return Tu({},e,{accessToken:Object(u.get)(t,"accessToken")});case ae:return Tu({},e,{currentChatId:Object(u.get)(t,"chatId")});case ce:return Tu({},e,{currentChatId:void 0,previousChatId:e.currentChatId});case oe:return Tu({},e,{state:Object(u.get)(t,"state")});case"VISITOR/LOAD_VISITOR_FROM_STORAGE":return Tu({},e,{accessToken:Object(u.get)(t,"accessToken"),currentChatId:Object(u.get)(t,"currentChatId"),id:Object(u.get)(t,"id"),state:Object(u.get)(t,"state",ge.PASSIVE),customPrechatData:Object(u.get)(t,"customPrechatData"),sound:Object(u.get)(t,"sound","on")},Object(u.get)(t,"name")&&{name:Object(u.get)(t,"name")},{},Object(u.get)(t,"email")&&{email:Object(u.get)(t,"email")},{},Object(u.get)(t,"phoneNumber")&&{phoneNumber:Object(u.get)(t,"phoneNumber")},{},Object(u.get)(t,"department")&&{department:Object(u.get)(t,"department")});case ie:return Tu({},e,{lastChatWith:Object(u.get)(t,"payload.agentId")});case se:return Tu({},e,{lastChatAt:Object(u.get)(t,"payload.timestamp")});case ue:t.type;var n=wu(t,["type"]);return Tu({},e,{},n);case"VISITOR/FETCH_INTEGRATIONS_SUCCESS":return Tu({},e,{integrations:t.payload});case"VISITOR/UPDATE_CUSTOM_PRECHAT_DATA":return Tu({},e,{customPrechatData:t.payload});case pe:return ku;case de:return Tu({},e,{sound:"off"});case be:return Tu({},e,{sound:"on"});case me:return Tu({},e,{blocked:!0});case fe:return Tu({},e,{id:Object(u.get)(t,"payload.visitorId")});case"VISITOR/SET_VISITOR_FIRST_MESSAGE":return Tu({},e,{firstMessage:t.payload});default:return e}},chats:function(){var e,t,n,r,a,c,o,i,s,p,m,f,d,b,g,O,h,v,x,j,y,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tl,w=arguments.length>1?arguments[1]:void 0,I=w.payload;switch(w.type){case Bs:return n=Object(u.get)(w,"tempMessageId"),[].concat(el(E),[{id:Object(u.get)(w,"tempChatId"),tempChatId:Object(u.get)(w,"tempChatId"),messageIds:[n],messages:{by:"visitor",id:n,text:Object(u.get)(w,"text"),state:mt}}]);case"CONV_FORM/ADD_DUMMY_CHAT":return[].concat(el(E),[{id:Object(u.get)(w,"tempChatId"),tempChatId:Object(u.get)(w,"tempChatId"),messages:{},messageIds:[]}]);case Ba:return[].concat(el(E),[{id:Object(u.get)(w,"payload.id"),departmentId:Object(u.get)(w,"payload.departmentId"),messages:Object(u.get)(w,"payload.messages"),messageIds:Object(u.get)(w,"payload.messageIds"),lastAgentMessageId:Object(u.get)(w,"payload.lastAgentMessageId"),lastVisitorMessageId:Object(u.get)(w,"payload.lastVisitorMessageId"),lastTranslatedVisitorMessageId:Object(u.get)(w,"payload.lastTranslatedVisitorMessageId"),lastTranslatedAgentMessageId:Object(u.get)(w,"payload.lastTranslatedAgentMessageId"),isTranslating:Object(u.get)(w,"payload.isTranslating"),showAgentTranslatedText:Object(u.get)(w,"payload.showAgentTranslatedText"),showVisitorTranslatedText:Object(u.get)(w,"payload.showVisitorTranslatedText"),googleTranslationLogoShownOnce:Object(u.get)(w,"payload.googleTranslationLogoShownOnce")}]);case"DELETE_CHAT":return e=l.a.get(I,"chatId"),l.a.filter(E,(function(t){return t.id!==e}));case"DELETE_CHATS":return[];case Gs:return t=Object(u.get)(w,"tempChatId"),e=Object(u.get)(w,"chatId"),n=Object(u.get)(w,"tempMessageId"),c=Object(u.get)(w,"departmentId"),E.map((function(n){if(n.tempChatId===t){n.tempChatId;return Qu({},$u(n,["tempChatId"]),{id:e,departmentId:c})}return n}));case"CONV_FORM/ADD_VISITOR_MESSAGE":return e=Object(u.get)(w,"chatId"),n=Object(u.get)(w,"tempMessageId"),r=Object(u.get)(w,"text"),h=Object(u.get)(w,"replyFor"),g=Object(u.get)(w,"messageType"),E.map((function(t){return t.id===e?(x=t.messageIds||[],v=Qu({},t.messages,Zu({},n,{by:"visitor",type:"text",id:n,text:r,state:mt,replyFor:h})),h&&(v[h]=Qu({},v[h],{replied:!0})),Qu({},t,{lastVisitorMessageId:n,messageIds:[].concat(el(x),[n]),messages:v})):t}));case"CONV_FORM/ADD_VISITOR_ATTACHMENT":return e=Object(u.get)(w,"chatId"),n=Object(u.get)(w,"tempMessageId"),b=Object(u.get)(w,"attachment"),g=Object(u.get)(w,"messageType"),E.map((function(t){return t.id===e?Qu({},t,{lastVisitorMessageId:n,messageIds:[].concat(el(t.messageIds),[n]),messages:Qu({},t.messages,Zu({},n,{by:"visitor",type:g,id:n,attachment:b,state:mt}))}):t}));case qs:return e=Object(u.get)(w,"chatId"),n=Object(u.get)(w,"tempMessageId"),a=Object(u.get)(w,"messageId"),s=Object(u.get)(w,"timestamp"),p=Ju()(s),E.map((function(t){return e===t.id?(x=t.messageIds,j=t.messages[n],v=Qu({},t.messages,Zu({},a,Qu({},j,{id:a,state:ft,timestamp:s,shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))),Qu({},t,{messageIds:x.map((function(e){return e===n?a:e})),messages:l.a.omit(v,[n]),lastVisitorMessageId:a})):t}));case"CHAT_API/SEND_VISITOR_MESSAGE_TO_SERVER_FAILED":return e=Object(u.get)(w,"chatId"),a=Object(u.get)(w,"tempMessageId"),E.map((function(t){return e===t.id?(x=t.messageIds,j=t.messages[a],v=Qu({},t.messages,Zu({},a,Qu({},j,{state:dt}))),Qu({},t,{messages:v})):t}));case _u:return e=Object(u.get)(w,"chatId"),o=Object(u.get)(w,"agentId"),i=Object(u.get)(w,"agentName"),a=Object(zu.s4)(),y=Object(u.get)(w,"isBot"),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:Object(zu.s4)(),by:"system",text:"".concat(i," ").concat(_r.t("label.agentJoinedInfoText")),agentId:o,agentName:i,isBot:y}))}):t}));case Wa:return e=Object(u.get)(w,"payload.chatId"),a=Object(zu.s4)(),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:Object(zu.s4)(),by:"system",text:_r.t("label.systemMessageAfterEndingAConversation")}))}):t}));case Cu:return e=Object(u.get)(w,"chatId"),a=Object(zu.s4)(),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:Object(zu.s4)(),by:"system",text:_r.t("label.systemMessageAfterEndingAConversation")}))}):t}));case"NOTIF/CHAT_LEFT_BY_AGENT":return e=Object(u.get)(w,"payload.chatId"),i=Object(u.get)(w,"payload.agentName"),a=Object(zu.s4)(),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:Object(zu.s4)(),by:"system",text:"".concat(i," ").concat(_r.t("label.agentLeftConversation"))}))}):t}));case Su:return e=Object(u.get)(w,"chatId"),o=Object(u.get)(w,"agentId"),i=Object(u.get)(w,"agentName"),r=Object(u.get)(w,"text"),a=Object(u.get)(w,"messageId"),s=Object(u.get)(w,"timestamp"),p=Ju()(s),y=Object(u.get)(w,"isBot",!1),E.map((function(t){return t.id===e?Qu({},t,{lastAgentMessageId:a,messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"agent",type:"text",text:r,agentId:o,agentName:i,isBot:y,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))}):t}));case Fu:return e=I.chatId,o=I.agentId,i=I.agentName,r=I.text,a=I.messageId,E.map((function(t){return t.id===e?Qu({},t,{lastAgentMessageId:a,messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"agent",type:"text",text:r,agentId:o,agentName:i,isProactiveMessage:!0,status:I.status,timestamp:Ju.a.unix(I.timestamp),shortTimestamp:Ju.a.unix(I.timestamp).format("h:mm a"),longTimestamp:Ju.a.unix(I.timestamp).format("lll")}))}):t}));case"NOTIF/AGENT_SPECIAL_MESSAGE":return e=Object(u.get)(I,"chatId"),a=Object(u.get)(I,"messageId"),o=Object(u.get)(I,"agentId"),i=Object(u.get)(I,"agentName"),O=Object(u.get)(I,"type"),r=Object(u.get)(I,"text"),y=Object(u.get)(I,"isBot",!1),s=Object(u.get)(w,"timestamp"),p=Ju()(s),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"agent",type:O,text:r,agentId:o,agentName:i,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll"),isBot:y}))}):t}));case"NOTIF/CHAT_VISITOR_MESSAGE":return e=Object(u.get)(w,"chatId"),m=Object(u.get)(w,"visitorId"),f=Object(u.get)(w,"visitorName"),r=Object(u.get)(w,"text"),a=Object(u.get)(w,"messageId"),s=Object(u.get)(w,"timestamp"),p=Ju()(s),E.map((function(t){return t.id===e?Qu({},t,{lastVisitorMessageId:a,messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"visitor",type:"text",text:r,visitorId:m,visitorName:f,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))}):t}));case"NOTIF/CHAT_ADDED_TO_QUEUE":return e=Object(u.get)(w,"chatId"),s=Object(u.get)(w,"timestamp"),p=Ju()(s),d=Object(u.get)(w,"queueWelcomeMessage"),a=Object(zu.s4)(),E.map((function(t){return t.id===e?Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"agent",type:"text",text:d,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))}):t}));case Pu:return e=w.chatId,a=w.messageId,o=w.agentId,i=w.agentName,b=w.attachment,s=Object(u.get)(w,"timestamp"),p=Ju()(s),E.map((function(t){return t.id===e?Qu({},t,{lastAgentMessageId:a,messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"agent",type:b.type,attachment:b,agentId:o,agentName:i,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))}):t}));case"NOTIF/CHAT_VISITOR_ATTACHMENT":return e=w.chatId,a=w.messageId,m=w.visitorId,f=w.visitorName,b=w.attachment,s=Object(u.get)(w,"timestamp"),p=Ju()(s),E.map((function(t){return t.id===e?Qu({},t,{lastVisitorMessageId:a,messageIds:[].concat(el(t.messageIds),[a]),messages:Qu({},t.messages,Zu({},a,{id:a,by:"visitor",type:b.type,attachment:b,visitorId:m,visitorName:f,timestamp:p.unix(),shortTimestamp:p.format("h:mm a"),longTimestamp:p.format("lll")}))}):t}));case"SHOW_TRANSLATED_AGENT_MESSAGE":return e=Object(u.get)(w,"payload.chatId"),E.map((function(t){return t.id===e?Qu({},t,{showAgentTranslatedText:Object(u.get)(w,"payload.showTranslated")}):t}));case"SHOW_TRANSLATED_VISITOR_MESSAGE":return e=Object(u.get)(w,"payload.chatId"),E.map((function(t){return t.id===e?Qu({},t,{showVisitorTranslatedText:Object(u.get)(w,"payload.showTranslated")}):t}));case"STARTED_CHAT_TRANSLATION":return e=Object(u.get)(w,"payload.chatId"),E.map((function(t){return t.id===e?(a=Object(zu.s4)(),v=t.messages,x=t.messageIds,t.googleTranslationLogoShownOnce||(x=[].concat(el(t.messageIds),[a]),v=Qu({},t.messages,Zu({},a,{id:a,by:"vendor",type:"google",text:"Translated By Google"}))),Qu({},t,{showAgentTranslatedText:!!l.a.isNil(t.showAgentTranslatedText)||t.showAgentTranslatedText,googleTranslationLogoShownOnce:!!l.a.isNil(t.googleTranslationLogoShownOnce)||t.googleTranslationLogoShownOnce,messageIds:x,messages:v})):t}));case"ADD_TRANSLATED_AGENT_MESSAGE":return e=Object(u.get)(w,"payload.chatId"),a=Object(u.get)(w,"payload.messageId"),E.map((function(t){return t.id===e?Qu({},t,{lastTranslatedAgentMessageId:t.lastAgentMessageId===a?a:t.lastTranslatedAgentMessageId,showAgentTranslatedText:!!l.a.isNil(t.showAgentTranslatedText)||t.showAgentTranslatedText,messages:Qu({},t.messages,Zu({},a,Qu({},t.messages[a],{translatedText:Object(u.get)(w,"payload.translatedText")})))}):t}));case"ADD_TRANSLATED_VISITOR_MESSAGE":return e=Object(u.get)(w,"payload.chatId"),a=Object(u.get)(w,"payload.messageId"),E.map((function(t){return t.id===e?Qu({},t,{lastTranslatedVisitorMessageId:t.lastVisitorMessageId===a?a:t.lastTranslatedVisitorMessageId,messages:Qu({},t.messages,Zu({},a,Qu({},t.messages[a],{translatedText:Object(u.get)(w,"payload.translatedText")})))}):t}));case Du:return e=Object(u.get)(w,"payload.chatId"),a=Object(u.get)(w,"payload.messageId"),E.map((function(t){if(t.id===e){var n=!1;v=Object.assign({},t.messages);var r=!0,c=!1,o=void 0;try{for(var i,s=t.messageIds[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;if("seen"!==(j=Object.assign({},v[u])).status){if(n&&u!==a)break;j.status="seen",u===a&&(n=!0),v[u]=j}}}catch(e){c=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(c)throw o}}return Qu({},t,{messages:v})}return t}));case"CONV_FORM/MARK_SPECIAL_MESSAGES_REPLIED":return e=Object(u.get)(w,"payload.chatId"),E.map((function(t){if(t.id===e){x=t.messageIds||[],v=Object.assign({},t.messages);for(var n=t.messageIds.length;n>=0;n--)if(j=Object.assign({},v[t.messageIds[n]]),l.a.includes(Xu,j.type)){v[t.messageIds[n]].replied=!0;break}return Qu({},t,{messageIds:[].concat(el(t.messageIds),[a]),messages:el(t.messages)})}return t}));default:return E}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONV_FORM/OPEN_CONFIRM_END_CHAT_MODAL":return rl({},Object(u.mapValues)(e,(function(){return!1})),{isEndChatConfirmationOpen:!0});case"RATINGS/SHOW_RATINGS_FORM":return rl({},Object(u.mapValues)(e,(function(){return!1})),{isRatingsFromOpen:!0});case"RATINGS/CLOSE_RATINGS_FORM":return rl({},Object(u.mapValues)(e,(function(){return!1})),{isChatAgainBannerShown:!0});case xc:return rl({},Object(u.mapValues)(e,(function(){return!1})),{showOfflineFormSubmitResponseModal:!0});case"OPEN_EDIT_VISITOR_INFO_POPUP":return rl({},Object(u.mapValues)(e,(function(){return!1})),{showEditVisitorInfoPopup:!0});case"INTEGRATIONS/SHOW_EMAIL_SUBSCRIPTION_FORM":return rl({},Object(u.mapValues)(e,(function(){return!1})),{showEmailSubscriptionForm:!0});case"INTEGRATIONS/HIDE_EMAIL_SUBSCRIPTION_FORM":return rl({},Object(u.mapValues)(e,(function(){return!1})),{isChatAgainBannerShown:!0});case"CONV_FORM/SHOW_CHAT_AGAIN_BANNER":return rl({},Object(u.mapValues)(e,(function(){return!1})),{submitRatingsSuccess:e.submitRatingsSuccess,isChatAgainBannerShown:!0});case"ATTACHMENTS/SHOW_FILE_UPLOAD":return rl({},Object(u.mapValues)(e,(function(){return!1})),{showFileUpload:!0});case"AGENT_REQUESTED_VISITOR_DETAILS":return rl({},Object(u.mapValues)(e,(function(){return!1})),{showVisitorInfoRequestConfirmation:!0});case"SHOW_EMAIL_TRANSCRIPT_MODAL":return rl({},Object(u.mapValues)(e,(function(){return!1})),{isChatAgainBannerShown:e.isChatAgainBannerShown,showEmailTranscript:!0});case"ATTACHMENTS/CLOSE_FILE_UPLOAD":return rl({},e,{showFileUpload:!1});case"RATINGS/SUBMIT_RATINGS_SUCCESS":return rl({},e,{submitRatingsSuccess:!0});case"HIDE_EMAIL_TRANSCRIPT_MODAL":return rl({},e,{showEmailTranscript:!1});case"VISITOR_DECLINED_AGENT_REQUEST_VISITOR_DETAILS":case"UPLOAD_START":case"CLOSE_EDIT_VISITOR_INFO_POPUP":case"OFFLINE_FORM/CLOSE_OFFLINE_FORM_RESPONSE_MODAL":case"CONV_FORM/CLOSE_CONFIRM_END_CHAT_MODAL":case zr:case za:return rl({},Object(u.mapValues)(e,(function(){return!1})));case"CONV_FORM/HIDE_CHAT_AGAIN_BANNER":case Fu:return rl({},e,{isChatAgainBannerShown:!1});default:return e}},conversationForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ul,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONV_FORM/SET_VIEW_REPLY_TEXT":return il({},e,{viewReplyText:Object(u.get)(t,"value")});case Wa:return il({},e,{viewReplyText:""});case"CONV_FORM/SHOW_IS_TYPING":return il({},e,{isTyping:!0});case"CONV_FORM/REMOVE_IS_TYPING":return il({},e,{isTyping:!1});case"SHOW_DEFAULT_QUICK_REPLIES":return il({},e,{canShowDefaultQuickReplies:!0});case"HIDE_DEFAULT_QUICK_REPLIES":return il({},e,{canShowDefaultQuickReplies:!1});default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ol,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case F:var r=Object(u.get)(t,"responseJson.widget.departments",[]),a=Object(u.get)(t,"responseJson.widget.prechat"),c=Object(u.get)(t,"responseJson.enabledPrechatFields",[]),o=c.filter((function(e){return e.canShowInOfflineForm})),i=pl(a,r,c),s=Object(u.get)(t,"responseJson.widget.offline.phoneNumber.enabled",!1),l=ml({showPhoneInOfflineForm:s,offlineEnabledCustomPrechatFields:o,departments:r,prechat:a});return bl({},e,{prechat:bl({},e.prechat,{},i),offline:bl({},e.offline,{},l),editVisitorInfo:bl({},e.editVisitorInfo,{},fl(a)),customPrechatFields:c});case"PRECHAT_FORM/UPDATE_DATE":return bl({},e,{prechat:bl({},e.prechat,{keyStrokeData:bl({},e.prechat.keyStrokeData,{},t.payload)})});case"PRECHAT_FORM/UPDATE_PRECHAT_FORM_ERROR_DATA":var p=e.prechat.errors,m=Object.keys(n)[0];return p=n[m].isValid?Object(u.omit)(p,[m]):bl({},e.prechat.errors,{},t.payload),bl({},e,{prechat:bl({},e.prechat,{errors:p})});case"OFFLINE_FORM/UPDATE_OFFLINE_FORM_DATA":return bl({},e,{offline:bl({},e.offline,{keyStrokeData:bl({},e.offline.keyStrokeData,{},t.payload)})});case"OFFLINE_FORM/UPDATE_OFFLINE_FORM_ERROR_DATA":var f=e.offline.errors,d=Object.keys(n)[0];return f=n[d].isValid?Object(u.omit)(f,[d]):bl({},e.offline.errors,{},t.payload),bl({},e,{offline:bl({},e.offline,{errors:f})});case"UPDATE_EDIT_VISITOR_INFO_FORM_DATA":return bl({},e,{editVisitorInfo:bl({},e.editVisitorInfo,{keyStrokeData:bl({},e.editVisitorInfo.keyStrokeData,{},t.payload)})});case"CLEAR_EDIT_VISITOR_INFO_FORM_DATA":return bl({},e,{editVisitorInfo:bl({},e.editVisitorInfo,{keyStrokeData:{},errors:{}})});case"UPDATE_EDIT_VISITOR_INFO_ERROR_DATA":return bl({},e,{editVisitorInfo:bl({},e.editVisitorInfo,{errors:bl({},e.editVisitorInfo.errors,{},t.payload)})});case Kc:return bl({},e,{prechat:bl({},e.prechat,{keyStrokeData:bl({},e.prechat.keyStrokeData,{},n)})});case vc:return bl({},e,{offline:bl({},e.offline,{keyStrokeData:bl({},e.offline.keyStrokeData,{},n)})});case"PRECHAT_FORM/SAVE_PRECHAT_MESSAGEID":return bl({},e,{prechat:bl({},e.prechat,{messageId:t.payload})});case"PRECHAT_FORM/DELETE_PRECHAT_MESSAGEID":return bl({},e,{prechat:bl({},e.prechat,{messageId:null})});default:return e}},agent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return yl({},e,{showAgentName:Object(u.get)(t,"responseJson.widget.appearance.showAgentName",!0),showAgentPicture:Object(u.get)(t,"responseJson.widget.appearance.showAgentPicture",!0)});case _u:var n={agentId:Object(u.get)(t,"agentId",""),agentName:Object(u.get)(t,"agentName",""),profilePictureUrl:Object(u.get)(t,"agentProfilePicUrl",""),isBot:Object(u.get)(t,"isBot",!1)},r=e.joinedAgents.filter((function(e){return e.agentId!==n.agentId}));return yl({},e,{joinedAgents:[].concat(xl(r),[n]),agentId:n.agentId,agentName:n.agentName,profilePictureUrl:n.profilePictureUrl,isBot:n.isBot});case qa:return yl({},e,{previousAgent:{agentId:e.agentId,agentName:e.agentName},agentId:void 0,agentName:void 0,profilePictureUrl:void 0});case"AGENT/UPDATE_AGENT_INFO":return yl({},e,{},t.payload);case"AGENT/UPDATE_JOINED_AGENTS":return yl({},e,{joinedAgents:Object(u.get)(t,"payload",[])});default:return e}},attachments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPLOAD_START":return Tl({},e,{showProgressBar:!0,totalFileCount:t.fileCount});case"HIDE_ATTACHMENT_STATUS_BAR":return Tl({},e,{showProgressBar:!1,validationErrors:null});case"RESET_FILE_UPLOAD":return Tl({},e,{},kl);case"UPLOAD_CANCELLED":return Tl({},e,{uploadCancelled:!0});case"UPLOAD_FAILED":return Tl({},e,{uploadFailed:!0});case"UPDATE_FILE_UPLOAD_PERCENT":return Tl({},e,{uploadPercent:e.uploadPercent+t.data/e.totalFileCount});case"UPLOAD_COMPLETE":case"HIDE_PROGRESS_BAR":return Tl({},e,{},kl);case"UPLOAD_FILE_SUCCESS":return Tl({},e,{uploadedFileCount:++e.uploadedFileCount,uploadPercent:e.uploadedFileCount/e.totalFileCount*100});case"SET_FILE_VALIDATION_ERRORS":return Tl({},e,{validationErrors:t.errors});case"RESET_FILE_VALIDATION_ERRORS":return Tl({},e,{validationErrors:null});default:return e}},triggeredChat:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cl,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case F:return e=Object(u.get)(r,"responseJson.proactive_chats",[]),e=Object(u.map)(e,(function(e){return Sl({id:e.fieldId||Object(zu.s4)()},e)})),Sl({},n,{triggeredChats:Object(u.keyBy)(e,"id")});case Yn:return t=Object(u.get)(r,"payload.triggeredChatId"),Sl({},n,{triggeredChats:Sl({},n.triggeredChats,Al({},t,Sl({},n.triggeredChats[t],{satisfiedAt:Object(u.get)(r,"payload.satisfiedAt")}))),activeTriggeredChat:{triggeredChatId:t,name:Object(u.get)(r,"payload.name"),message:Object(u.get)(r,"payload.message"),satisfiedAt:Object(u.get)(r,"payload.satisfiedAt"),availableAgents:Object(u.get)(r,"payload.availableAgents",[]),departmentChoice:Object(u.get)(r,"payload.departmentChoice"),deptChatId:Object(u.get)(r,"payload.deptChatId")}});case Qn:return Sl({},n,{activeTriggeredChat:void 0});case"SDK_ENABLE_TRIGGERED_CHATS":return Sl({},n,{sdkIsTriggeredChatsEnabled:!0});case"SDK_DISABLE_TRIGGERED_CHATS":return Sl({},n,{sdkIsTriggeredChatsEnabled:!1});default:return n}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kl,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=!1;switch(t.type){case"PAGE/SET_CURRENT_PAGE_STATS":return ql({},e,{currentPage:l.a.get(t,"payload",{})});case F:return ql({},e,{ip:l.a.get(t,"responseJson.ip")});case Nl:return ql({},e,{unReadMessages:[].concat(Ul(e.unReadMessages),[n.messageId])});case Du:return ql({},e,{unReadMessages:e.unReadMessages.filter((function(e){return!(!r||e===n.messageId)||(e===n.messageId&&(r=!0),!1)}))});case Kr:return{unReadMessages:e.unReadMessages.filter((function(e){return l.a.includes(n.engagedMessages,e)}))};case Pl:return ql({},e,{unReadMessages:[]});case Ll:return ql({},e,{isWindowActive:!0});case Vl:return ql({},e,{isWindowActive:!1});case pe:return ql({},Kl,{currentPage:e.currentPage});default:return e}},visitorInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cp,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=[];switch(t.type){case Xl:return rp({},e,{},n);case pe:return cp;case Kr:return rp({},e,{tempChatId:null,chat_status:bt.CHAT_DISMISSED});case"ADD_ENGAGE_MESSAGE":return r=e.engage_messages||[],rp({},e,{engage_messages:[].concat(tp(r),[{agent_id:n.agent,text:n.text,message_id:n.message_id,timestamp:n.timestamp}])});case"ADD_PROACTIVE_TEMP_CHAT_ID":return rp({},e,{tempChatId:n});case _u:case Cu:case Ua:return rp({},e,{tempChatId:null});case Jr:return rp({},e,{badge_status:Lt});case"RESTORE_PROACTIVE_CHAT_STATE":return rp({},e,{},n);default:return e}},customField:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case up:return mp({},e,{customFields:mp({},e.customFields,{},Object(u.get)(t,"customFields"))});case lp:var n=Object(u.get)(t,"customFields",[]),r={};return Object(u.forEach)(n,(function(e){r[e]=void 0})),mp({},e,{customFields:mp({},e.customFields,{},r)});case"LOAD_CUSTOM_FIELD_FROM_STORAGE":return mp({},e,{customFields:mp({},e.customFields,{},Object(u.get)(t,"customFields"))});case F:var a=Object(u.get)(t,"responseJson.customFields"),c=Object(u.keyBy)(a,"label");return mp({},e,{customFieldsInfo:mp({},e.customFieldsInfo,{},c)});default:return e}},emailTranscript:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hp,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case No:return gp({},e,{sendTranscriptSuccess:!0});case"HIDE_EMAIL_TRANSCRIPT_MODAL":return gp({},e,{sendTranscriptSuccess:!1});case"SET_EMAIL_TRANSCRIPT_STATE":return gp({},e,{state:t.payload});default:return e}}}),xp=n("lXDr"),jp=n("Zfag"),yp=n("xHiZ"),Ep=n.n(yp),wp=n("7eJk"),Ip=n.n(wp),Tp=n("jeAe"),Rp=n.n(Tp),kp=n("cZ9t"),_p=n.n(kp),Sp=n("s994"),Ap=n.n(Sp),Cp=n("zjcW"),Np=n.n(Cp),Pp=function(e,t){var n=function(t,n){return l.a.get(e,t,n)},r=Dp(n("events"),e,t),a=r.messages,c=r.messageIds,o=r.lastTranslatedAgentMessageId,i=r.lastTranslatedVisitorMessageId,s=r.lastAgentMessageId,u=r.lastVisitorMessageId,p=r.googleTranslationLogoShownOnce,m=e.isTranslating;return{id:n("id"),departmentId:n("department"),messages:a,messageIds:c,lastTranslatedAgentMessageId:o,lastTranslatedVisitorMessageId:i,lastAgentMessageId:s,lastVisitorMessageId:u,isTranslating:m,showAgentTranslatedText:o,showVisitorTranslatedText:!1,googleTranslationLogoShownOnce:p}},Dp=function(){var e,t,n,r,a,c,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0,p=[],m={},f=u.showAgentName,d=!1,b=s.readTill;function g(e){return b&&!d?(e===b&&(d=!0),"seen"):"received"}var O=!1;return i.forEach((function(i){var s=l.a.get(i,"data",{}),u=l.a.get(s,"messageId",i.id),d={};switch(i.type){case"ChatVisitorMessage":e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"text",text:s.text,visitorName:s.visitorName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u;break;case"ChatVisitorSpecialMessage":switch(s.type){case"PrechatForm:Response":case"VisitorDataFromIntegration":return}e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"text",text:s.text,visitorName:s.visitorName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u,s.replyFor&&(m[s.replyFor].replied=!0);break;case"ChatAgentMessage":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"text",text:s.text,agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,status:g(s.messageId),isBot:s.isBot},c=u;break;case"AgentSpecialMessage":e=i.timestamp,t=Ju()(e),d={id:s.messageId,by:"agent",type:s.type,text:s.text?JSON.parse(s.text):"",agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,isBot:s.isBot};break;case"ChatProactiveAgentMessage":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent_proactive_message",type:"text",text:s.text,agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0};break;case"ChatTriggeredMessage":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent_triggered_message",type:"text",text:s.text,agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0};break;case"ChatJoinedByAgent":case"ChatAcceptedByAgent":n=f?s.agentName:_r.t("label.agentName"),e=i.timestamp,t=Ju()(e),d={id:u,by:"system",text:"".concat(n," ").concat(_r.t("label.agentJoinedInfoText")),agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),isSent:!0,isBot:s.isBot};break;case"ChatLeftByAgent":n=f?s.agentName:_r.t("label.agentName"),e=i.timestamp,t=Ju()(e),d={id:u,by:"system",text:"".concat(n," ").concat(_r.t("label.agentLeftConversation")),agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),isSent:!0};break;case"ChatEndedByAgent":e=i.timestamp,t=Ju()(e),d={id:u,by:"system",text:_r.t("label.systemMessageAfterEndingAConversation"),agentId:s.agentId,agentName:s.agentName,timestamp:t.unix(),isSent:!0};break;case"ChatAddedToQueue":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"text",text:s.queueWelcomeMessage,timestamp:t.unix(),isSent:!0};break;case"ImageSentByVisitor":e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"image",attachment:Object.assign({},s,{type:"image"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u;break;case"FileSentByVisitor":e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"file",attachment:Object.assign({},s,{type:"file"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u;break;case"AudioSentByVisitor":e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"audio",attachment:Object.assign({},s,{type:"audio"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u;break;case"VideoSentByVisitor":e=i.timestamp,t=Ju()(e),d={id:u,by:"visitor",type:"video",attachment:Object.assign({},s,{type:"video"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0},o=u;break;case"ImageSentByAgent":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"image",attachment:Object.assign({},s,{type:"image"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,status:g(s.messageId)},o=u;break;case"FileSentByAgent":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"file",attachment:Object.assign({},s,{type:"file"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,status:g(s.messageId)},c=u;break;case"AudioSentByAgent":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"audio",attachment:Object.assign({},s,{type:"audio"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,status:g(s.messageId)},c=u;break;case"VideoSentByAgent":e=i.timestamp,t=Ju()(e),d={id:u,by:"agent",type:"video",attachment:Object.assign({},s,{type:"video"}),timestamp:t.unix(),shortTimestamp:t.format("h:mm a"),longTimestamp:t.format("lll"),isSent:!0,status:g(s.messageId)},c=u;break;case"TranslatedAgentMessage":return(d=m[s.originalMessageId])?(d.translatedText=s.translatedText,void(r=s.originalMessageId===c?s.originalMessageId:r)):console.warn("Original Message not found");case"TranslatedVisitorMessage":return(d=m[s.originalMessageId])?(d.translatedText=s.translatedText,void(a=s.originalMessageId===o?s.originalMessageId:a)):console.warn("Original Message not found");case"ChatTranslationStartedByAgent":if(O)return;O=!0,d={id:u,by:"vendor",type:"google",text:"Translated By Google"}}l.a.isEmpty(d)||(p.push(u),m[u]=d)})),{messages:m,messageIds:p,lastTranslatedAgentMessageId:r,lastTranslatedVisitorMessageId:a,lastAgentMessageId:c,lastVisitorMessageId:o,googleTranslationLogoShownOnce:O}},Fp=n("joUK"),Mp=n.n(Fp),Lp=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Gp,t);case 2:return e.next=4,Object(jp.h)(ip({type:up},{customFields:t}));case 4:case"end":return e.stop()}}),e)})),Vp=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(ip({type:lp},{customFields:t}));case 2:case"end":return e.stop()}}),e)})),Hp=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(ut);case 2:return t=e.sent,n={customFields:t},e.next=6,Object(jp.c)([Ib,Ib.setItem],"custom-fields",JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})),Bp=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)([Ib,Ib.getItem],"custom-fields");case 2:return t=e.sent,e.next=5,Object(jp.c)([Np.a,Np.a.parseSafe],t);case 5:return n=e.sent,e.next=8,Object(jp.h)(ip({type:"LOAD_CUSTOM_FIELD_FROM_STORAGE"},n));case 8:case"end":return e.stop()}}),e)})),Gp=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=8;break}return n=e.t1.value,r=t[n],e.next=6,Object(jp.c)(Up,n,r);case 6:e.next=1;break;case 8:case"end":return e.stop()}}),e)})),Up=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(pt,t);case 2:if(r=e.sent){e.next=5;break}throw new Rp.a("CUSTOM_FIELD_NOT_FOUND",'"'.concat(t,'" custom field is not found. Please request your account admin to create custom field "').concat(t,'"'));case 5:if(typeof n===r.type){e.next=7;break}throw new Rp.a("CUSTOM_FIELD_VALUE_NOT_VALID",'"'.concat(t,'" custom field value is not of type ').concat(r.type));case 7:case"end":return e.stop()}}),e)})),Wp=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(ut);case 2:t=e.sent,n=[],e.t0=regeneratorRuntime.keys(t);case 5:if((e.t1=e.t0()).done){e.next=19;break}return r=e.t1.value,a=t[r],e.prev=8,e.next=11,Object(jp.c)(Up,r,a);case 11:e.next=17;break;case 13:e.prev=13,e.t2=e.catch(8),console.error('Existing custom field "'.concat(r,'" is invalid. So unsetting it. Invalid because:'),e.t2),n.push(r);case 17:e.next=5;break;case 19:if(!n.length){e.next=22;break}return e.next=22,Object(jp.c)(Vp,n);case 22:case"end":return e.stop()}}),e,null,[[8,13]])})),qp=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)([Ib,Ib.getItem],"visitor");case 2:return t=e.sent,e.next=5,Object(jp.c)([Np.a,Np.a.parseSafe],t);case 5:return n=e.sent,e.next=8,Object(jp.h)(je(n));case 8:case"end":return e.stop()}}),e)})),zp=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,i,s,u,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.next=3,Object(jp.l)(We);case 3:return n=e.sent,e.next=6,Object(jp.l)(sn);case 6:return r=e.sent,e.next=9,Object(jp.l)(un);case 9:return a=e.sent,e.next=12,Object(jp.l)(ln);case 12:return c=e.sent,e.next=15,Object(jp.l)(pn);case 15:return o=e.sent,e.next=18,Object(jp.l)(mn);case 18:return i=e.sent,e.next=21,Object(jp.l)(fn);case 21:return s=e.sent,e.next=24,Object(jp.l)(dn);case 24:return u=e.sent,e.next=27,Object(jp.l)(bn);case 27:return l=e.sent,e.next=30,Object(jp.l)(gr,n.department);case 30:return p=e.sent,r&&i&&!n.name?t=!1:a&&s&&!n.email?t=!1:c&&u&&!n.phoneNumber?t=!1:o&&l&&!n.department?t=!1:o&&!p&&(t=!1),e.abrupt("return",t);case 33:case"end":return e.stop()}}),e)})),Kp=regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(We);case 2:return n=e.sent,r=Object.assign({},n,t),e.next=6,Object(jp.l)(Ye);case 6:if(!e.sent){e.next=17;break}return e.next=10,Object(jp.l)(gn);case 10:if("connected"!==e.sent){e.next=17;break}if(!((a=Jp(n,r)).length>0)){e.next=17;break}return c=Object(u.pick)(r,a),e.next=17,Object(jp.c)(nf,c);case 17:return e.next=19,Object(jp.h)(Oe(r));case 19:case"end":return e.stop()}}),e)})),Jp=function(e,t){var n=Object(u.union)(Object(u.keys)(Object(u.pickBy)(e,u.identity)),Object(u.keys)(Object(u.pickBy)(t,u.identity)));return Object(u.filter)(n,(function(n){return e[n]!==t[n]}))},Xp=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(zp);case 2:return t=e.sent,e.next=5,Object(jp.l)(Vc);case 5:return n=e.sent,e.abrupt("return",t&&n);case 7:case"end":return e.stop()}}),e)})),Yp=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Le);case 2:if(e.sent===t){e.next=10;break}return e.next=6,Object(jp.h)(ee({type:oe},{state:t}));case 6:return(n=t)===ge.WAITING&&(n="waiting_for_agent"),e.next=10,Object(jp.c)(ym,n);case 10:case"end":return e.stop()}}),e)})),Qp=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(st);case 2:if(!e.sent){e.next=6;break}return e.next=6,Object(jp.c)(qm);case 6:return e.next=8,Object(jp.h)({type:pe});case 8:case"end":return e.stop()}}),e)})),Zp=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Kp,t);case 2:case"end":return e.stop()}}),e)})),$p=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Qp);case 2:case"end":return e.stop()}}),e)})),em=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Lp,t);case 2:case"end":return e.stop()}}),e)})),tm=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Vp,t);case 2:case"end":return e.stop()}}),e)})),nm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:nu});case 2:case"end":return e.stop()}}),e)})),rm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:"SDK_HIDE_WIDGET"});case 2:case"end":return e.stop()}}),e)})),am=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:ru});case 2:case"end":return e.stop()}}),e)})),cm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:au});case 2:case"end":return e.stop()}}),e)})),om=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.createElement("style")).setAttribute("type","text/css"),n.innerHTML=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n);case 5:case"end":return e.stop()}}),e)})),im=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(u.isArray)(t)||(t=[]),e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,n=t[r],e.next=7,Object(jp.c)(sm,n);case 7:e.next=2;break;case 9:case"end":return e.stop()}}),e)})),sm=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=document.createElement("link")).setAttribute("href",t),n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),(document.head||document.getElementsByTagName("head")[0]).appendChild(n);case 6:case"end":return e.stop()}}),e)})),um=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:"SDK_ENABLE_TRIGGERED_CHATS"});case 2:case"end":return e.stop()}}),e)})),lm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:"SDK_DISABLE_TRIGGERED_CHATS"});case 2:case"end":return e.stop()}}),e)})),pm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)($n());case 2:case"end":return e.stop()}}),e)})),mm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(qm);case 2:case"end":return e.stop()}}),e)})),fm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"click:badge");case 2:case"end":return e.stop()}}),e)})),dm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"start:chat");case 2:case"end":return e.stop()}}),e)})),bm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"end:chat");case 2:case"end":return e.stop()}}),e)})),gm=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"join:agent",t);case 2:case"end":return e.stop()}}),e)})),Om=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"leave:agent");case 2:case"end":return e.stop()}}),e)})),hm=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"change:agents_availability",t);case 2:case"end":return e.stop()}}),e)})),vm=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"activate:triggered_chat",t);case 2:case"end":return e.stop()}}),e)})),xm=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"received:proactive_message",t);case 2:case"end":return e.stop()}}),e)})),jm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"submitted:rating");case 2:case"end":return e.stop()}}),e)})),ym=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"change:visitor_state",t);case 2:case"end":return e.stop()}}),e)})),Em=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"expand:chatbox");case 2:case"end":return e.stop()}}),e)})),wm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.emit,"collapse:chatbox");case 2:case"end":return e.stop()}}),e)}));function Im(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Tm=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,l,p,m,f,d,b,g,O,h,v,x,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(_t);case 2:return n=e.sent,e.next=5,Object(jp.l)(St);case 5:r=e.sent,h=Object(u.get)(t,"data",{}),e.t0=t.type,e.next="ChatJoinedByAgent"===e.t0?10:"ChatAcceptedByAgent"===e.t0?10:"ChatAgentMessage"===e.t0?16:"ChatVisitorMessage"===e.t0?24:"ChatVisitorSpecialMessage"===e.t0?24:"ChatEndedByVisitor"===e.t0?31:"ChatLeftByAgent"===e.t0?34:"ChatEndedByAgent"===e.t0?40:"AgentIsTyping"===e.t0?43:"ChatInQueue"===e.t0?46:"VideoSentByAgent"===e.t0?49:"AudioSentByAgent"===e.t0?49:"FileSentByAgent"===e.t0?49:"ImageSentByAgent"===e.t0?49:"AgentSpecialMessage"===e.t0?61:"VideoSentByVisitor"===e.t0?64:"AudioSentByVisitor"===e.t0?64:"FileSentByVisitor"===e.t0?64:"ImageSentByVisitor"===e.t0?64:"AgentRequestedDetails"===e.t0?74:"NameUpdatedByAgent"===e.t0?77:"EmailUpdatedByAgent"===e.t0?81:"PhoneUpdatedByAgent"===e.t0?85:"YouWereFoundBlockedAndChatEnded"===e.t0?89:"ChatBlockedAndEndedByAgent"===e.t0?89:"BlockingEnabledAndChatEnded"===e.t0?89:"TranslatedVisitorMessage"===e.t0?104:"TranslatedAgentMessage"===e.t0?107:"ChatTranslationStartedByAgent"===e.t0?110:"ChatMessageRead"===e.t0?113:116;break;case 10:return m={agentId:Object(u.get)(t,"data.agentId"),agentName:n?Object(u.get)(t,"data.agentName"):"Agent",chatId:Object(u.get)(t,"data.chatId"),agentProfilePicUrl:r?Object(u.get)(t,"data.agentProfilePicUrl"):"",isBot:Object(u.get)(t,"data.isBot",!1)},e.next=13,Object(jp.h)(Mu(m));case 13:return e.next=15,Object(jp.c)(gm,{agent:m});case 15:return e.abrupt("break",116);case 16:return c=Object(u.get)(t,"data.messageId"),a=Object(u.get)(t,"data.chatId"),O=Object(u.get)(t,"data.isBot",!1),e.next=21,Object(jp.h)(Vu({agentId:Object(u.get)(t,"data.agentId"),agentName:Object(u.get)(t,"data.agentName"),chatId:a,messageId:c,text:Object(u.get)(t,"data.text"),isBot:O}));case 21:return e.next=23,Object(jp.m)(bf,a,c);case 23:return e.abrupt("break",116);case 24:e.t1=Object(u.get)(t,"data.type"),e.next="VisitorDataFromIntegration"===e.t1?27:28;break;case 27:return e.abrupt("break",30);case 28:return e.next=30,Object(jp.h)(Bu({visitorId:Object(u.get)(t,"data.visitorId"),visitorName:Object(u.get)(t,"data.visitorName"),chatId:Object(u.get)(t,"data.chatId"),messageId:Object(u.get)(t,"data.messageId"),text:Object(u.get)(t,"data.text"),type:Object(u.get)(t,"data.type")}));case 30:return e.abrupt("break",116);case 31:return e.next=33,Object(jp.h)(Gu({chatId:Object(u.get)(t,"data.chatId")}));case 33:return e.abrupt("break",116);case 34:return m={agentId:Object(u.get)(t,"data.agentId"),agentName:n?Object(u.get)(t,"data.agentName"):"Agent",chatId:Object(u.get)(t,"data.chatId")},e.next=37,Object(jp.h)({type:"NOTIF/CHAT_LEFT_BY_AGENT",payload:m});case 37:return e.next=39,Object(jp.c)(Om,{agent:m});case 39:return e.abrupt("break",116);case 40:return e.next=42,Object(jp.h)(Uu({chatId:Object(u.get)(t,"data.chatId")}));case 42:return e.abrupt("break",116);case 43:return e.next=45,Object(jp.h)({type:Nu});case 45:return e.abrupt("break",116);case 46:return e.next=48,Object(jp.h)({type:"NOTIF/CHAT_ADDED_TO_QUEUE",chatId:(E={chatId:Object(u.get)(t,"data.chatId"),queueWelcomeMessage:Object(u.get)(t,"data.queueWelcomeMessage")}).chatId,queueWelcomeMessage:E.queueWelcomeMessage});case 48:return e.abrupt("break",116);case 49:return v=t.data,a=v.chatId,c=v.messageId,i=v.agentId,s=v.agentName,(o=Im(v,["chatId","messageId","agentId","agentName"])).type=t.type.replace(/SentByAgent/,"").toLowerCase(),e.next=58,Object(jp.h)(Wu({chatId:a,messageId:c,agentId:i,agentName:s,attachment:o}));case 58:return e.next=60,Object(jp.m)(bf,a,c);case 60:return e.abrupt("break",116);case 61:return e.next=63,Object(jp.c)(Rm,t);case 63:return e.abrupt("break",116);case 64:return x=t.data,a=x.chatId,c=x.messageId,l=x.visitorId,p=x.visitorName,(o=Im(x,["chatId","messageId","visitorId","visitorName"])).type=t.type.replace(/SentByVisitor/,"").toLowerCase(),e.next=73,Object(jp.h)({type:"NOTIF/CHAT_VISITOR_ATTACHMENT",chatId:(y={chatId:a,messageId:c,visitorId:l,visitorName:p,attachment:o}).chatId,messageId:y.messageId,visitorId:y.visitorId,visitorName:y.visitorName,attachment:y.attachment});case 73:return e.abrupt("break",116);case 74:return e.next=76,Object(jp.h)({type:"AGENT_REQUESTED_VISITOR_DETAILS"});case 76:return e.abrupt("break",116);case 77:return f=Object(u.get)(t,"data.newName"),e.next=80,Object(jp.h)(Oe({name:f}));case 80:return e.abrupt("break",116);case 81:return d=Object(u.get)(t,"data.newEmail"),e.next=84,Object(jp.h)(Oe({email:d}));case 84:return e.abrupt("break",116);case 85:return b=Object(u.get)(t,"data.newPhone"),e.next=88,Object(jp.h)(Oe({phoneNumber:b}));case 88:return e.abrupt("break",116);case 89:return e.next=91,Object(jp.h)(Te());case 91:return e.next=93,Object(jp.h)({type:"AVAILABILITY/STOP_AVAILABILITY_POLL"});case 93:return e.next=95,Object(jp.l)(Le);case 95:if(g=e.sent,!Object(u.includes)([ge.WAITING,ge.CHATTING],g)){e.next=103;break}return e.next=99,Object(jp.l)(Fe);case 99:if(!(j=e.sent)){e.next=103;break}return e.next=103,Object(jp.h)(nc({chatId:j}));case 103:return e.abrupt("break",116);case 104:return e.next=106,Object(jp.h)(yi({chatId:h.chatId,messageId:h.originalMessageId,translatedText:h.translatedText}));case 106:return e.abrupt("break",116);case 107:return e.next=109,Object(jp.h)(Ei({chatId:h.chatId,messageId:h.originalMessageId,translatedText:h.translatedText}));case 109:return e.abrupt("break",116);case 110:return e.next=112,Object(jp.h)({type:"STARTED_CHAT_TRANSLATION",payload:{chatId:{chatId:h.chatId}.chatId}});case 112:return e.abrupt("break",116);case 113:return e.next=115,Object(jp.h)(qu({chatId:h.chatId,messageId:h.messageId}));case 115:return e.abrupt("break",116);case 116:case"end":return e.stop()}var y,E}),e)})),Rm=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=function(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(Hu({chatId:a,messageId:r,type:c,agentId:o,agentName:i,text:s?JSON.parse(s):"",isBot:l}));case 2:case"end":return e.stop()}}),n)},n=regeneratorRuntime.mark(p),r=Object(u.get)(t,"data.messageId",""),a=Object(u.get)(t,"data.chatId",""),c=Object(u.get)(t,"data.type","text"),o=Object(u.get)(t,"data.agentId",""),i=Object(u.get)(t,"data.agentName",""),s=Object(u.get)(t,"data.text",""),l=Object(u.get)(t,"data.isBot",!1),e.t0=c,e.next="PrechatForm"===e.t0?12:"FetchIntegrationDataFromWidget"===e.t0?19:22;break;case 12:return e.next=14,Object(jp.h)(Qc(r));case 14:return e.next=16,Object(jp.h)({type:"PRECHAT_FORM/SHOW_INPROGRESS_CHAT_FORM"});case 16:return e.next=18,Object(jp.c)(p);case 18:return e.abrupt("break",24);case 19:return e.next=21,Object(jp.h)({type:Yi});case 21:return e.abrupt("break",24);case 22:return e.next=24,Object(jp.c)(p);case 24:case"end":return e.stop()}}),e)}));function km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?km(n,!0).forEach((function(t){Sm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):km(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Am(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Cm=null,Nm=!1;Mp.a.urls.api.chatSocketServer("https://c2.happyfoxchat.com"),Mp.a.urls.api.chatWebsocketServer("wss://c2.happyfoxchat.com"),Mp.a.urls.api.vInfoVisitorWebsocketServer("wss://vinfo-v.happyfoxchat.com");var Pm=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,l,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.messageType,r=t.isInitiating,a=t.text,c=t.attachment,o=Am(t,["messageType","isInitiating","text","attachment"]),"text"!==n&&"PrechatForm:Response"!==n){e.next=7;break}s=["proactiveChatReply","preferredAgent","systemFirstMessage","triggeredChatReply","replyFor"],l=Object(u.pick)(o,s),i=_m({text:a,type:n},l),e.next=13;break;case 7:if(!Object(u.includes)(Ta,n)){e.next=13;break}return e.next=10,Object(jp.l)(Le);case 10:p=e.sent,m=Object(u.pick)(c,["name","url","size"]),i=p===ge.PASSIVE?{text:"",attachment:_m({},m,{type:n})}:m;case 13:if(i){e.next=15;break}return e.abrupt("return");case 15:if(!r){e.next=21;break}return e.next=18,Object(jp.k)(1e19,5e3,Fm,i);case 18:return e.abrupt("return",e.sent);case 21:return e.next=23,Object(jp.k)(1e19,5e3,Dm,n,i);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e)})),Dm=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=rf[t]){e.next=3;break}return e.abrupt("return",{err:new Rp.a("UNKNOWN_MESSAGE_TYPE",'Unknown message type "'.concat(t,'"'))});case 3:return e.next=5,Object(jp.l)(Fe);case 5:return a=e.sent,e.prev=6,e.next=9,Object(jp.c)(r,{chatId:a},n);case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),console.error("[ERROR]: Failed to send message to server. Error:",e.t0),!l.a.isObject(e.t0)||!l.a.isString(e.t0.type)){e.next=23;break}if(-1===e.t0.type.toUpperCase().indexOf("VISITOR_IS_BLOCKED")){e.next=23;break}return e.next=20,Object(jp.h)(Te());case 20:return e.next=22,Object(jp.h)({type:"AVAILABILITY/STOP_AVAILABILITY_POLL"});case 22:return e.abrupt("return",{err:e.t0});case 23:throw e.t0;case 24:case"end":return e.stop()}}),e,null,[[6,12]])})),Fm=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,u,p,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(rn);case 2:return n=e.sent,e.next=5,Object(jp.l)(Pe);case 5:return r=e.sent,e.next=8,Object(jp.l)(Et);case 8:return a=e.sent,e.next=11,Object(jp.l)(zn);case 11:if(c=e.sent,o=r||n,!a){e.next=19;break}return e.next=16,Object(jp.l)(sa);case 16:o=e.sent,e.next=28;break;case 19:if(!c){e.next=28;break}return i=l.a.get(t,"triggeredChatReply.triggeredChatId"),e.next=23,Object(jp.l)(Bn,i);case 23:return s=e.sent,u=s.departmentChoice,e.next=27,Object(jp.l)(en,u);case 27:o=e.sent;case 28:return e.prev=28,e.next=31,Object(jp.c)(Mm,{payload:t,departmentChatId:o});case 31:return p=e.sent,e.next=34,Object(jp.l)(ut);case 34:return m=e.sent,e.next=37,Object(jp.c)(uf,m||{});case 37:return e.abrupt("return",{chatId:p.chatId,messageId:p.messageId,departmentId:p.departmentId});case 40:if(e.prev=40,e.t0=e.catch(28),console.error("[ERROR]: Failed to initiate chat. Error:",e.t0),!l.a.isObject(e.t0)||!l.a.isString(e.t0.type)){e.next=55;break}if(-1===(f=e.t0.type.toUpperCase()).indexOf("VISITOR_IS_BLOCKED")){e.next=49;break}return e.next=48,Object(jp.h)(Te());case 48:return e.abrupt("return",{err:e.t0});case 49:if(-1===f.indexOf("NO_AVAILABLE_AGENTS")){e.next=51;break}return e.abrupt("return",{err:e.t0});case 51:if(-1===f.indexOf("ERR_VISITOR_ALREADY_CHATTING")){e.next=55;break}return e.next=54,Object(jp.h)({type:zs});case 54:return e.abrupt("return",{err:e.t0});case 55:throw e.t0;case 56:case"end":return e.stop()}}),e,null,[[28,40]])})),Mm=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=t.departmentChatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.initiateChat],n,{department:r});case 5:return a=e.sent,e.next=8,Object(jp.c)(mf);case 8:return e.abrupt("return",{chatId:Object(u.get)(a,"chat.id"),departmentId:Object(u.get)(a,"chat.department"),messageId:Object(u.get)(a,"message.messageId")});case 9:case"end":return e.stop()}}),e)})),Lm=regeneratorRuntime.mark((function e(t,n){var r,a,c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.l)(pc);case 5:return a=e.sent,c=a,e.next=9,Object(jp.l)(Ft);case 9:return e.sent.isBot||(c=!1),o=c?"sendVisitorSpecialMessage":"sendTextMessage",e.next=14,Object(jp.c)([Cm,Cm[o]],r,n);case 14:return i=e.sent,e.abrupt("return",{chatId:Object(u.get)(i,"chat"),messageId:Object(u.get)(i,"messageId"),replyFor:Object(u.get)(i,"replyFor"),type:Object(u.get)(i,"type")});case 16:case"end":return e.stop()}}),e)})),Vm=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.sendAudio],r,n);case 5:return a=e.sent,e.abrupt("return",{chatId:Object(u.get)(a,"chat"),messageId:Object(u.get)(a,"messageId")});case 7:case"end":return e.stop()}}),e)})),Hm=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.sendVideo],r,n);case 5:return a=e.sent,e.abrupt("return",{chatId:Object(u.get)(a,"chat"),messageId:Object(u.get)(a,"messageId")});case 7:case"end":return e.stop()}}),e)})),Bm=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.sendFile],r,n);case 5:return a=e.sent,e.abrupt("return",{chatId:Object(u.get)(a,"chat"),messageId:Object(u.get)(a,"messageId")});case 7:case"end":return e.stop()}}),e)})),Gm=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.chatId,e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.sendImage],r,n);case 5:return a=e.sent,e.abrupt("return",{chatId:Object(u.get)(a,"chat"),messageId:Object(u.get)(a,"messageId")});case 7:case"end":return e.stop()}}),e)})),Um=regeneratorRuntime.mark((function e(t,n,r){var a,c,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=3,Object(jp.c)(zm);case 3:return c=a.replyFor,e.next=6,Object(jp.c)([Cm,Cm.sendVisitorSpecialMessage],t,{type:n,text:r,replyFor:c});case 6:case"end":return e.stop()}}),e)})),Wm=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.chatId,r=t.text,!Cm){e.next=4;break}return e.next=4,Object(jp.c)([Cm,Cm.sendIsTyping],n,r);case 4:case"end":return e.stop()}}),e)})),qm=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Fe);case 2:if(t=e.sent,n=[],t){e.next=6;break}throw new Rp.a("NO_ACTIVE_CHAT","No active chat to end");case 6:return e.next=8,Object(jp.c)(zm);case 8:return e.next=10,Object(jp.c)([Cm,Cm.endChat],t);case 10:return e.next=12,Object(jp.h)(vl(n));case 12:return e.next=14,Object(jp.h)(nc({chatId:t}));case 14:case"end":return e.stop()}}),e)})),zm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Km);case 2:return e.next=4,Object(jp.c)(Ym);case 4:case"end":return e.stop()}}),e)})),Km=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n++,t.next=4,Object(jp.c)(Jm);case 4:t.next=22;break;case 6:if(t.prev=6,t.t0=t.catch(0),"object"!=typeof t.t0||!t.t0.response){t.next=14;break}return t.next=11,Object(jp.c)(Cp.parseSafe,t.t0.response.responseText);case 11:if(e=t.sent,401!==t.t0.response.status||"visitor_blocked"!==e.type){t.next=14;break}throw new Rp.a("VISITOR_IS_BLOCKED",e.text);case 14:return r=(r=2*n)>10?10:r,console.error("Failed to register visitor. Error:",t.t0),console.warn("Failed to register visitor. Will retry in ".concat(r," seconds...")),t.next=20,Object(jp.f)(1e3*r);case 20:return t.next=22,Object(jp.c)(a);case 22:case"end":return t.stop()}}),t,null,[[0,6]])},t=regeneratorRuntime.mark(a),n=0,r=0,e.next=6,a();case 6:case"end":return e.stop()}}),e)})),Jm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(De);case 2:if(e.sent){e.next=6;break}return e.next=6,Object(jp.c)(Xm);case 6:case"end":return e.stop()}}),e)})),Xm=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Qt);case 2:return t=e.sent,e.next=5,Object(jp.l)($t);case 5:return n=e.sent,e.next=8,Object(jp.l)(Ae);case 8:return r=e.sent,e.next=11,Object(jp.l)(Ce);case 11:return a=e.sent,e.next=14,Object(jp.l)(Ne);case 14:return c=e.sent,e.next=17,Object(jp.c)(Mp.a.visitor.register,t,n,{name:r,email:a,phoneNumber:c,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone});case 17:return o=e.sent,Cm=o.session,i=Object(u.get)(o,"response.accessToken"),s=Object(u.get)(o,"response.id"),e.next=23,Object(jp.h)(Re({visitorId:s}));case 23:return e.next=25,Object(jp.h)((l=void 0,l={accessToken:i}.accessToken,{type:re,accessToken:l}));case 25:case"end":return e.stop()}var l}),e)})),Ym=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n++,e.next=4,Object(jp.c)(Qm);case 4:e.next=16;break;case 6:return e.prev=6,e.t0=e.catch(0),r=(r=2*n)>10?10:r,console.error("Failed to register visitor. Error:",e.t0),console.warn("Failed to register visitor. Will retry in ".concat(r," seconds...")),e.next=14,Object(jp.f)(1e3*r);case 14:return e.next=16,Object(jp.c)(a);case 16:case"end":return e.stop()}}),t,null,[[0,6]])},t=regeneratorRuntime.mark(a),n=0,r=0,e.next=6,a();case 6:case"end":return e.stop()}}),e)})),Qm=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nm){e.next=4;break}return e.next=3,Object(jp.c)(Zm);case 3:Nm=!0;case 4:case"end":return e.stop()}}),e)})),Zm=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cm){e.next=5;break}return e.next=3,Object(jp.l)(De);case 3:t=e.sent,Cm=new Mp.a.visitor.Session(t);case 5:return e.next=7,Object(jp.c)([Cm,Cm.connect]);case 7:return e.next=9,Object(jp.h)({type:Us});case 9:case"end":return e.stop()}}),e)})),$m=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(xp.c)((function(e){var t=function(t){return e({type:"notification",payload:t})},n=function(t){return e({type:"connecting",payload:t})},r=function(t){return e({type:"connected",payload:t})},a=function(t){return e({type:"disconnected",payload:t})},c=function(t){return e({type:"reconnected",payload:t})};return Cm.on("notification",t),Cm.on("connecting",n),Cm.on("connected",r),Cm.on("disconnected",a),Cm.on("reconnected",c),function(){Cm.off("notification",t),Cm.off("connecting",n),Cm.off("connected",r),Cm.off("disconnected",a),Cm.off("reconnected",c)}})));case 1:case"end":return e.stop()}}),e)})),ef=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)($m);case 2:t=e.sent;case 3:return e.next=6,Object(jp.n)(t);case 6:n=e.sent,e.t0=n.type,e.next="notification"===e.t0?10:"connecting"===e.t0?13:"connected"===e.t0?16:"disconnected"===e.t0?19:"reconnected"===e.t0?22:25;break;case 10:return e.next=12,Tm(n.payload);case 12:return e.abrupt("break",25);case 13:return e.next=15,Object(jp.h)({type:"CHAT_API/CHAT_API_CONNECTING"});case 15:return e.abrupt("break",25);case 16:return e.next=18,Object(jp.h)({type:"CHAT_API/CHAT_API_CONNECTED"});case 18:return e.abrupt("break",25);case 19:return e.next=21,Object(jp.h)({type:"CHAT_API/CHAT_API_DISCONNECTED"});case 21:return e.abrupt("break",25);case 22:return e.next=24,Object(jp.h)({type:Js});case 24:return e.abrupt("break",25);case 25:e.next=3;break;case 27:case"end":return e.stop()}}),e)})),tf=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,i,s,p,m,f,d,b,g,O,h,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,Object(jp.c)(zm);case 3:return e.next=5,Object(jp.c)([Cm,Cm.getClientState]);case 5:return n=e.sent,r=Object(u.get)(n,"chat"),a=Object(u.get)(n,"chat.joinedAgents",[]),c=Object(u.get)(n,"visitor",{}),a.forEach((function(e,t){"1"===e.isBot?a[t].isBot=!0:a[t].isBot=!1})),e.next=12,Object(jp.h)(xe({id:c.id,name:c.name,email:c.email,phoneNumber:c.phoneNumber}));case 12:if(r){e.next=25;break}return e.next=15,Object(jp.l)(Le);case 15:if(t=e.sent,!l.a.includes([ge.CHATTING,ge.WAITING],t)){e.next=23;break}return e.next=19,Object(jp.l)(Ho);case 19:return o=e.sent,i=0===o.length,e.next=23,Object(jp.h)(nc({silent:i}));case 23:e.next=55;break;case 25:return e.next=27,Object(jp.l)(_t);case 27:return s=e.sent,e.next=30,Object(jp.c)(Pp,r,{showAgentName:s});case 30:if(p=e.sent,m=l.a.last(p.messageIds),"seen"===(f=p.messages[m]||{}).status){e.next=36;break}return e.next=36,Object(jp.c)(bf,p.id,f.id);case 36:if("PrechatForm"!==f.type){e.next=39;break}return e.next=39,Object(jp.h)(Qc(f.id));case 39:return t=a.length>0?ge.CHATTING:ge.WAITING,e.next=42,Object(jp.c)(Yp,t);case 42:return e.next=44,Object(jp.h)({type:"CLIENT_STATE_PROCESSED"});case 44:return e.next=46,Object(jp.h)(q());case 46:return e.next=48,Object(jp.i)(xi({chatId:p.id}));case 48:return e.next=50,Object(jp.h)(cc(p));case 50:return e.next=52,Object(jp.h)(he({chatId:p.id}));case 52:return d=Object(u.get)(a,"0",{}),b=d.id,g=d.name,O=d.profilePictureUrl,h=d.isBot,e.next=55,Object(jp.h)(hl({agentId:b,agentName:g,profilePictureUrl:O,isBot:h}));case 55:return e.next=57,Object(jp.h)(vl(a));case 57:case"end":return e.stop()}}),e)})),nf=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(De);case 2:if(n=e.sent,!n){e.next=9;break}return e.next=7,Object(jp.c)(zm);case 7:return e.next=9,Object(jp.c)([Cm,Cm.updatePersonalInfo],t);case 9:case"end":return e.stop()}}),e)})),rf={text:Lm,"PrechatForm:Response":Lm,audio:Vm,video:Hm,file:Bm,image:Gm},af=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)([Ib,Ib.getItem],"pagesHistory");case 2:return t=e.sent,e.next=5,Object(jp.c)(Cp.parseSafe,t);case 5:return n=e.sent,e.abrupt("return",n||[]);case 7:case"end":return e.stop()}}),e)})),cf=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)([Ib,Ib.removeItem],"pagesHistory");case 2:case"end":return e.stop()}}),e)})),of=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(af);case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Object(jp.c)([Cm,Cm.setVisitorPageHistory],t);case 8:return e.next=10,Object(jp.c)(cf);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to set VisitorPageHistory",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})),sf=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cm){e.next=7;break}return e.next=3,Object(jp.c)([Cm,Cm.setVisitorLocation],t);case 3:return e.next=5,Object(jp.c)(cf);case 5:e.next=9;break;case 7:return e.next=9,Object(jp.c)(lf,t);case 9:case"end":return e.stop()}}),e)})),uf=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(u.isEmpty)(t)){e.next=14;break}return n=[],Object.keys(t).forEach((function(e){n.push({id:e,value:t[e]})})),e.next=5,Object(jp.l)(Ge);case 5:return r=e.sent,e.prev=6,e.next=9,Object(jp.c)([Cm,Cm.updateCustomFields],r,n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Unable to update custom fields",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})),lf=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(af);case 2:return(n=e.sent).length>10&&n.shift(),n.push(t),e.next=7,Object(jp.c)([Ib,Ib.setItem],"pagesHistory",n);case 7:case"end":return e.stop()}}),e)})),pf=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)([Ib,Ib.removeItem],"pagesHistory");case 2:case"end":return e.stop()}}),e)})),mf=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Ve);case 2:if(t=e.sent,Object(u.isEmpty)(t)){e.next=17;break}return n=[],Object.keys(t).forEach((function(e){n.push({id:e,value:t[e]})})),e.next=8,Object(jp.l)(Ge);case 8:return r=e.sent,e.prev=9,e.next=12,Object(jp.c)([Cm,Cm.updateCustomPrechatFields],r,n);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("Unable to update custom prechat fields",e.t0);case 17:case"end":return e.stop()}}),e,null,[[9,14]])})),ff=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(jp.c)([Cm,Cm.requestTranscript],t,n);case 3:return e.next=5,Object(jp.h)(Fo());case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to send chat transcript request",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),df=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(jp.c)([Cm,Cm.messageReadAck],t,{messageId:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error while updating message seen status",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),bf=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(jp.c)([Cm,Cm.messageDeliveredAck],t,{messageId:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error while updating message delivered status",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),gf=n("e5mt"),Of=n.n(gf),hf=regeneratorRuntime.mark((function e(t,n,r){var a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(vf,t,n);case 2:c=e.sent;case 3:return e.next=6,Object(jp.n)(c);case 6:return a=e.sent,e.next=9,Object(jp.c)(r,a);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})),vf=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(xp.c)((function(e){return t(e),function(){n(e)}})));case 1:case"end":return e.stop()}}),e)})),xf=n("j0+A");function jf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var yf=regeneratorRuntime.mark(Gf),Ef=regeneratorRuntime.mark(Uf),wf=regeneratorRuntime.mark(Wf),If=regeneratorRuntime.mark(qf),Tf=regeneratorRuntime.mark(zf),Rf=regeneratorRuntime.mark(Kf),kf=regeneratorRuntime.mark(Xf),_f=regeneratorRuntime.mark(Qf),Sf=regeneratorRuntime.mark(ed),Af=regeneratorRuntime.mark(td),Cf=regeneratorRuntime.mark(nd),Nf=regeneratorRuntime.mark(rd),Pf=regeneratorRuntime.mark(ad),Df="https://vinfo-v.happyfoxchat.com/api/v1/visitor",Ff="visitorAccessToken",Mf=new Map,Lf=function(){return Mf.get("session")},Vf=3e3,Hf=5,Bf=["visitor_name","email","phone_number","pages_visited"];function Gf(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Ib.getItem,Ff);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),yf)}function Uf(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Ib.setItem,Ff,e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),Ef)}function Wf(){var e,t,n,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(jp.c)(Gf);case 2:if(!(e=c.sent)){c.next=5;break}return c.abrupt("return",e);case 5:return c.next=7,Object(jp.l)(Yt);case 7:return t=c.sent,c.next=10,Object(jp.l)(Qt);case 10:return n=c.sent,c.next=13,Object(jp.l)(Wt);case 13:return r=c.sent,c.next=16,Object(jp.c)(Of.a,Df,{method:"POST",headers:{"X-HFC-VINFO-AUTH":n},data:{embed_token:t,page_url:r}});case 16:return a=c.sent,c.next=19,Object(jp.c)(Uf,l.a.get(a,"data.visitor_access_token"));case 19:return c.abrupt("return",c.sent);case 20:case"end":return c.stop()}}),wf)}function qf(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Mf.get("max_retries_made")||0,e+=1,Mf.set("max_retries_made",e),t.abrupt("return",e);case 4:case"end":return t.stop()}}),If)}function zf(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.k)(Hf,Vf,e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),Tf)}function Kf(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Wf);case 2:return e=t.sent,t.abrupt("return",new xf.Session(e,{autoReconnect:!1}));case 4:case"end":return t.stop()}}),Rf)}var Jf=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(jp.c)(Kf);case 3:return t=a.sent,Mf.set("session",t),a.next=7,Object(jp.c)([t,t.connect]);case 7:return a.next=9,Object(jp.c)(Xf);case 9:return n=a.sent,a.next=12,Object(jp.c)(Yf,t);case 12:return r=a.sent,a.next=15,Object(jp.g)(Qf,r);case 15:return a.next=17,Object(jp.h)(Ql({visitorInfo:n}));case 17:a.next=33;break;case 19:return a.prev=19,a.t0=a.catch(0),Mf.delete("session"),a.next=24,Object(jp.c)(qf);case 24:if(!(a.sent>=100)){a.next=27;break}return a.abrupt("return",console.warn("Maximum Reties Made."));case 27:return a.next=29,Object(jp.f)(5e3);case 29:return a.next=31,Object(jp.c)(e);case 31:console.error("Unable to connect to visitor info server"),console.error(a.t0);case 33:case"end":return a.stop()}}),e,null,[[0,19]])}));function Xf(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Lf(),r.next=3,Object(jp.c)([e,e.sendVisitorDetails]);case 3:return t=r.sent,n=t.visitor,r.next=7,Object(jp.i)(Zl(n));case 7:return r.abrupt("return",n);case 8:case"end":return r.stop()}}),kf)}var Yf=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(xp.c)((function(e){return t.on("notification",(function(t){e(["notification",t])})),t.on("connected",(function(){return e(["connected"])})),t.on("disconnected",(function(){return e(["disconnected"])})),function(){t.off("notification"),t.off("connected"),t.off("disconnected"),e(xp.a)}})));case 1:case"end":return e.stop()}}),e)}));function Qf(e){var t,n,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(jp.n)(e);case 3:t=c.sent,n=jf(t,2),r=n[0],a=n[1],c.t0=r,c.next="notification"===c.t0?10:"disconnected"===c.t0?13:16;break;case 10:return c.next=12,Object(jp.c)(ad,a);case 12:return c.abrupt("break",17);case 13:return c.next=15,Object(jp.c)(Jf);case 15:case 16:return c.abrupt("break",17);case 17:c.next=0;break;case 19:case"end":return c.stop()}}),_f)}var Zf=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.a.pick(t,Bf),e.next=3,Object(jp.c)(Lf);case 3:return r=e.sent,e.next=6,Object(jp.c)(zf,[r,r.setProperties],n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})),$f=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Lf);case 2:return t=e.sent,e.prev=3,e.next=6,Object(jp.c)([t,t.setActive],{last_active_at:(new Date).getTime()});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.warn("Error while update last active status",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}));function ed(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(Lf);case 2:return t=r.sent,n=l.a.pick(e,["chat_status","agent_id","agent_name","agent_chat_id"]),r.prev=4,r.next=7,Object(jp.c)(zf,[t,t.setChatStatus],n);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(4),console.warn("Error while chat_status update",r.t0);case 12:case"end":return r.stop()}}),Sf,null,[[4,9]])}function td(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(jp.c)(ed,{chat_status:bt.CHAT_DISMISSED});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn("Error while update chat status",e.t0);case 8:case"end":return e.stop()}}),Af,null,[[0,5]])}function nd(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.c)(Lf);case 2:return t=n.sent,n.prev=3,n.next=6,Object(jp.c)([t,t.updateDeliveredTill],{delivered_till:e});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.warn("Error while delivered_till update",n.t0);case 11:case"end":return n.stop()}}),Cf,null,[[3,8]])}function rd(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.c)(Lf);case 2:return t=n.sent,n.prev=3,n.next=6,Object(jp.c)([t,t.updateReadTill],{read_till:e});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.warn("Error while read_till update",n.t0);case 11:case"end":return n.stop()}}),Nf,null,[[3,8]])}function ad(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.type,n=e.data,r=void 0===n?{}:n,a.t0=t,a.next="Engaged"===a.t0?4:9;break;case 4:return a.next=6,Object(jp.c)(nd,r.message_id);case 6:return a.next=8,Object(jp.h)(Qr(r));case 8:return a.abrupt("break",11);case 9:return console.warn("Unknown/Unhandled Notification Type Received: %s",t),a.abrupt("break",11);case 11:case"end":return a.stop()}}),Pf)}var cd=n("NbRN"),od=n.n(cd),id={_AVAILABILITY_SERVER_URL:"http://localhost:7002",_API_VERSION:"v1",availabilityServer:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._AVAILABILITY_SERVER_URL=e),this._AVAILABILITY_SERVER_URL},version:function(e){var t=typeof e;return"string"!==t&&"number"!==t||(this._API_VERSION=e),this._API_VERSION},base:function(){return"".concat(this.availabilityServer(),"/api/").concat(this.version())}},sd=function(e,t){return"".concat(id.base(),"/availability?visitorApiToken=").concat(e,"&profile=").concat(t)},ud=Sp.promisifyRequest(od.a);var ld={urls:r,isAvailable:function(e,t){return ud({uri:sd(e,t),method:"GET",json:!0})}};ld.urls.api.availabilityServer("https://avl.happyfoxchat.com");var pd=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Qt);case 2:return t=e.sent,e.next=5,Object(jp.l)($t);case 5:return n=e.sent,e.next=8,Object(jp.c)([ld,ld.isAvailable],t,n);case 8:return r=e.sent,e.next=11,Object(jp.l)(rn);case 11:return a=e.sent,e.next=14,Object(jp.c)(fd,{availability:r,broadcastDepartmentChatId:a});case 14:return c=e.sent,e.next=17,Object(jp.c)(dd,c);case 17:return o=e.sent,e.next=20,Object(jp.h)(du({availabilities:c}));case 20:if(!o){e.next=26;break}return e.next=23,Object(jp.l)(mr);case 23:return i=e.sent,e.next=26,Object(jp.c)(hm,i);case 26:case"end":return e.stop()}}),e)})),md=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(jp.f)(6e4);case 3:return e.next=5,Object(jp.c)(pd);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})),fd=regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.availability,r=t.broadcastDepartmentChatId,(a=Object(u.get)(n,"departments",[])).forEach((function(e){e.availableAndFree=e.available&&!e.available_agents_busy})),c=Object(u.find)(a,(function(e){return e.id===r})),e.abrupt("return",{profileAvailability:Object(u.get)(n,"available"),finalAvailability:c,currentDepartmentAvailability:c,allDepartmentAvailability:a});case 5:case"end":return e.stop()}}),e)})),dd=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.get)(t,"finalAvailability.availableAndFree",!1),e.next=3,Object(jp.l)(mr);case 3:return r=e.sent,e.abrupt("return",n!==r);case 5:case"end":return e.stop()}}),e)})),bd={};window.moment=Ju.a;var gd=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Gn);case 2:n=e.sent,e.t0=regeneratorRuntime.keys(n);case 4:if((e.t1=e.t0()).done){e.next=10;break}return t=e.t1.value,e.next=8,Object(jp.c)(Od,t);case 8:e.next=4;break;case 10:case"end":return e.stop()}}),e)})),Od=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Bn,t);case 2:if(e.sent.satisfiedAt){e.next=16;break}return e.next=6,Object(jp.c)(xd,t);case 6:if(!e.sent){e.next=16;break}return e.next=10,Object(jp.c)(hd,t);case 10:if(!e.sent){e.next=16;break}return e.next=14,Object(jp.c)(vd,t);case 14:return e.next=16,Object(jp.c)(Pd,t);case 16:case"end":return e.stop()}}),e)})),hd=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,Object(jp.l)(Bn,t);case 3:return r=e.sent,e.next=6,Object(jp.l)(Le);case 6:return a=e.sent,e.next=9,Object(jp.l)(ca,r.departmentChoice);case 9:return c=e.sent,e.next=12,Object(jp.l)(gr,c);case 12:return o=e.sent,e.next=15,Object(jp.l)(an);case 15:return i=e.sent,e.next=18,Object(jp.l)(Jn);case 18:return s=e.sent,e.next=21,Object(jp.l)(Et);case 21:return u=e.sent,e.next=24,Object(jp.l)(lr);case 24:return e.sent&&s&&o?a===ge.SENDING_FIRST_MESSAGE||a===ge.WAITING||a===ge.CHATTING?n=!1:i?n=!1:u&&(n=!1):n=!1,e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})),vd=regeneratorRuntime.mark((function e(t){var n,r,a,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Bn,t);case 2:return n=e.sent,e.next=5,Object(jp.c)(Dd,t);case 5:return r=e.sent,e.next=8,Object(jp.l)(ca,n.departmentChoice);case 8:return a=e.sent,e.next=11,Object(jp.l)(dr,a);case 11:return c=e.sent,e.next=14,Object(jp.h)((i={triggeredChatId:t,message:r,name:n.name,satisfiedAt:(new Date).getTime(),availableAgents:c,departmentChoice:n.departmentChoice,deptChatId:a},{type:Yn,payload:i}));case 14:return e.next=16,Object(jp.l)(qn);case 16:return o=e.sent,e.next=19,Object(jp.c)(vm,o);case 19:case"end":return e.stop()}var i}),e)})),xd=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Bn,t);case 2:n=e.sent,r=n.conjunction,a=n.conditions,o=0,i=!1,s=a.length,u="or"===r,e.t0=regeneratorRuntime.keys(a);case 10:if((e.t1=e.t0()).done){e.next=23;break}return l=e.t1.value,c=a[l],e.next=15,Object(jp.c)(jd,t,c);case 15:if(!e.sent){e.next=21;break}if(o++,!u){e.next=21;break}return i=!0,e.abrupt("break",23);case 21:e.next=10;break;case 23:return u||s!==o||(i=!0),e.abrupt("return",i);case 25:case"end":return e.stop()}}),e)})),jd=regeneratorRuntime.mark((function(e,t){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=!1,r.t0=t.type,r.next="time"===r.t0?4:"url"===r.t0?8:"visitor"===r.t0?12:"country"===r.t0?16:"state"===r.t0?20:"city"===r.t0?24:28;break;case 4:return r.next=6,Object(jp.c)(yd,e,t);case 6:return n=r.sent,r.abrupt("break",28);case 8:return r.next=10,Object(jp.c)(Id,e,t);case 10:return n=r.sent,r.abrupt("break",28);case 12:return r.next=14,Object(jp.c)(Td,e,t);case 14:return n=r.sent,r.abrupt("break",28);case 16:return r.next=18,Object(jp.c)(Rd,e,t);case 18:return n=r.sent,r.abrupt("break",28);case 20:return r.next=22,Object(jp.c)(kd,e,t);case 22:return n=r.sent,r.abrupt("break",28);case 24:return r.next=26,Object(jp.c)(_d,e,t);case 26:return n=r.sent,r.abrupt("break",28);case 28:return r.abrupt("return",n);case 29:case"end":return r.stop()}}),n)})),yd=regeneratorRuntime.mark((function e(t,n){var r,a,c,o,i,s,u,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,c=parseFloat(n.value),o=1e3*c,e.next=5,Object(jp.l)(zt);case 5:if(i=e.sent,s=Ju()(i).valueOf(),u=new Date,l=u.getTime(),!((p=l-s)>=o)){e.next=14;break}a=!0,e.next=18;break;case 14:return r=o-p,e.next=17,Object(jp.c)(Ed,t,r);case 17:a=!1;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})),Ed=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Pd,t);case 2:return e.next=4,Object(jp.m)(wd,t,n);case 4:return r=e.sent,e.next=7,Object(jp.c)(Ad,t,r);case 7:case"end":return e.stop()}}),e)})),wd=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.f)(n);case 2:return e.next=4,Object(jp.c)(Od,t);case 4:return e.next=6,Object(jp.c)(Cd,t);case 6:case"end":return e.stop()}}),e)})),Id=regeneratorRuntime.mark((function e(t,n){var r,a,c,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(e){var t=e;return i(e)&&(t=e.slice(0,e.length-1)),t=s(t)?t.replace(c,""):t.replace(o,"")},s=function(e){return c.test(e)},i=function(e){return/\/$/.test(e)},e.next=5,Object(jp.l)(Ut);case 5:r=e.sent,a=!1,c=/^https?:\/\/(w{3}\.)/,o=/^https?:\/\//,e.t0=n.evaluator,e.next="equals"===e.t0?12:"contains"===e.t0?14:16;break;case 12:return a=u(r)===u(n.value),e.abrupt("break",16);case 14:return a=-1!==r.indexOf(n.value),e.abrupt("break",16);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})),Td=regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.next=3,Object(jp.l)(Ye);case 3:a=e.sent,e.t0=n.value,e.next="first"===e.t0?7:"repeat"===e.t0?9:11;break;case 7:return r="true"===n.evaluator?!a:a,e.abrupt("break",11);case 9:return r="true"===n.evaluator?a:!a,e.abrupt("break",11);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})),Rd=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Sd,t,n,"countryName");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),kd=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Sd,t,n,"state");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),_d=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Sd,t,n,"city");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),Sd=regeneratorRuntime.mark((function e(t,n,r){var a,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,o=(n.value||"").toLowerCase(),e.t0=r,e.next="countryName"===e.t0?5:"state"===e.t0?9:"city"===e.t0?13:17;break;case 5:return e.next=7,Object(jp.l)(Ke);case 7:return c=e.sent,e.abrupt("break",17);case 9:return e.next=11,Object(jp.l)(Je);case 11:return c=e.sent,e.abrupt("break",17);case 13:return e.next=15,Object(jp.l)(Xe);case 15:return c=e.sent,e.abrupt("break",17);case 17:c=c.toLowerCase(),e.t1=n.evaluator,e.next="equals"===e.t1?21:"not_equals"===e.t1?23:"contains"===e.t1?25:"not_contains"===e.t1?27:29;break;case 21:return a=c===o,e.abrupt("break",29);case 23:return a=c!==o,e.abrupt("break",29);case 25:return a=-1!==c.indexOf(o),e.abrupt("break",29);case 27:return a=-1===c.indexOf(o),e.abrupt("break",29);case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}}),e)})),Ad=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd[t]=n);case 1:case"end":return e.stop()}}),e)})),Cd=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",delete bd[t]);case 1:case"end":return e.stop()}}),e)})),Nd=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bd[t]);case 1:case"end":return e.stop()}}),e)})),Pd=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Nd,t);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,Object(jp.d)(n);case 6:return e.next=8,Object(jp.c)(Cd,t);case 8:case"end":return e.stop()}}),e)})),Dd=regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Wn,t);case 2:return n=e.sent,e.next=5,Object(jp.l)(Ae);case 5:return r=e.sent,a="",n&&(a=n.replace(/{visitorName}/g,r||"")),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}));function Fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fd(n,!0).forEach((function(t){Ld(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ld(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vd=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Hc);case 2:return t=e.sent,e.next=5,Object(jp.l)(gr,t.department);case 5:return e.sent||(t=Object(u.omit)(t,["department"])),e.next=9,Object(jp.h)({type:"CONV_FORM/HIDE_CHAT_AGAIN_BANNER"});case 9:return e.next=11,Object(jp.h)({type:Kc,payload:t});case 11:case"end":return e.stop()}}),e)})),Hd=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Object(jp.l)(Hc);case 3:return n=e.sent,e.next=6,Object(jp.l)(Ac);case 6:return r=e.sent,a=r.map((function(e){return e.fieldId})),c=Object(u.pick)(n,a),o=Object.assign({},c,Md({},t)),e.next=12,Object(jp.h)({type:"CONV_FORM/HIDE_CHAT_AGAIN_BANNER"});case 12:return e.next=14,Object(jp.h)(Ec(o));case 14:case"end":return e.stop()}}),e)})),Bd=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)({type:"PRECHAT_FORM/SHOW_INPROGRESS_CHAT_FORM"});case 2:case"end":return e.stop()}}),e)})),Gd=regeneratorRuntime.mark(eb),Ud=regeneratorRuntime.mark(tb),Wd=regeneratorRuntime.mark(nb),qd=regeneratorRuntime.mark(rb),zd=regeneratorRuntime.mark(ab),Kd=regeneratorRuntime.mark(cb),Jd=regeneratorRuntime.mark(ob),Xd=regeneratorRuntime.mark(ib),Yd=regeneratorRuntime.mark((function e(t){var n,r,a,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.config,e.next=3,Object(jp.h)(S({type:"WIDGET/SET_CONFIG"},{config:n}));case 3:return e.next=5,Object(jp.c)(cb);case 5:return e.next=7,Object(jp.c)(qp);case 7:return e.next=9,Object(jp.l)(Yt);case 9:return r=e.sent,e.next=12,Object(jp.c)(Qd,r);case 12:return a=e.sent,c=l.a.get(a,"widget.translation"),e.next=16,Object(jp.c)(_r.init,c,{lng:a.widget.language});case 16:return e.next=18,Object(jp.h)(W({responseJson:a}));case 18:return e.next=20,Object(jp.c)(Bp);case 20:return e.next=22,Object(jp.l)(Le);case 22:if((o=e.sent)!==ge.CHATTING&&o!==ge.WAITING){e.next=26;break}return e.next=26,Object(jp.c)(tf);case 26:return e.next=28,Object(jp.c)(pd);case 28:return e.next=30,Object(jp.c)(Zd);case 30:return e.next=32,Object(jp.l)(Tn);case 32:if(!e.sent){e.next=38;break}return e.next=36,Object(jp.c)(tb);case 36:e.next=40;break;case 38:return e.next=40,Object(jp.c)(rb);case 40:return e.next=42,Object(jp.c)(eb);case 42:return e.next=44,Object(jp.c)(Tb.show);case 44:if(!l.a.get(a,"features.proactiveChat",!1)){e.next=50;break}return e.next=48,Object(jp.m)(Jf);case 48:e.next=51;break;case 50:console.warn("Skipping vinfo server connection. Proactive chat not supported...");case 51:return e.next=53,Object(jp.h)({type:M});case 53:return e.next=55,Object(jp.h)({type:"AVAILABILITY/START_AVAILABILITY_POLL"});case 55:return e.next=57,Object(jp.c)(Wp);case 57:return e.next=59,Object(jp.c)(gd);case 59:return e.next=61,Object(jp.h)({type:D});case 61:return e.next=63,Object(jp.c)(jb.startListening,"focus:window",Bl);case 63:return e.next=65,Object(jp.c)(jb.startListening,"blur:window",Gl);case 65:return e.next=67,Object(jp.m)(ib);case 67:case"end":return e.stop()}}),e)})),Qd=regeneratorRuntime.mark((function e(t){var n,r,a,c,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Wt);case 2:return n=e.sent,e.next=5,Object(jp.l)(We);case 5:return r=e.sent,a=r.email,c=r.phoneNumber,o=new URLSearchParams,a&&o.append("email",a),c&&o.append("phoneNumber",c),o.append("currentDomain",n),e.next=14,Object(jp.c)(Of.a,"".concat("https://happyfoxchat.com","/company/").concat(t,"/ping"),{method:"POST",data:o});case 14:return i=e.sent,s=i.data,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})),Zd=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)($d);case 2:return t=e.sent,e.next=5,Object(jp.h)(S({type:"WIDGET/UPDATE_CAN_SHOW_BADGE"},{canShowBadge:t}));case 5:case"end":return e.stop()}}),e)})),$d=regeneratorRuntime.mark((function e(){var t,n,r,a,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(kn);case 2:return t=e.sent,e.next=5,Object(jp.l)(ks);case 5:return n=e.sent,e.next=8,Object(jp.l)(_s);case 8:return r=e.sent,e.next=11,Object(jp.l)(Pn);case 11:return a=e.sent,e.next=14,Object(jp.l)(cn);case 14:if(c=e.sent,o=function(){return!c},!l.a.isBoolean(t)){e.next=22;break}if(t){e.next=19;break}return e.abrupt("return",!1);case 19:return e.abrupt("return",o());case 22:if(r){e.next=28;break}if(a){e.next=25;break}return e.abrupt("return",!1);case 25:return e.abrupt("return",o());case 28:if(n){e.next=32;break}return e.abrupt("return",!1);case 32:return e.abrupt("return",o());case 33:case"end":return e.stop()}}),e)}));function eb(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.l)(Ss);case 2:if(!(e=n.sent)){n.next=6;break}return n.next=6,Object(jp.c)(om,e);case 6:return n.next=8,Object(jp.l)(As);case 8:if(!(t=n.sent)){n.next=12;break}return n.next=12,Object(jp.c)(im,t);case 12:case"end":return n.stop()}}),Gd)}function tb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(K());case 2:return e.next=4,Object(jp.c)(rb);case 4:return e.next=6,Object(jp.h)(X());case 6:return e.next=8,Object(jp.c)(ob);case 8:return e.next=10,Object(jp.c)(Em);case 10:case"end":return e.stop()}}),Ud)}function nb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(Y());case 2:return e.next=4,Object(jp.h)(J());case 4:return e.next=6,Object(jp.c)(rb);case 6:return e.next=8,Object(jp.c)(wm);case 8:case"end":return e.stop()}}),Wd)}function rb(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(ab);case 2:return e=t.sent,t.next=5,Object(jp.c)(Tb.setCss,e);case 5:case"end":return t.stop()}}),qd)}function ab(){var e,t,n,r,a,c,o,i,s,u,l;return regeneratorRuntime.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(jp.c)($d);case 2:return e=p.sent,p.next=5,Object(jp.l)(vn);case 5:return t=p.sent,p.next=8,Object(jp.l)(cn);case 8:return n=p.sent,p.next=11,Object(jp.l)(yn);case 11:return r=p.sent,p.next=14,Object(jp.l)(En);case 14:return a=p.sent,p.next=17,Object(jp.l)(jn);case 17:return c=p.sent,p.next=20,Object(jp.l)(zn);case 20:return o=p.sent,p.next=23,Object(jp.l)(Gt);case 23:return i=p.sent,s=i&&!n,u=a&&!o&&!s,l=!n&&!s&&!o&&!u||u&&x,p.abrupt("return",m()({"hfc-chatbox__xl":!c&&n},{"hfc-badge":!n},{"hfc-badge__hidden":!n&&!e},{"hfc-badge__simple":l},{"hfc-badge__bottom-right":"bottomRight"===t||"right"===t},{"hfc-badge__bottom-left":"bottomLeft"===t||"left"===t},{"hfc-badge__vertical":u&&!n&&!x},{"hfc-badge__right":"right"===t&&!x},{"hfc-badge__left":"left"===t&&!x},{"hfc-triggered-chat":o},{"hfc-proactive-chat":s},{"hfc-badge__compact":r},{"hfc-chatbox":n},{"hfc-chatbox__is-mobile":x}));case 28:case"end":return p.stop()}}),zd)}function cb(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Rb.getPageStats);case 2:return e=t.sent,t.next=5,Object(jp.h)(Dl(e));case 5:return t.next=7,Object(jp.c)(sf,e);case 7:case"end":return t.stop()}}),Kd)}function ob(){var e,t,n,r,a,c,o,i,s,u,p,m,f,d;return regeneratorRuntime.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Object(jp.l)(Le);case 2:return e=b.sent,b.next=5,Object(jp.c)(Xp);case 5:return t=b.sent,b.next=8,Object(jp.l)(ua);case 8:return n=b.sent,b.next=11,Object(jp.l)(zn);case 11:return r=b.sent,b.next=14,Object(jp.l)(Et);case 14:return a=b.sent,b.next=17,Object(jp.l)(Fn);case 17:return c=b.sent,b.next=20,Object(jp.l)(it);case 20:return o=b.sent,b.next=23,Object(jp.l)(pc);case 23:return i=b.sent,b.next=26,Object(jp.l)(Ln);case 26:if(s=b.sent,u=!i&&(!t||c&&o),p=i&&!s,m=!1,!i){b.next=37;break}return b.next=33,Object(jp.l)(qo);case 33:f=b.sent,d=l.a.last(f.messageIds),"PrechatForm"===(f.messages[d]||{}).type&&(m=!0);case 37:if(e!==ge.SENDING_FIRST_MESSAGE&&e!==ge.WAITING&&e!==ge.CHATTING&&!a&&!p||m){b.next=42;break}return b.next=40,Object(jp.h)(Ya());case 40:b.next=64;break;case 42:if(!m){b.next=47;break}return b.next=45,Object(jp.c)(Bd);case 45:b.next=64;break;case 47:if(!r){b.next=52;break}return b.next=50,Object(jp.h)(Ya());case 50:b.next=64;break;case 52:if(n){b.next=57;break}return b.next=55,Object(jp.c)(Hd);case 55:b.next=64;break;case 57:if(!u){b.next=62;break}return b.next=60,Object(jp.c)(Vd);case 60:b.next=64;break;case 62:return b.next=64,Object(jp.h)(Ya());case 64:case"end":return b.stop()}}),Jd)}function ib(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(hf,(function(r){e=function(){r(Hl.FOCUSSED)},t=function(){r(Hl.BLURRED)},n=function(){document.hidden?r(Hl.HIDDEN):r(Hl.VISIBLE)},window.addEventListener("focus",e),window.addEventListener("blur",e),document.addEventListener("visibilitychange",n)}),(function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t),window.removeEventListener("visibilitychange",n)}),regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Hl.VISIBLE?3:e.t0===Hl.FOCUSSED?3:e.t0===Hl.BLURRED?6:e.t0===Hl.HIDDEN?6:9;break;case 3:return e.next=5,Object(jp.h)(Bl());case 5:return e.abrupt("break",10);case 6:return e.next=8,Object(jp.h)(Gl());case 8:case 9:return e.abrupt("break",10);case 10:case"end":return e.stop()}}),e)})));case 2:case"end":return r.stop()}}),Xd)}var sb=n("CliE"),ub=n.n(sb);function lb(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var pb,mb=regeneratorRuntime.mark(Ob),fb=regeneratorRuntime.mark(yb),db=regeneratorRuntime.mark(Eb),bb=new ub.a,gb=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pb=new Ip.a("*",{child:!0});case 1:case"end":return e.stop()}}),e)}));function Ob(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(xp.c)((function(e){return pb.listen(),pb.on("message",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];e({deferred:t,payload:r})})),pb.ready(),function(){pb.off("message")}})));case 1:case"end":return e.stop()}}),mb)}var hb=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Ob);case 2:t=e.sent,n=regeneratorRuntime.mark((function e(){var n,r,a,c,o,i,s,l,p,m,f,d,b,g,O,h,v,x,j,y,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.n)(t);case 2:if(n=e.sent,r=n.deferred,a=n.payload[0],c=void 0,o=void 0,i=void 0,s=void 0,l=void 0,p=void 0,m=void 0,f=void 0,d=void 0,b=void 0,g=void 0,!1,O=void 0,h=!1,a){e.next=23;break}throw new Rp.a("DOC_MSG_DATA_MISSING","Missing data in document message");case 23:if(a.actionType){e.next=25;break}throw new Rp.a("ACTION_TYPE_MISSING","Missing actionType property in received message");case 25:v=a.actionType,x=a.actionArguments,j=void 0,y=void 0,e.t0=v,e.next="chat.action.create"===e.t0?32:"chat.event.on"===e.t0?37:"chat.event.off"===e.t0?41:"chat.get.agent.availability"===e.t0?45:"chat.action.on_load.complete"===e.t0?50:"chat.action.setPageInfo"===e.t0?52:"chat.set.visitor.detail"===e.t0?57:"chat.get.visitor.detail"===e.t0?64:"chat.unset.visitor.detail"===e.t0?69:"chat.action.end_chat"===e.t0?73:"chat.set.visitor.custom_field"===e.t0?84:"chat.unset.visitor.custom_field"===e.t0?97:"chat.get.visitor.custom_field"===e.t0?104:"chat.get.visitor.custom_fields"===e.t0?110:"chat.action.chatbox.expand"===e.t0?115:"chat.action.chatbox.collapse"===e.t0?119:"chat.action.widget.show"===e.t0?123:"chat.action.widget.hide"===e.t0?127:"chat.action.badge.show"===e.t0?131:"chat.action.badge.hide"===e.t0?134:"chat.action.style.add"===e.t0?137:"chat.action.style.add_file"===e.t0?142:"chat.get.visitor.state"===e.t0?147:"chat.get.visitor.access_token"===e.t0?153:"chat.action.triggered_chat.get"===e.t0?158:"chat.action.triggered_chat.get_all"===e.t0?164:"chat.action.triggered_chat.enable"===e.t0?169:"chat.action.triggered_chat.disable"===e.t0?173:"chat.action.triggered_chat.drop"===e.t0?177:"chat.get.visitor.proactive_message"===e.t0?181:"chat.get.widget.properties"===e.t0?192:197;break;case 32:return j=x[0],e.next=35,Object(jp.c)(Yd,{config:j});case 35:return r.resolve(),e.abrupt("break",199);case 37:return d=Object(u.get)(x,"[0].eventName"),bb.on(d,(function(){r.notify.apply(r,arguments)})),r.notify({type:"added_event_listener"}),e.abrupt("break",199);case 41:return d=x[0],e.next=44,Object(jp.c)(bb.off,d);case 44:return e.abrupt("break",199);case 45:return e.next=47,Object(jp.l)(mr);case 47:return h=e.sent,r.resolve(h),e.abrupt("break",199);case 50:return r.resolve(),e.abrupt("break",199);case 52:return y=x[0],e.next=55,Object(jp.c)(sf,y);case 55:return r.resolve(),e.abrupt("break",199);case 57:return e.next=59,jp.c.apply(void 0,[Zp].concat(lb(x)));case 59:return e.next=61,Object(jp.l)(We);case 61:return O=e.sent,r.resolve(O),e.abrupt("break",199);case 64:return e.next=66,Object(jp.l)(We);case 66:return O=e.sent,r.resolve(O),e.abrupt("break",199);case 69:return e.next=71,Object(jp.c)($p);case 71:return r.resolve(),e.abrupt("break",199);case 73:return e.prev=73,e.next=76,Object(jp.c)(mm);case 76:r.resolve(),e.next=83;break;case 79:e.prev=79,e.t1=e.catch(73),console.error("Failed to end chat. Error:",e.t1),r.reject(e.t1);case 83:return e.abrupt("break",199);case 84:return e.prev=84,e.next=87,jp.c.apply(void 0,[em].concat(lb(x)));case 87:return e.next=89,Object(jp.l)(ut);case 89:c=e.sent,r.resolve(c),e.next=96;break;case 93:e.prev=93,e.t2=e.catch(84),r.reject(e.t2);case 96:return e.abrupt("break",199);case 97:return e.next=99,jp.c.apply(void 0,[tm].concat(lb(x)));case 99:return e.next=101,Object(jp.l)(ut);case 101:return c=e.sent,r.resolve(c),e.abrupt("break",199);case 104:return o=x[0],e.next=107,Object(jp.l)(lt,o);case 107:return c=e.sent,r.resolve(c),e.abrupt("break",199);case 110:return e.next=112,Object(jp.l)(ut);case 112:return c=e.sent,r.resolve(c),e.abrupt("break",199);case 115:return e.next=117,Object(jp.h)(Q());case 117:return r.resolve(),e.abrupt("break",199);case 119:return e.next=121,Object(jp.h)(z());case 121:return r.resolve(),e.abrupt("break",199);case 123:return e.next=125,Object(jp.c)(nm);case 125:return r.resolve(),e.abrupt("break",199);case 127:return e.next=129,Object(jp.c)(rm);case 129:return r.resolve(),e.abrupt("break",199);case 131:return e.next=133,Object(jp.c)(am);case 133:return e.abrupt("break",199);case 134:return e.next=136,Object(jp.c)(cm);case 136:return e.abrupt("break",199);case 137:return i=x[0],e.next=140,Object(jp.c)(om,i);case 140:return r.resolve(),e.abrupt("break",199);case 142:return s=x[0],e.next=145,Object(jp.c)(sm,s);case 145:return r.resolve(),e.abrupt("break",199);case 147:return e.next=149,Object(jp.l)(Le);case 149:return(l=e.sent)===ge.WAITING&&(l="waiting_for_agent"),r.resolve(l),e.abrupt("break",199);case 153:return e.next=155,Object(jp.l)(Qt);case 155:return p=e.sent,r.resolve(p),e.abrupt("break",199);case 158:return e.next=160,Object(jp.l)(qn);case 160:return m=e.sent,Object.keys(m).length||(m=void 0),r.resolve(m),e.abrupt("break",199);case 164:return e.next=166,Object(jp.l)(Gn);case 166:return f=e.sent,r.resolve(f),e.abrupt("break",199);case 169:return e.next=171,Object(jp.c)(um);case 171:return r.resolve(),e.abrupt("break",199);case 173:return e.next=175,Object(jp.c)(lm);case 175:return r.resolve(),e.abrupt("break",199);case 177:return e.next=179,Object(jp.c)(pm);case 179:return r.resolve(),e.abrupt("break",199);case 181:return g={},e.next=184,Object(jp.l)(Et);case 184:if(!e.sent){e.next=190;break}return e.next=188,Object(jp.l)(wt);case 188:E=e.sent,g={agentName:E.agentName,chatAgentId:E.agentId,isClosed:bt.CHAT_DISMISSED===E.state,status:E.chat_status,messages:E.messages};case 190:return r.resolve(g),e.abrupt("break",199);case 192:return e.next=194,Object(jp.l)(Xt);case 194:return b=e.sent,r.resolve(b),e.abrupt("break",199);case 197:console.error('Unknown action emitted. actionType: "'+v+'" payload:',x),r.reject(new Rp.a("UNKNOW_ACTION_TYPE","Unknown action type received from parent window"));case 199:case"end":return e.stop()}}),e,null,[[73,79],[84,93]])}));case 4:return e.delegateYield(n(),"t0",6);case 6:e.next=4;break;case 8:case"end":return e.stop()}}),e)})),vb=function(){return Ep.a.resolve(xb.apply(void 0,arguments))},xb=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pb.post({taskName:e,taskArguments:n})},jb={startListening:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.m)(Eb,t,n);case 2:case"end":return e.stop()}}),e)})),stopListening:regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(wb.off,t);case 2:case"end":return e.stop()}}),e)})),emit:regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),r=0;r<t;r++)n[r]=a[r];return e.next=3,jp.c.apply(void 0,[wb.emit].concat(n));case 3:case"end":return e.stop()}}),e)}))};function yb(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(xp.c)((function(t){return pb.listen(),wb.on(e,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t({eventArguments:n})})),function(){wb.off(e)}})));case 1:case"end":return t.stop()}}),fb)}function Eb(e,t){var n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(jp.c)(yb,e);case 2:n=a.sent;case 3:return a.next=6,Object(jp.n)(n);case 6:return r=a.sent,a.next=9,Object(jp.h)(t.apply(void 0,lb(r.eventArguments)));case 9:a.next=3;break;case 11:case"end":return a.stop()}}),db)}var wb={on:function(e,t){return _p.a.add(e,t),Ep.a.resolve(xb("chat.event.on",e).progress((function(){_p.a.check(e,t)&&t.apply(void 0,arguments)})))},off:function(e,t){var n;e&&t?n=_p.a.removeByHandler(e,t).isAllHandlersRemoved?vb("chat.event.off",{eventName:e}):Ep.a.resolve():e&&(_p.a.removeByName(e),n=vb("chat.event.off",{eventName:e}));return n},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bb.emit.apply(bb,[e].concat(n))}},Ib={setItem:function(e,t,n){var r=vb("chat.set.storage",e,t);return Ap.a.attachCallback(r,n)},getItem:function(e,t){var n=vb("chat.get.storage",e);return Ap.a.attachCallback(n,t)},removeItem:function(e,t){var n=vb("chat.remove.storage",e);return Ap.a.attachCallback(n,t)}},Tb={setCss:function(e){return vb("chat.action.iframe.setCss",e)},show:function(){return vb("chat.action.iframe.show")},hide:function(){return vb("chat.action.iframe.hide")}},Rb={getPageStats:function(){return vb("chat.get.page.stats")}},kb={isFocused:function(){return vb("chat.action.window.is_visible")},startTitleBlink:function(e){return vb("chat.action.window.title.start_blink",e)},stopTitleBlink:function(){return vb("chat.action.window.title.stop_blink")}},_b={googleAnalytics:{ga:function(e,t){return vb("chat.integration.google_analytics.ga",e,t)}},segment:{track:function(e,t){return vb("chat.integration.segment.track",e,t)}},mixpanel:{track:function(e,t){return vb("chat.integration.mixpanel.track",e,t)}},shopify:{isOnShopify:function(){return vb("chat.integration.shopify.isOnShopify")}},wooCommerce:{fetchWooCommerceDetails:function(){return vb("chat.integration.wooCommerce.fetchWooCommerceDetails")}}},Sb=function(e){return vb("chat.action.ajax",e)},Ab=regeneratorRuntime.mark(Pb),Cb=regeneratorRuntime.mark(Db),Nb=regeneratorRuntime.mark(Fb);function Pb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(N,Db);case 2:return e.next=4,Object(jp.p)(P,Fb);case 4:case"end":return e.stop()}}),Ab)}function Db(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(jp.c)(gb);case 1:case"end":return e.stop()}}),Cb)}function Fb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(jp.c)(hb);case 1:case"end":return e.stop()}}),Nb)}var Mb=regeneratorRuntime.mark(Bb),Lb=regeneratorRuntime.mark(Gb),Vb=regeneratorRuntime.mark(Ub),Hb=regeneratorRuntime.mark(Wb);function Bb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(C,Gb);case 2:return e.next=4,Object(jp.p)(L,Ub);case 4:return e.next=6,Object(jp.p)(V,Wb);case 6:return e.next=8,Object(jp.p)([Yn,Qn,zr,Fu,Kr,Jr,nu,ru,au,B,G,Xl],rb);case 8:return e.next=10,Object(jp.p)(U,qb);case 10:return e.next=12,Object(jp.p)([ru,au,nu,B,G],Zd);case 12:case"end":return e.stop()}}),Mb)}function Gb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(gb);case 2:return e.next=4,Object(jp.c)(hb);case 4:case"end":return e.stop()}}),Lb)}function Ub(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(tb);case 2:case"end":return e.stop()}}),Vb)}function Wb(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(nb);case 2:case"end":return e.stop()}}),Hb)}var qb=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(q());case 2:return e.next=4,Object(jp.c)(fm);case 4:case"end":return e.stop()}}),e)})),zb=n("Xdwf"),Kb=n.n(zb);function Jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jb(n,!0).forEach((function(t){Yb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jb(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Zb=regeneratorRuntime.mark(cg),$b=regeneratorRuntime.mark(og),eg=regeneratorRuntime.mark(ig),tg=regeneratorRuntime.mark(sg),ng=regeneratorRuntime.mark(ug),rg=regeneratorRuntime.mark(lg),ag=12e4;function cg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Jl,og);case 2:return e.next=4,Object(jp.p)(ne,ig);case 4:return e.next=6,Object(jp.p)(up,ig);case 6:return e.next=8,Object(jp.p)(lp,ig);case 8:return e.next=10,Object(jp.p)(me,ig);case 10:return e.next=12,Object(jp.p)(pe,ig);case 12:return e.next=14,Object(jp.q)(ag,Yl,$f);case 14:return e.next=16,Object(jp.p)(Kr,td);case 16:return e.next=18,Object(jp.p)(Jl,sg);case 18:return e.next=20,Object(jp.p)(_u,sg);case 20:return e.next=22,Object(jp.p)([qa,Ua],ug);case 22:return e.next=24,Object(jp.p)(Yr,lg);case 24:case"end":return e.stop()}}),Zb)}function og(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(jb.startListening,"focus:window",$l);case 2:return e.next=4,Object(jp.c)(jb.startListening,"blur:window",$l);case 4:return e.next=6,Object(jp.c)(jb.startListening,"click:document",$l);case 6:return e.next=8,Object(jp.c)(jb.startListening,"keydown:document",$l);case 8:return e.next=10,Object(jp.c)(jb.startListening,"mousemove:document",$l);case 10:return e.next=12,Object(jp.c)(jb.startListening,"tap:document",$l);case 12:return e.next=14,Object(jp.m)(ig);case 14:case"end":return e.stop()}}),$b)}function ig(){var e,t,n,r,a,c,o,i,s,u,p;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Object(jp.l)(gt);case 2:return e=m.sent,m.next=5,Object(jp.l)(Ot);case 5:return t=m.sent,m.next=8,Object(jp.l)(Le);case 8:if(m.sent!==ge.CHATTING&&!ge.WAITING){m.next=15;break}return m.next=12,Object(jp.c)(Rb.getPageStats);case 12:n=m.sent,m.next=19;break;case 15:return m.next=17,Object(jp.c)(af);case 17:r=m.sent,n=l.a.last(r);case 19:if(a=l.a.pick(n,["title","timestampUnix","url"]),a.timestampUnix,c=Qb(a,["timestampUnix"]),t.pages_visited=[Xb({},c,{timestamp:a.timestampUnix})],o=Kb.a.diff(e,t),i=l.a.groupBy(o,"kind"),s=l.a.concat(i.N,i.E,[]).filter(Boolean),u=l.a.map(s,(function(e){return e.path[0]})),p=l.a.pick(t,u),!l.a.isEmpty(p)){m.next=29;break}return m.abrupt("return");case 29:return m.prev=29,m.next=32,Object(jp.c)(Zf,p);case 32:m.next=37;break;case 34:m.prev=34,m.t0=m.catch(29),console.warn("Unable to sync visitor properties",m.t0);case 37:case"end":return m.stop()}}),eg,null,[[29,34]])}function sg(){var e,t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(jp.l)(Le);case 2:if(e=a.sent,l.a.includes([ge.CHATTING,ge.WAITING],e)){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,Object(jp.l)(Ft);case 7:return t=a.sent,n=t.agentId,r=t.agentName,a.prev=10,a.next=13,Object(jp.c)(ed,{chat_status:bt.CHATTING,agent_chat_id:n,agent_name:r});case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(10),console.error("Error while setting chat accet status",a.t0);case 18:case"end":return a.stop()}}),tg,null,[[10,15]])}function ug(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(jp.c)(ed,{chat_status:bt.CHAT_ENDED});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error while setting chat accet status",e.t0);case 8:case"end":return e.stop()}}),ng,null,[[0,5]])}function lg(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=l.a.get(e,"payload.messageId")){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,Object(jp.c)(rd,t);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.error("Error while upating message read status",n.t0);case 11:case"end":return n.stop()}}),rg,null,[[3,8]])}var pg=regeneratorRuntime.mark(Og),mg=regeneratorRuntime.mark(hg),fg=regeneratorRuntime.mark(xg),dg=regeneratorRuntime.mark(jg),bg=regeneratorRuntime.mark(yg),gg=regeneratorRuntime.mark(Eg);function Og(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(re,hg);case 2:return e.next=4,Object(jp.p)(ae,hg);case 4:return e.next=6,Object(jp.p)(ce,hg);case 6:return e.next=8,Object(jp.p)(oe,hg);case 8:return e.next=10,Object(jp.p)(ne,hg);case 10:return e.next=12,Object(jp.p)(ie,hg);case 12:return e.next=14,Object(jp.p)(se,hg);case 14:return e.next=16,Object(jp.p)(pe,hg);case 16:return e.next=18,Object(jp.p)([de,be],hg);case 18:return e.next=20,Object(jp.p)(fe,hg);case 20:return e.next=22,Object(jp.p)(ue,hg);case 22:return e.next=24,Object(jp.p)(Wa,vg(ge.PASSIVE));case 24:return e.next=26,Object(jp.p)(Cu,vg(ge.PASSIVE));case 26:return e.next=28,Object(jp.p)(Bs,vg(ge.SENDING_FIRST_MESSAGE));case 28:return e.next=30,Object(jp.p)(Gs,vg(ge.WAITING));case 30:return e.next=32,Object(jp.p)(_u,vg(ge.CHATTING));case 32:return e.next=34,Object(jp.p)(qa,jg);case 34:return e.next=36,Object(jp.p)(qs,jg);case 36:return e.next=38,Object(jp.p)(Su,jg);case 38:return e.next=40,Object(jp.p)(Pu,jg);case 40:return e.next=42,Object(jp.p)(_u,xg);case 42:return e.next=44,Object(jp.p)(Gs,yg);case 44:return e.next=46,Object(jp.p)(M,Eg);case 46:return e.next=48,Object(jp.p)(Zn,Eg);case 48:return e.next=50,Object(jp.p)(ne,Eg);case 50:case"end":return e.stop()}}),pg)}function hg(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(qe);case 2:return e=t.sent,t.next=5,Object(jp.c)([Ib,Ib.setItem],"visitor",JSON.stringify(e));case 5:case"end":return t.stop()}}),mg)}function vg(e){return regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Yp,e);case 2:case"end":return t.stop()}}),t)}))}function xg(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.h)(Ee({timestamp:(new Date).getTime()}));case 2:return t.next=4,Object(jp.h)(ye({agentId:Object(u.get)(e,"agentId")}));case 4:case"end":return t.stop()}}),fg)}function jg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(Ee({timestamp:(new Date).getTime()}));case 2:case"end":return e.stop()}}),dg)}function yg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(ye({agentId:void 0}));case 2:return e.next=4,Object(jp.c)(of);case 4:case"end":return e.stop()}}),bg)}function Eg(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(_n);case 2:return e=t.sent,t.next=5,Object(jp.l)(zn);case 5:if(!t.sent){t.next=10;break}return t.next=9,Object(jp.l)(Xn);case 9:e=t.sent;case 10:return t.next=12,Object(jp.h)(ke(e));case 12:case"end":return t.stop()}}),gg)}function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wg(n,!0).forEach((function(t){Tg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wg(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rg(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kg=regeneratorRuntime.mark(Pg),_g=regeneratorRuntime.mark(Dg),Sg=regeneratorRuntime.mark(Fg),Ag=regeneratorRuntime.mark(Mg),Cg=regeneratorRuntime.mark(Lg),Ng=regeneratorRuntime.mark(Vg);function Pg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(pe,pf);case 2:return e.next=4,Object(jp.g)(Mg);case 4:return e.next=6,Object(jp.p)(Js,Dg);case 6:return e.next=8,Object(jp.p)(Ks,Lg);case 8:return e.next=10,Object(jp.p)(zs,Fg);case 10:case"end":return e.stop()}}),kg)}function Dg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(tf);case 2:case"end":return e.stop()}}),_g)}function Fg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.i)(ji());case 2:return e.next=4,Object(jp.c)(tf);case 4:case"end":return e.stop()}}),Sg)}function Mg(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.a)(Ws);case 2:e=n.sent;case 3:return n.next=6,Object(jp.n)(e);case 6:return t=n.sent,n.next=9,Object(jp.c)(Vg,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}}),Ag)}function Lg(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.integrationName,n=e.integrationData,a.next=3,Object(jp.l)(Fe);case 3:return r=a.sent,a.prev=4,a.next=7,Object(jp.c)(Um,r,"VisitorDataFromIntegration",JSON.stringify({appName:t,data:n}));case 7:return a.next=9,Object(jp.h)(eu());case 9:a.next=16;break;case 11:return a.prev=11,a.t0=a.catch(4),console.error("Failed to send integration data to agent. Integration name: ".concat(t,", Integration data:"),n,"\nError:",a.t0),a.next=16,Object(jp.h)(tu({error:a.t0}));case 16:case"end":return a.stop()}}),Cg,null,[[4,11]])}function Vg(e){var t,n,r,a,c,o,i,s,u,l,p,m,f;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.messageType,n=e.chatId,r=e.tempChatId,a=e.tempMessageId,c=Rg(e,["messageType","chatId","tempChatId","tempMessageId"]),o=!1,i=n,!r){d.next=7;break}return o=!0,d.next=7,Object(jp.h)(he({chatId:r}));case 7:return d.next=9,Object(jp.c)(Pm,Ig({messageType:t,isInitiating:o},c));case 9:if(s=d.sent,u=s.messageId,l=s.departmentId,p=s.err,m=s.replyFor,f=s.chatId,!o){d.next=18;break}if(p){d.next=18;break}return d.next=16,Object(jp.h)(Xs({tempChatId:r,chatId:f,departmentId:l}));case 16:return d.next=18,Object(jp.h)(he({chatId:f}));case 18:if(!p){d.next=23;break}return d.next=21,Object(jp.h)(Zs({chatId:i||r,tempMessageId:a}));case 21:d.next=27;break;case 23:return d.next=25,Object(jp.h)(Qs({chatId:f,tempMessageId:a,messageId:u,timestamp:(new Date).getTime(),replyFor:m,messageType:t}));case 25:return d.next=27,Object(jp.c)(dm);case 27:case"end":return d.stop()}}),Ng)}function Hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hg(n,!0).forEach((function(t){Gg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hg(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ug=regeneratorRuntime.mark(qg),Wg=regeneratorRuntime.mark(zg);function qg(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(zc,zg);case 2:return e.next=4,Object(jp.p)(Jc,Kg);case 4:case"end":return e.stop()}}),Ug)}function zg(){var e,t,n,r,a,c,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(jp.l)(_c)||{};case 2:e=i.sent,i.t0=regeneratorRuntime.keys(e);case 4:if((i.t1=i.t0()).done){i.next=10;break}if(t=i.t1.value,!1!==e[t].isValid){i.next=8;break}return i.abrupt("return");case 8:i.next=4;break;case 10:return i.next=12,Object(jp.l)(Mc);case 12:return n=i.sent,i.next=15,Object(jp.l)(Lc);case 15:return r=i.sent,a={},Object.keys(r).forEach((function(e){a[e]=Object.values(r[e]).map((function(e){return l.a.trim(e)}))})),i.next=20,Object(jp.h)(Ie(a));case 20:return i.next=22,Object(jp.c)(Kp,Bg({},n));case 22:return c=n.department,i.next=25,Object(jp.l)(hr,c);case 25:if(o=i.sent,o.isAvailable){i.next=32;break}return i.next=30,Object(jp.c)(Hd);case 30:i.next=34;break;case 32:return i.next=34,Object(jp.h)(Ya());case 34:case"end":return i.stop()}}),Wg)}var Kg=regeneratorRuntime.mark((function e(t){var n,r,a,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=l.a.get(n,"messageId",""),a={text:"",replyFor:r,messageType:"PrechatForm:Response"},e.next=5,Object(jp.l)(_c)||{};case 5:c=e.sent,e.t0=regeneratorRuntime.keys(c);case 7:if((e.t1=e.t0()).done){e.next=13;break}if(o=e.t1.value,!1!==c[o].isValid){e.next=11;break}return e.abrupt("return");case 11:e.next=7;break;case 13:return e.next=15,Object(jp.h)(Za(Bg({},a)));case 15:return e.next=17,Object(jp.h)({type:"PRECHAT_FORM/DELETE_PRECHAT_MESSAGEID"});case 17:return e.next=19,Object(jp.h)(Ya());case 19:case"end":return e.stop()}}),e)})),Jg=regeneratorRuntime.mark($g),Xg=regeneratorRuntime.mark(eO),Yg=regeneratorRuntime.mark(tO),Qg=regeneratorRuntime.mark(nO),Zg=7e3;function $g(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(hc,eO);case 2:return e.next=4,Object(jp.p)(xc,tO);case 4:case"end":return e.stop()}}),Jg)}function eO(){var e,t,n,r,a,c,o,i,s,u,p,m,f;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(jp.l)(Cc);case 2:return e=d.sent,d.next=5,Object(jp.l)(Nc)||{};case 5:t=d.sent,d.t0=regeneratorRuntime.keys(t);case 7:if((d.t1=d.t0()).done){d.next=13;break}if(n=d.t1.value,!1!==t[n].isValid){d.next=11;break}return d.abrupt("return");case 11:d.next=7;break;case 13:return d.next=15,Object(jp.l)(Yt);case 15:return r=d.sent,d.next=18,Object(jp.l)(nn);case 18:return a=d.sent,d.next=21,Object(jp.l)(Ut);case 21:for(s in c=d.sent,o={},i=function(t){var n=e[t];-1!==t.indexOf("PCF-")?Object.values(n).forEach((function(e){o["customPrechatFields[".concat(t,"][]")]=l.a.trim(e)})):(l.a.includes(["department","visitorConsent"],t)||(o[t]=l.a.trim(n)),"visitorConsent"===t&&(o.consent={isAccepted:!0}))},e)i(s);return d.next=27,Object(jp.l)(ut);case 27:if(u=d.sent,!l.a.isEmpty(u))for(p in u)m=u[p],o["customFields[".concat(p,"]")]=l.a.trim(m);if(o.chatFromUrl=c,!(f=l.a.get(e,"department"))){d.next=35;break}return d.next=34,Object(jp.l)(tn,f);case 34:a=d.sent;case 35:return o.departmentId=a,d.prev=36,d.next=39,Object(jp.c)(Of.a,"".concat("https://happyfoxchat.com","/company/").concat(r,"/offline"),{method:"POST",data:o});case 39:if("OK"!==d.sent.statusText){d.next=43;break}return d.next=43,Object(jp.h)(yc());case 43:d.next=48;break;case 45:d.prev=45,d.t2=d.catch(36),console.error("Error while posting offline data",d.t2);case 48:case"end":return d.stop()}}),Xg,null,[[36,45]])}function tO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.m)(nO);case 2:case"end":return e.stop()}}),Yg)}function nO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.f)(Zg);case 2:return e.next=4,Object(jp.h)(jc());case 4:return e.next=6,Object(jp.h)(z());case 6:case"end":return e.stop()}}),Qg)}function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rO(n,!0).forEach((function(t){cO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oO(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var iO=regeneratorRuntime.mark(yO),sO=regeneratorRuntime.mark(EO),uO=regeneratorRuntime.mark(wO),lO=regeneratorRuntime.mark(IO),pO=regeneratorRuntime.mark(TO),mO=regeneratorRuntime.mark(RO),fO=regeneratorRuntime.mark(kO),dO=regeneratorRuntime.mark(_O),bO=regeneratorRuntime.mark(SO),gO=regeneratorRuntime.mark(AO),OO=regeneratorRuntime.mark(CO),hO=regeneratorRuntime.mark(NO),vO=regeneratorRuntime.mark(PO),xO=regeneratorRuntime.mark(DO),jO=1e3;function yO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Us,RO);case 2:return e.next=4,Object(jp.p)(Ua,TO);case 4:return e.next=6,Object(jp.o)(Ga,wO);case 6:return e.next=8,Object(jp.o)(Ka,IO);case 8:return e.next=10,Object(jp.p)(Wa,SO);case 10:return e.next=12,Object(jp.p)(Cu,AO);case 12:return e.next=14,Object(jp.p)(Au,CO);case 14:return e.next=16,Object(jp.e)(200,Ja,kO);case 16:return e.next=18,Object(jp.o)(Nu,_O);case 18:return e.next=20,Object(jp.p)([Ha,za],EO);case 20:return e.next=22,Object(jp.e)(jO,Xa,DO);case 22:case"end":return e.stop()}}),iO)}function EO(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(pc);case 2:return e=r.sent,r.next=5,Object(jp.l)(Mn);case 5:return t=r.sent,r.next=8,Object(jp.l)(Le);case 8:if(n=r.sent,!(e&&!l.a.isEmpty(t)&&n===ge.PASSIVE)){r.next=13;break}return r.next=13,Object(jp.h)(uc());case 13:case"end":return r.stop()}}),sO)}function wO(e){var t,n,r,a,c,o,i,s,u,p,m,f,d,b,g,O,h,v,x,j,y,E,w,I,T;return regeneratorRuntime.wrap((function(R){for(;;)switch(R.prev=R.next){case 0:return t=e.payload,n=t.text,r=oO(t,["text"]),R.next=3,Object(jp.l)(ua);case 3:return a=R.sent,R.next=6,Object(jp.l)(la);case 6:if(c=R.sent,a||c){R.next=12;break}return R.next=11,Object(jp.c)(Hd,{message:n});case 11:return R.abrupt("return");case 12:return R.next=14,Object(jp.l)(Fe);case 14:return o=R.sent,R.next=17,Object(jp.c)(zu.s4);case 17:if(s=R.sent,o){R.next=24;break}return R.next=21,Object(jp.c)(zu.s4);case 21:return o=i=R.sent,R.next=24,Object(jp.h)(ac({tempChatId:i}));case 24:if("PrechatForm:Response"===(u=l.a.get(e.payload,"messageType","text"))){R.next=28;break}return R.next=28,Object(jp.h)(Qa({text:n,chatId:o,tempMessageId:s,replyFor:r.replyFor,messageType:u}));case 28:return p=aO({text:n,tempChatId:i,chatId:o,tempMessageId:s,messageType:u},r),R.next=31,Object(jp.l)(Le);case 31:if(R.sent===ge.CHATTING){R.next=65;break}return R.next=35,Object(jp.l)(Et);case 35:return m=R.sent,R.next=38,Object(jp.l)(zn);case 38:if(f=R.sent,!m){R.next=49;break}return R.next=42,Object(jp.l)(wt);case 42:d=R.sent,b=d.messages,g=d.agentChatId,O=d.agentName,h=g,v={agentId:g,agentName:O,proactiveMessage:l.a.get(b,"0.text"),timestamp:Ju.a.unix(l.a.get(b,"0.timestamp")).format()},Object.assign(p,{preferredAgent:h,proactiveChatReply:v}),R.next=65;break;case 49:if(!f){R.next=61;break}return R.next=52,Object(jp.l)(qn);case 52:x=R.sent,j=x.triggeredChatId,y=x.name,E=x.message,w=x.satisfiedAt,I={triggeredChatId:j,triggeredChatName:y,triggeredChatMessage:E,timestamp:new Date(w).toISOString()},Object.assign(p,{triggeredChatReply:I}),R.next=65;break;case 61:return R.next=63,Object(jp.l)(_n);case 63:T=R.sent,p.systemFirstMessage=T;case 65:return R.next=67,Object(jp.i)(Ys(l.a.omitBy(p,l.a.isNil)));case 67:case"end":return R.stop()}}),uO)}function IO(e){var t,n,r,a,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.attachment,o.next=3,Object(jp.l)(Fe);case 3:return n=o.sent,o.next=6,Object(jp.c)(zu.s4);case 6:if(a=o.sent,n){o.next=13;break}return o.next=10,Object(jp.c)(zu.s4);case 10:return n=r=o.sent,o.next=13,Object(jp.h)(ac({tempChatId:r}));case 13:return c=uo.getAttachmentType(t),o.next=16,Object(jp.h)($a({attachment:t,chatId:n,tempMessageId:a,messageType:c}));case 16:return o.next=18,Object(jp.i)(Ys({attachment:t,tempChatId:r,chatId:n,tempMessageId:a,messageType:c}));case 18:case"end":return o.stop()}}),lO)}function TO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(qm);case 2:case"end":return e.stop()}}),pO)}function RO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(ef);case 2:case"end":return e.stop()}}),mO)}function kO(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.text,r.next=3,Object(jp.l)(Fe);case 3:return n=r.sent,r.prev=4,r.next=7,Object(jp.c)(Wm,{chatId:n,text:t});case 7:r.next=11;break;case 9:r.prev=9,r.t0=r.catch(4);case 11:case"end":return r.stop()}}),fO,null,[[4,9]])}function _O(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(oc());case 2:return e.next=4,Object(jp.f)(3e3);case 4:return e.next=6,Object(jp.h)(ic());case 6:case"end":return e.stop()}}),dO)}function SO(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.silent,r.next=3,Object(jp.l)(pc);case 3:if(!r.sent){r.next=10;break}return r.next=7,Object(jp.l)(Fe);case 7:return n=r.sent,r.next=10,Object(jp.h)(lc({chatId:n}));case 10:return r.next=12,Object(jp.c)(NO,{silent:t});case 12:return r.next=14,Object(jp.l)(on);case 14:if(r.sent!==gc.INPROGRESS_CHAT){r.next=18;break}return r.next=18,Object(jp.h)(Ya());case 18:case"end":return r.stop()}}),bO)}function AO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(NO);case 2:case"end":return e.stop()}}),gO)}function CO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(NO);case 2:case"end":return e.stop()}}),OO)}function NO(){var e,t,n,r=arguments;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t=e.silent,n=[],a.next=5,Object(jp.h)(ve());case 5:return a.next=7,Object(jp.h)(vl(n));case 7:if(t){a.next=10;break}return a.next=10,Object(jp.c)(PO);case 10:return a.next=12,Object(jp.c)(bm);case 12:return a.next=14,Object(jp.h)(sc());case 14:case"end":return a.stop()}}),hO)}function PO(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(In);case 2:return e=r.sent,r.next=5,Object(jp.l)(et);case 5:return t=r.sent,r.next=8,Object(jp.l)(tt);case 8:n=r.sent,r.t0=!0,r.next=r.t0===!e?12:r.t0===(t&&!n)?15:18;break;case 12:return r.next=14,Object(jp.h)(Vi());case 14:return r.abrupt("break",21);case 15:return r.next=17,Object(jp.h)(Qi());case 17:return r.abrupt("break",21);case 18:return r.next=20,Object(jp.h)(rc());case 20:return r.abrupt("break",21);case 21:case"end":return r.stop()}}),vO)}function DO(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(Fe);case 2:return t=r.sent,n=l.a.get(e,"payload.messageId"),r.next=6,Object(jp.c)(df,t,n);case 6:case"end":return r.stop()}}),xO)}var FO=regeneratorRuntime.mark(MO);function MO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.m)(LO);case 2:case"end":return e.stop()}}),FO)}var LO=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(jp.n)("AVAILABILITY/START_AVAILABILITY_POLL");case 3:return e.next=5,Object(jp.j)([Object(jp.c)(md),Object(jp.n)("AVAILABILITY/STOP_AVAILABILITY_POLL")]);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})),VO=n("EkVg"),HO=n.n(VO),BO=n("C87V"),GO=n.n(BO),UO=regeneratorRuntime.mark(ZO),WO=regeneratorRuntime.mark($O),qO=regeneratorRuntime.mark(eh),zO=regeneratorRuntime.mark(th),KO=regeneratorRuntime.mark(nh),JO=regeneratorRuntime.mark(rh),XO=regeneratorRuntime.mark(ah),YO=new Audio(HO.a),QO=new Audio(GO.a);function ZO(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Su,$O);case 2:return e.next=4,Object(jp.p)(Pu,$O);case 4:return e.next=6,Object(jp.p)(Yn,eh);case 6:return e.next=8,Object(jp.p)(zr,ah);case 8:case"end":return e.stop()}}),UO)}function $O(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Be);case 2:if(e.sent){e.next=6;break}return e.next=6,Object(jp.c)(th);case 6:case"end":return e.stop()}}),WO)}function eh(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(Be);case 2:return e=t.sent,t.next=5,Object(jp.l)(Kn);case 5:if(t.sent||e){t.next=9;break}return t.next=9,Object(jp.c)(nh);case 9:case"end":return t.stop()}}),qO)}function th(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:YO.paused&&YO.play();case 1:case"end":return e.stop()}}),zO)}function nh(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:QO.paused&&(e=QO.play())&&e.catch((function(e){console.error("Error while playing triggered chat audio:",e)}));case 1:case"end":return t.stop()}}),KO)}function rh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(nh);case 2:case"end":return e.stop()}}),JO)}function ah(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.l)(Be);case 2:return e=n.sent,n.next=5,Object(jp.l)(jt);case 5:if(t=n.sent,e||t!==bt.ENGAGED){n.next=9;break}return n.next=9,Object(jp.c)(rh);case 9:case"end":return n.stop()}}),XO)}var ch=regeneratorRuntime.mark(sh),oh=regeneratorRuntime.mark(uh),ih=regeneratorRuntime.mark(lh);function sh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Mi,lh);case 2:return e.next=4,Object(jp.p)(Li,uh);case 4:case"end":return e.stop()}}),ch)}function uh(e){var t,n,r,a,c,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(jp.l)(Yt);case 3:return n=i.sent,i.next=6,Object(jp.l)(Ge);case 6:return r=i.sent,i.next=9,Object(jp.l)(Me);case 9:for(o in a=i.sent,c=new FormData,t)t[o]&&c.append(o,t[o]);return c.append("visitorChatId",r),c.append("conversationId",a),c.append("ratedOn",(new Date).toISOString()),c.append("type","visitor-given"),i.prev=16,i.next=19,Object(jp.c)(Of.a,"".concat("https://happyfoxchat.com","/api/v2/company/").concat(n,"/rating"),{method:"POST",data:new URLSearchParams(c)});case 19:if("OK"!==i.sent.statusText){i.next=29;break}return i.next=23,Object(jp.h)(Bi());case 23:return i.next=25,Object(jp.c)(jm);case 25:return i.next=27,Object(jp.f)(5e3);case 27:return i.next=29,Object(jp.h)(Hi());case 29:i.next=34;break;case 31:i.prev=31,i.t0=i.catch(16),console.error("Unable to submit ratings",i.t0);case 34:case"end":return i.stop()}}),oh,null,[[16,31]])}function lh(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.l)(et);case 2:return e=n.sent,n.next=5,Object(jp.l)(tt);case 5:if(t=n.sent,!e||t){n.next=11;break}return n.next=9,Object(jp.h)(Qi());case 9:n.next=13;break;case 11:return n.next=13,Object(jp.h)(rc());case 13:case"end":return n.stop()}}),ih)}var ph=regeneratorRuntime.mark(dh),mh=regeneratorRuntime.mark(bh),fh=regeneratorRuntime.mark(gh);function dh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Io,bh);case 2:return e.next=4,Object(jp.p)(To,gh);case 4:case"end":return e.stop()}}),ph)}function bh(){var e,t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(jp.h)(Ao());case 2:return a.next=4,Object(jp.l)(Pc);case 4:return e=a.sent,a.next=7,Object(jp.l)(We);case 7:return t=a.sent,n=e.map((function(e){return e.fieldId})),r=Object.assign({},Object(u.pick)(t,n)),a.next=12,Object(jp.h)(So(r));case 12:return a.next=14,Object(jp.h)(ko());case 14:case"end":return a.stop()}}),mh)}function gh(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(Dc);case 2:return e=r.sent,r.next=5,Object(jp.l)(Fc)||{};case 5:t=r.sent,r.t0=regeneratorRuntime.keys(t);case 7:if((r.t1=r.t0()).done){r.next=13;break}if(n=r.t1.value,!1!==t[n].isValid){r.next=11;break}return r.abrupt("return");case 11:r.next=7;break;case 13:return r.next=15,Object(jp.c)(Kp,e);case 15:return r.next=17,Object(jp.h)(_o());case 17:case"end":return r.stop()}}),fh)}var Oh,hh=regeneratorRuntime.mark(Ah),vh=regeneratorRuntime.mark(Nh),xh=regeneratorRuntime.mark(Ph),jh=regeneratorRuntime.mark(Dh),yh=regeneratorRuntime.mark(Mh),Eh=regeneratorRuntime.mark(Lh),wh=regeneratorRuntime.mark(Gh),Ih=regeneratorRuntime.mark(Uh),Th=regeneratorRuntime.mark(Wh),Rh=regeneratorRuntime.mark(zh),kh=5,_h=25,Sh=[];function Ah(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Ia,Mh);case 2:return e.next=4,Object(jp.p)(wa,Nh);case 4:return e.next=6,Object(jp.p)(Wa,Ch);case 6:return e.next=8,Object(jp.p)(Cu,Ch);case 8:return e.next=10,Object(jp.p)(Ea,Ph);case 10:case"end":return e.stop()}}),hh)}var Ch=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===Sh.length){e.next=3;break}return e.next=3,Object(jp.c)(Nh);case 3:case"end":return e.stop()}}),e)}));function Nh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(_a());case 2:return Fh(),e.next=5,Object(jp.f)(3e3);case 5:return e.next=7,Object(jp.h)(Fa());case 7:return e.next=9,Object(jp.f)(1e3);case 9:return e.next=11,Object(jp.c)(Dh);case 11:case"end":return e.stop()}}),vh)}function Ph(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.h)(Aa());case 2:return e.next=4,Object(jp.f)(3e3);case 4:return e.next=6,Object(jp.h)(Fa());case 6:return e.next=8,Object(jp.f)(1e3);case 8:return e.next=10,Object(jp.c)(Dh);case 10:case"end":return e.stop()}}),xh)}function Dh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sh=[],e.next=3,Object(jp.h)(Da());case 3:case"end":return e.stop()}}),jh)}function Fh(){Oh&&(Oh.cancel("File upload cancelled"),Oh=void 0)}function Mh(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.files,n.next=3,Object(jp.c)(Lh,t);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:return Sh=Sh.concat(t),n.next=9,Object(jp.h)(Ra(Sh.length));case 9:return n.next=11,Object(jp.c)(Uh);case 11:case"end":return n.stop()}}),yh)}function Lh(){var e,t,n=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((e=n.length>0&&void 0!==n[0]?n[0]:[]).length){r.next=3;break}return r.abrupt("return",!1);case 3:if((t=[]).push(Vh(e)),t.push(Hh(e)),t.push(Bh(e)),t=Object(u.compact)(t),!Object(u.isEmpty)(t)){r.next=10;break}return r.abrupt("return",!0);case 10:return r.next=12,Object(jp.h)(Pa(t));case 12:return r.abrupt("return",!1);case 13:case"end":return r.stop()}}),Eh)}function Vh(e){if(e.length+Sh.length>kh)return{type:"INVALID_COUNT",meta:{maxLimit:kh}}}function Hh(e){var t;return Object(u.forEach)(e,(function(e){if(!uo.isValidMimeType(e.type))return t={type:"INVALID_TYPE"},!1})),t}function Bh(e){var t,n,r;return Object(u.forEach)(e,(function(e){if(n=e.size,(r=n/1048576)>_h)return t={type:"INVALID_SIZE",meta:{fileSize:r.toFixed(2),maxSize:_h+" MB"}},!1})),t}function Gh(e){var t,n,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=e.name,c.t1=e.type,c.next=4,Object(jp.l)(Yt);case 4:return c.t2=c.sent,t={file:c.t0,type:c.t1,embedToken:c.t2},n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),r="".concat("https://happyfoxchat.com","/api/v1/s3-signature?").concat(n),c.next=10,Object(jp.c)(Of.a,r);case 10:if("OK"!==(a=c.sent).statusText){c.next=15;break}return c.abrupt("return",a);case 15:return c.abrupt("return",{err:new Error("Failed to get signed url")});case 16:case"end":return c.stop()}}),wh)}function Uh(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Sh[0]){a.next=5;break}return a.next=4,Object(jp.h)(ka());case 4:return a.abrupt("return");case 5:return a.prev=5,a.next=8,Object(jp.c)(Gh,t);case 8:if(n=a.sent,r=n.data,!n.err){a.next=15;break}return a.next=14,Object(jp.h)(Sa());case 14:return a.abrupt("return");case 15:return t.signedUrl=r.signedUrl,t.url=r.serveUrl,a.next=19,Object(jp.c)(Wh,t);case 19:return a.next=21,Object(jp.h)(Na());case 21:return a.next=23,Object(jp.h)(ec({file:t}));case 23:return Sh.shift(),a.next=26,Object(jp.c)(e);case 26:a.next=32;break;case 28:return a.prev=28,a.t0=a.catch(5),a.next=32,Object(jp.h)(Sa());case 32:case"end":return a.stop()}}),e,null,[[5,28]])})),t.next=3,Object(jp.c)(e);case 3:case"end":return t.stop()}}),Ih)}function Wh(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.c)(qh,e);case 2:return t=n.sent,n.next=5,Object(jp.g)(zh,t);case 5:case"end":return n.stop()}}),Th)}function qh(e){return Object(xp.c)((function(t){return function(e,t,n,r){var a=e.signedUrl;Oh=Of.a.CancelToken.source();try{Of.a.put(a,e,{headers:{"Content-Type":e.type},cancelToken:Oh.token,onUploadProgress:t}).then((function(){return r(xp.a)}))}catch(e){n(e)}}(e,(function(e){var n=e.total,r=e.loaded,a=Math.round(100*r/n);t({progress:a})}),(function(){t({err:new Error("Upload failed")})}),t),function(){}}))}function zh(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(jp.n)(e);case 3:if(t=r.sent,n=t.progress,!t.err){r.next=10;break}return r.next=9,Object(jp.h)(Sa());case 9:return r.abrupt("return");case 10:return r.next=12,Object(jp.h)(Ca(n));case 12:r.next=0;break;case 14:case"end":return r.stop()}}),Rh)}var Kh=regeneratorRuntime.mark(Xh),Jh=regeneratorRuntime.mark(Zh);function Xh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Zn,Yh);case 2:return e.next=4,Object(jp.p)(Gs,Qh);case 4:return e.next=6,Object(jp.p)(zr,Qh);case 6:return e.next=8,Object(jp.p)(fu,Zh);case 8:case"end":return e.stop()}}),Kh)}var Yh=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,e.next=3,Object(jp.c)(tb);case 3:return e.next=5,Object(jp.h)(Za({text:n.text}));case 5:return e.next=7,Object(jp.h)(Ya());case 7:case"end":return e.stop()}}),e)})),Qh=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(zn);case 2:if(!e.sent){e.next=6;break}return e.next=6,Object(jp.h)($n());case 6:case"end":return e.stop()}}),e)}));function Zh(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(ua);case 2:if(e.sent){e.next=6;break}return e.next=6,Object(jp.c)(Qh);case 6:case"end":return e.stop()}}),Jh)}var $h,ev=n("/ntJ"),tv=n.n(ev),nv=n("8im8"),rv="CHAT_ACCEPTED_BY_AGENT",av=regeneratorRuntime.mark(fv),cv=regeneratorRuntime.mark(dv),ov=regeneratorRuntime.mark(bv),iv=regeneratorRuntime.mark(gv),sv=regeneratorRuntime.mark(Ov),uv=regeneratorRuntime.mark(hv),lv=regeneratorRuntime.mark(wv),pv=regeneratorRuntime.mark(Iv),mv=!1;function fv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(qr,xv);case 2:return e.next=4,Object(jp.p)(Ll,dv);case 4:return e.next=6,Object(jp.p)(Wa,jv);case 6:return e.next=8,Object(jp.p)(Jl,Ov);case 8:return e.next=10,Object(jp.p)(Xr,gv);case 10:return e.next=12,Object(jp.p)(Jr,Ev);case 12:return e.next=14,Object(jp.p)(F,yv);case 14:return e.next=16,Object(jp.p)(rv,wv);case 16:return e.next=18,Object(jp.p)(Gs,Iv);case 18:case"end":return e.stop()}}),av)}function dv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Et);case 2:if(!e.sent||mv){e.next=7;break}return e.next=6,Object(jp.g)(vv);case 6:$h=e.sent;case 7:case"end":return e.stop()}}),cv)}function bv(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=!0,r.next=3,Object(jp.l)(Le);case 3:return t=r.sent,r.next=6,Object(jp.l)(ua);case 6:return n=r.sent,t===ge.CHATTING||t===ge.WAITING?e=!1:n||(e=!1),r.abrupt("return",e);case 9:case"end":return r.stop()}}),ov)}function gv(e){var t,n,r,a,c,o,i,s,u,p,m,f;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=l.a.get(e,"payload",{}),d.next=3,Object(jp.c)(bv);case 3:if(d.sent){d.next=6;break}return d.abrupt("return");case 6:return d.next=8,Object(jp.l)(Et);case 8:return n=d.sent,d.next=11,Object(jp.l)(wt);case 11:return r=d.sent,d.next=14,Object(jp.l)(It);case 14:if(a=d.sent,!n&&!a){d.next=34;break}return d.next=18,Object(jp.l)(xt);case 18:if(c=d.sent,a){d.next=25;break}return a=tv()(),d.next=23,Object(jp.h)(ac({tempChatId:a}));case 23:return d.next=25,Object(jp.h)(ea(a));case 25:if(c!==t.agent){d.next=33;break}return d.next=28,Object(jp.h)(Lu({chatId:a,messageId:t.message_id,agentId:r.agentChatId,agentName:r.agentName,text:t.text,timestamp:t.timestamp}));case 28:return d.next=30,Object(jp.h)(ep(t));case 30:return d.next=32,Object(jp.c)(nd,t.message_id);case 32:case 33:return d.abrupt("return");case 34:return d.next=36,Object(jp.c)(Xf);case 36:return d.next=38,Object(jp.l)(wt);case 38:return r=d.sent,d.next=41,Object(jp.h)(Zr());case 41:if(a){d.next=47;break}return a=tv()(),d.next=45,Object(jp.h)(ac({tempChatId:a}));case 45:return d.next=47,Object(jp.h)(ea(a));case 47:o=r.messages||[],i=!0,s=!1,u=void 0,d.prev=51,p=o[Symbol.iterator]();case 53:if(i=(m=p.next()).done){d.next=60;break}return f=m.value,d.next=57,Object(jp.h)(Lu({messageId:f.message_id,chatId:a,agentId:r.agentChatId,agentName:r.agentName,text:f.text,timestamp:f.timestamp}));case 57:i=!0,d.next=53;break;case 60:d.next=66;break;case 62:d.prev=62,d.t0=d.catch(51),s=!0,u=d.t0;case 66:d.prev=66,d.prev=67,i||null==p.return||p.return();case 69:if(d.prev=69,!s){d.next=72;break}throw u;case 72:return d.finish(69);case 73:return d.finish(66);case 74:return d.next=76,Object(jp.c)(xm,r);case 76:return d.next=78,Object(jp.c)(kb.isFocused);case 78:if(!d.sent){d.next=83;break}return d.next=82,Object(jp.g)(vv);case 82:$h=d.sent;case 83:case"end":return d.stop()}}),iv,null,[[51,62,66,74],[67,,69,73]])}function Ov(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.visitorInfo,n.next=3,Object(jp.m)(hv,t);case 3:case"end":return n.stop()}}),sv)}function hv(e){var t,n,r,a,c,o,i,s,u,p,m,f,d,b,g,O,h;return regeneratorRuntime.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Object(jp.c)(bv);case 2:if(v.sent){v.next=5;break}return v.abrupt("return");case 5:return t=e.engage_messages||[],n=e.engaged_by,r=l.a.get(t,"0.timestamp"),a=e.chat_status,v.next=11,Object(jp.c)(kb.isFocused);case 11:if(c=v.sent,!r||a!==bt.ENGAGED||!c){v.next=54;break}return v.next=15,Object(jp.h)(Zr());case 15:return o=tv()(),v.next=18,Object(jp.h)(ac({tempChatId:o}));case 18:return v.next=20,Object(jp.h)(ea(o));case 20:i=l.a.get(e,"read_till"),s=l.a.get(e,"delivered_till"),u=!1,p=!1,m=function(e){var t=Vt.SENT;return i||s?(s&&!p&&(e===s&&(p=!0),t=Vt.DELIVERED),i&&!u&&(e===i&&(u=!0),t=Vt.READ),t):t},f=!0,d=!1,b=void 0,v.prev=28,g=t[Symbol.iterator]();case 30:if(f=(O=g.next()).done){v.next=37;break}return h=O.value,v.next=34,Object(jp.h)(Lu({messageId:h.message_id,chatId:o,agentId:n.agent_chat_id,agentName:n.agent_name,text:h.text,timestamp:h.timestamp,status:m(h.message_id)}));case 34:f=!0,v.next=30;break;case 37:v.next=43;break;case 39:v.prev=39,v.t0=v.catch(28),d=!0,b=v.t0;case 43:v.prev=43,v.prev=44,f||null==g.return||g.return();case 46:if(v.prev=46,!d){v.next=49;break}throw b;case 49:return v.finish(46);case 50:return v.finish(43);case 51:return v.next=53,Object(jp.g)(vv);case 53:$h=v.sent;case 54:case"end":return v.stop()}}),uv,null,[[28,39,43,51],[44,,46,50]])}var vv=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mv){e.next=10;break}return mv=!0,e.next=4,Object(jp.f)(18e4);case 4:return mv=!1,e.next=7,Object(jp.l)(Rt);case 7:return t=e.sent,e.next=10,Object(jp.h)($r({engagedMessageIds:t}));case 10:case"end":return e.stop()}}),e)})),xv=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,e.next=3,Object(jp.c)(tb);case 3:return e.next=5,Object(jp.h)(Za({text:n.text}));case 5:return e.next=7,Object(jp.h)(Ya());case 7:case"end":return e.stop()}}),e)})),jv=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Et);case 2:if(!e.sent){e.next=9;break}return e.next=6,Object(jp.l)(Rt);case 6:return t=e.sent,e.next=9,Object(jp.h)($r({engagedMessageIds:t}));case 9:case"end":return e.stop()}}),e)})),yv=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Ib.getItem,"proactiveChat");case 2:return t=e.sent,e.next=5,Object(jp.c)(nv.parseSafe,t);case 5:return n=e.sent,e.next=8,Object(jp.h)((r=n,{type:"RESTORE_PROACTIVE_CHAT_STATE",payload:l.a.pick(r,["badge_status"])}));case 8:case"end":return e.stop()}var r}),e)})),Ev=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Tt);case 2:return e.t0=e.sent,t={badge_status:e.t0},e.next=6,Object(jp.c)(Ib.setItem,"proactiveChat",t);case 6:case"end":return e.stop()}}),e)}));function wv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$h){e.next=3;break}return e.next=3,Object(jp.d)($h);case 3:case"end":return e.stop()}}),lv)}function Iv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Et);case 2:if(!e.sent){e.next=6;break}return e.next=6,Object(jp.h)(Ml());case 6:case"end":return e.stop()}}),pv)}var Tv=regeneratorRuntime.mark(Rv);function Rv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(up,Hp);case 2:return e.next=4,Object(jp.p)(lp,Hp);case 4:case"end":return e.stop()}}),Tv)}var kv=regeneratorRuntime.mark(Vv),_v=regeneratorRuntime.mark(Hv),Sv=regeneratorRuntime.mark(Bv),Av=regeneratorRuntime.mark(Gv),Cv=regeneratorRuntime.mark(Uv),Nv=regeneratorRuntime.mark(Wv),Pv=regeneratorRuntime.mark(qv),Dv=regeneratorRuntime.mark(zv),Fv=regeneratorRuntime.mark(Kv),Mv="HappyFoxChat",Lv={BADGE_CLICKED:"Chat badge clicked",CHAT_STARTED:"Chat started",CHAT_ENDED:"Chat ended",AGENT_JOINED:"Agent joined a chat",TRIGGERED_CHAT_ACTIVATED:"Triggered chat activated",OFFLINE_MESSAGE_SENT:"Offline message sent"};function Vv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(U,Hv);case 2:return e.next=4,Object(jp.p)(Gs,Bv);case 4:return e.next=6,Object(jp.p)(qa,Gv);case 6:return e.next=8,Object(jp.p)(_u,Uv);case 8:return e.next=10,Object(jp.p)(Yn,Wv);case 10:return e.next=12,Object(jp.p)(xc,qv);case 12:case"end":return e.stop()}}),kv)}function Hv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(zv,Lv.BADGE_CLICKED);case 2:case"end":return e.stop()}}),_v)}function Bv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(zv,Lv.CHAT_STARTED);case 2:case"end":return e.stop()}}),Sv)}function Gv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(zv,Lv.CHAT_ENDED);case 2:case"end":return e.stop()}}),Av)}function Uv(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.agentName,n.next=3,Object(jp.c)(zv,Lv.AGENT_JOINED,t);case 3:case"end":return n.stop()}}),Cv)}function Wv(e){var t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Object(jp.l)(Un,t.triggeredChatId);case 3:return n=r.sent,r.next=6,Object(jp.c)(zv,Lv.TRIGGERED_CHAT_ACTIVATED,n);case 6:case"end":return r.stop()}}),Nv)}function qv(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(zv,Lv.OFFLINE_MESSAGE_SENT);case 2:case"end":return e.stop()}}),Pv)}function zv(e,t,n){var r,a=arguments;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.length>3&&void 0!==a[3]?a[3]:{},c.next=3,Object(jp.l)($e,"google-analytics");case 3:if(c.sent){c.next=6;break}return c.abrupt("return");case 6:return"send","event",r=Mv,c.next=11,Object(jp.c)(Kv,"send","event",r,e,t,n);case 11:case"end":return c.stop()}}),Dv)}function Kv(e,t,n,r,a,c){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return null,o.next=3,Object(jp.c)(_b.googleAnalytics.ga,{eventName:e,eventHitType:t,eventCategory:n,eventAction:r,eventLabel:a,eventValue:c},null);case 3:case"end":return o.stop()}}),Fv)}var Jv=regeneratorRuntime.mark(rx),Xv=regeneratorRuntime.mark(ax),Yv=regeneratorRuntime.mark(cx),Qv=regeneratorRuntime.mark(ox),Zv=regeneratorRuntime.mark(ix),$v=regeneratorRuntime.mark(sx),ex=regeneratorRuntime.mark(ux),tx=regeneratorRuntime.mark(lx),nx={BADGE_CLICKED:"Chat badge clicked",CHAT_STARTED:"Chat started",CHAT_ENDED:"Chat ended",AGENT_JOINED:"Agent joined a chat",TRIGGERED_CHAT_ACTIVATED:"Triggered chat activated",OFFLINE_MESSAGE_SENT:"Offline message sent"};function rx(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(U,ax);case 2:return e.next=4,Object(jp.p)(Gs,cx);case 4:return e.next=6,Object(jp.p)(qa,ox);case 6:return e.next=8,Object(jp.p)(_u,ix);case 8:return e.next=10,Object(jp.p)(Yn,sx);case 10:return e.next=12,Object(jp.p)(xc,ux);case 12:case"end":return e.stop()}}),Jv)}function ax(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(Zt);case 2:return e=t.sent,t.next=5,Object(jp.c)(lx,nx.BADGE_CLICKED,{profileName:e});case 5:case"end":return t.stop()}}),Xv)}function cx(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.departmentId,a.next=3,Object(jp.l)(Zt);case 3:return n=a.sent,a.next=6,Object(jp.l)(oa,t);case 6:return r=a.sent,a.next=9,Object(jp.c)(lx,nx.CHAT_STARTED,{profileName:n,departmentName:r});case 9:case"end":return a.stop()}}),Yv)}function ox(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(Zt);case 2:return e=r.sent,r.next=5,Object(jp.l)(Bo);case 5:return t=r.sent,r.next=8,Object(jp.l)(oa,t);case 8:return n=r.sent,r.next=11,Object(jp.c)(lx,nx.CHAT_ENDED,{profileName:e,departmentName:n});case 11:case"end":return r.stop()}}),Qv)}function ix(e){var t,n,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.agentName,c.next=3,Object(jp.l)(Zt);case 3:return n=c.sent,c.next=6,Object(jp.l)(Bo);case 6:return r=c.sent,c.next=9,Object(jp.l)(oa,r);case 9:return a=c.sent,c.next=12,Object(jp.c)(lx,nx.AGENT_JOINED,{profileName:n,departmentName:a,agent:t});case 12:case"end":return c.stop()}}),Zv)}function sx(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jp.l)(Zt);case 3:return n=a.sent,a.next=6,Object(jp.l)(Un,t.triggeredChatId);case 6:return r=a.sent,a.next=9,Object(jp.c)(lx,nx.TRIGGERED_CHAT_ACTIVATED,{profileName:n,trigger:r});case 9:case"end":return a.stop()}}),$v)}function ux(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(Zt);case 2:return e=t.sent,t.next=5,Object(jp.c)(lx,nx.OFFLINE_MESSAGE_SENT,{profileName:e});case 5:case"end":return t.stop()}}),ex)}function lx(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.l)($e,"segment");case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,Object(jp.c)(_b.segment.track,e,t);case 7:case"end":return n.stop()}}),tx)}var px=regeneratorRuntime.mark(xx),mx=regeneratorRuntime.mark(jx),fx=regeneratorRuntime.mark(yx),dx=regeneratorRuntime.mark(Ex),bx=regeneratorRuntime.mark(wx),gx=regeneratorRuntime.mark(Ix),Ox=regeneratorRuntime.mark(Tx),hx=regeneratorRuntime.mark(Rx),vx={BADGE_CLICKED:"Chat badge clicked",CHAT_STARTED:"Chat started",CHAT_ENDED:"Chat ended",AGENT_JOINED:"Agent joined a chat",TRIGGERED_CHAT_ACTIVATED:"Triggered chat activated",OFFLINE_MESSAGE_SENT:"Offline message sent"};function xx(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(U,jx);case 2:return e.next=4,Object(jp.p)(Gs,yx);case 4:return e.next=6,Object(jp.p)(qa,Ex);case 6:return e.next=8,Object(jp.p)(_u,wx);case 8:return e.next=10,Object(jp.p)(Yn,Ix);case 10:return e.next=12,Object(jp.p)(xc,Tx);case 12:case"end":return e.stop()}}),px)}function jx(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(Zt);case 2:return e=t.sent,t.next=5,Object(jp.c)(Rx,vx.BADGE_CLICKED,{profileName:e});case 5:case"end":return t.stop()}}),mx)}function yx(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.departmentId,a.next=3,Object(jp.l)(Zt);case 3:return n=a.sent,a.next=6,Object(jp.l)(oa,t);case 6:return r=a.sent,a.next=9,Object(jp.c)(Rx,vx.CHAT_STARTED,{profileName:n,departmentName:r});case 9:case"end":return a.stop()}}),fx)}function Ex(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.l)(Zt);case 2:return e=r.sent,r.next=5,Object(jp.l)(Bo);case 5:return t=r.sent,r.next=8,Object(jp.l)(oa,t);case 8:return n=r.sent,r.next=11,Object(jp.c)(Rx,vx.CHAT_ENDED,{profileName:e,departmentName:n});case 11:case"end":return r.stop()}}),dx)}function wx(e){var t,n,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.agentName,c.next=3,Object(jp.l)(Zt);case 3:return n=c.sent,c.next=6,Object(jp.l)(Bo);case 6:return r=c.sent,c.next=9,Object(jp.l)(oa,r);case 9:return a=c.sent,c.next=12,Object(jp.c)(Rx,vx.AGENT_JOINED,{profileName:n,departmentName:a,agent:t});case 12:case"end":return c.stop()}}),bx)}function Ix(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jp.l)(Zt);case 3:return n=a.sent,a.next=6,Object(jp.l)(Un,t.triggeredChatId);case 6:return r=a.sent,a.next=9,Object(jp.c)(Rx,vx.TRIGGERED_CHAT_ACTIVATED,{profileName:n,trigger:r});case 9:case"end":return a.stop()}}),gx)}function Tx(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.l)(Zt);case 2:return e=t.sent,t.next=5,Object(jp.c)(Rx,vx.OFFLINE_MESSAGE_SENT,{profileName:e});case 5:case"end":return t.stop()}}),Ox)}function Rx(e,t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.l)($e,"mixpanel");case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,Object(jp.c)(_b.mixpanel.track,e,t);case 7:case"end":return n.stop()}}),hx)}var kx=regeneratorRuntime.mark(Mx),_x=regeneratorRuntime.mark(Lx),Sx=regeneratorRuntime.mark(Vx),Ax=regeneratorRuntime.mark(Hx),Cx=regeneratorRuntime.mark(Bx),Nx=regeneratorRuntime.mark(Gx),Px=regeneratorRuntime.mark(Ux),Dx="shopify",Fx=null;function Mx(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(D,Lx);case 2:return e.next=4,Object(jp.p)(_u,Vx);case 4:return e.next=6,Object(jp.p)(Yi,Hx);case 6:case"end":return e.stop()}}),kx)}function Lx(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Le);case 2:if(e.sent!==ge.CHATTING){e.next=6;break}return e.next=6,Object(jp.c)(Bx);case 6:case"end":return e.stop()}}),_x)}function Vx(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.agentName,t.next=3,Object(jp.c)(Bx);case 3:case"end":return t.stop()}}),Sx)}function Hx(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(Bx);case 2:case"end":return e.stop()}}),Ax)}function Bx(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(Ux);case 2:return e=r.sent,r.next=5,Object(jp.l)(rt);case 5:if(t=r.sent,e){r.next=9;break}return console.warn("HappyFox Chat widget not loaded on shopify page"),r.abrupt("return");case 9:if(t){r.next=11;break}return r.abrupt("return");case 11:return r.prev=11,r.next=14,Object(jp.c)(Gx);case 14:n=r.sent,r.next=21;break;case 17:return r.prev=17,r.t0=r.catch(11),console.error("Failed to fetch shopify cart info. Error:",r.t0),r.abrupt("return");case 21:return r.next=23,Object(jp.h)($s(Dx,{cartInfo:n}));case 23:case"end":return r.stop()}}),Cx,null,[[11,17]])}function Gx(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Ux);case 2:if(!t.sent){t.next=7;break}return t.next=6,Object(jp.c)(Sb,{url:"/cart.js",dataType:"json"});case 6:e=t.sent;case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),Nx)}function Ux(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("boolean"==typeof Fx){e.next=4;break}return e.next=3,Object(jp.c)(_b.shopify.isOnShopify);case 3:Fx=e.sent;case 4:return e.abrupt("return",Fx);case 5:case"end":return e.stop()}}),Px)}var Wx=regeneratorRuntime.mark($x),qx=regeneratorRuntime.mark(ej),zx=regeneratorRuntime.mark(tj),Kx=regeneratorRuntime.mark(nj),Jx=regeneratorRuntime.mark(rj),Xx=regeneratorRuntime.mark(aj),Yx=regeneratorRuntime.mark(cj),Qx="magento",Zx=null;function $x(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(D,ej);case 2:return e.next=4,Object(jp.p)(_u,tj);case 4:return e.next=6,Object(jp.p)(Yi,nj);case 6:case"end":return e.stop()}}),Wx)}function ej(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Le);case 2:if(e.sent!==ge.CHATTING){e.next=6;break}return e.next=6,Object(jp.c)(rj);case 6:case"end":return e.stop()}}),qx)}function tj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(rj);case 2:case"end":return e.stop()}}),zx)}function nj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(rj);case 2:case"end":return e.stop()}}),Kx)}function rj(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(cj);case 2:return e=r.sent,r.next=5,Object(jp.l)(ct);case 5:if(t=r.sent,e){r.next=9;break}return console.warn("HappyFox Chat widget not loaded on magento page"),r.abrupt("return");case 9:if(t){r.next=11;break}return r.abrupt("return");case 11:return r.prev=11,r.next=14,Object(jp.c)(aj);case 14:n=r.sent,r.next=21;break;case 17:return r.prev=17,r.t0=r.catch(11),console.error("Failed to fetch magento cart info. Error:",r.t0),r.abrupt("return");case 21:return r.next=23,Object(jp.h)($s(Qx,{cartInfo:n}));case 23:case"end":return r.stop()}}),Jx,null,[[11,17]])}function aj(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(cj);case 2:if(r.sent){r.next=6;break}throw console.warn("HappyFox Chat widget not loaded on magento page, so cannot fetch cart info"),new Rp.a("NOT_MAGENTO_PAGE","HappyFox Chat widget not loaded on magento page, so cannot fetch cart info");case 6:return r.next=8,Object(jp.l)(nt);case 8:return e=r.sent,r.next=11,Object(jp.l)(Ce);case 11:return t=r.sent,r.next=14,Object(jp.c)(Sb,{url:"".concat(e,"/integrationinfo?email=").concat(t),dataType:"json"});case 14:return n=r.sent,r.abrupt("return",n);case 16:case"end":return r.stop()}}),Xx)}function cj(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("boolean"==typeof Zx){n.next=8;break}return n.next=3,Object(jp.l)(qt);case 3:return e=n.sent,n.next=6,Object(jp.l)(ot);case 6:t=n.sent,Zx=e===t;case 8:return n.abrupt("return",Zx);case 9:case"end":return n.stop()}}),Yx)}var oj=regeneratorRuntime.mark(hj),ij=regeneratorRuntime.mark(vj),sj=regeneratorRuntime.mark(xj),uj=regeneratorRuntime.mark(jj),lj=regeneratorRuntime.mark(yj),pj=regeneratorRuntime.mark(Ej),mj=regeneratorRuntime.mark(wj),fj=regeneratorRuntime.mark(Ij),dj=regeneratorRuntime.mark(Tj),bj=regeneratorRuntime.mark(Rj),gj="woocommerce",Oj=null;function hj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(D,vj);case 2:return e.next=4,Object(jp.p)(_u,xj);case 4:return e.next=6,Object(jp.p)(Yi,jj);case 6:case"end":return e.stop()}}),oj)}function vj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Le);case 2:if(e.sent!==ge.CHATTING){e.next=6;break}return e.next=6,Object(jp.c)(yj);case 6:case"end":return e.stop()}}),ij)}function xj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(yj);case 2:case"end":return e.stop()}}),sj)}function jj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(yj);case 2:case"end":return e.stop()}}),uj)}function yj(){var e,t,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(jp.c)(wj);case 2:return e=r.sent,r.next=5,Object(jp.l)(at);case 5:if(t=r.sent,e){r.next=9;break}return console.warn("HappyFox Chat widget not loaded on WooCommerce page"),r.abrupt("return");case 9:if(t){r.next=11;break}return r.abrupt("return");case 11:return r.prev=11,r.next=14,Object(jp.c)(Ej);case 14:n=r.sent,r.next=21;break;case 17:return r.prev=17,r.t0=r.catch(11),console.error("Failed to fetch WooCommerce cart info. Error:",r.t0),r.abrupt("return");case 21:return r.next=23,Object(jp.h)($s(gj,{cartInfo:n}));case 23:case"end":return r.stop()}}),lj,null,[[11,17]])}function Ej(){var e,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(jp.c)(wj);case 2:if(n.sent){n.next=6;break}throw console.warn("HappyFox Chat widget not loaded on WooCommerce page, so cannot fetch cart info"),new Rp.a("NOT_WOOCOMMERCE_PAGE","HappyFox Chat widget not loaded on WooCommerce page, so cannot fetch cart info");case 6:return n.next=8,Object(jp.c)(Ij);case 8:return e=n.sent,n.next=11,Object(jp.l)(Ce);case 11:return t=n.sent,n.next=14,Object(jp.c)(Sb,{type:"post",url:e,data:{action:"integration_info",email:encodeURIComponent(t)},dataType:"json"});case 14:return n.abrupt("return",n.sent);case 15:case"end":return n.stop()}}),pj)}function wj(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Tj);case 2:return e=t.sent,t.abrupt("return",e.isOnWooCommerce);case 4:case"end":return t.stop()}}),mj)}function Ij(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(jp.c)(Tj);case 2:return e=t.sent,t.abrupt("return",e.ajaxUrl);case 4:case"end":return t.stop()}}),fj)}function Tj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Oj){e.next=4;break}return e.next=3,Object(jp.c)(Rj);case 3:Oj=e.sent;case 4:return e.abrupt("return",Oj);case 5:case"end":return e.stop()}}),dj)}function Rj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(_b.wooCommerce.fetchWooCommerceDetails);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),bj)}var kj=regeneratorRuntime.mark(Aj),_j=regeneratorRuntime.mark(Cj),Sj=regeneratorRuntime.mark(Nj);function Aj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)([Gs,le,ne,Ua],Cj);case 2:return e.next=4,Object(jp.p)(Xi,Nj);case 4:case"end":return e.stop()}}),kj)}function Cj(){var e,t,n,r,a,c,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(jp.l)(We);case 2:if(e=i.sent,t=e.email){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,Object(jp.l)(Yt);case 8:return n=i.sent,r=(new Date).getTime(),a="".concat("https://happyfoxchat.com","/company/").concat(n,"/integrations?email=").concat(t,"&timestamp=").concat(r),i.prev=11,i.next=14,Object(jp.c)(Of.a,a);case 14:return c=i.sent,o=c.data,i.next=18,Object(jp.h)(we(o));case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(11),console.error("Unable to fetch integrations",i.t0);case 23:case"end":return i.stop()}}),_j,null,[[11,20]])}function Nj(e){var t,n,r,a,c,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(jp.l)(Yt);case 2:return t=i.sent,n="".concat("https://happyfoxchat.com","/company/").concat(t,"/integrations"),r=e.payload,a=r.name,c=r.email,(o=new FormData).append("integration","mailchimp"),o.append("data[name]",a),o.append("data[email]",c),i.prev=9,i.next=12,Object(jp.c)(Of.a,n,{method:"POST",data:new URLSearchParams(o)});case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(9),console.error("Failed to subscribe to Mailchimp",i.t0);case 17:return i.next=19,Object(jp.h)(rc());case 19:case"end":return i.stop()}}),Sj,null,[[9,14]])}var Pj=regeneratorRuntime.mark(Dj);function Dj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.b)([Vv(),rx(),xx(),Mx(),$x(),hj(),Aj()]);case 2:case"end":return e.stop()}}),Pj)}var Fj=regeneratorRuntime.mark(Mj);function Mj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Su,Lj);case 2:return e.next=4,Object(jp.p)(Fu,Lj);case 4:return e.next=6,Object(jp.p)(Pu,Lj);case 6:return e.next=8,Object(jp.p)(H,Hj);case 8:return e.next=10,Object(jp.p)(Nl,Vj);case 10:return e.next=12,Object(jp.p)(Du,Vj);case 12:return e.next=14,Object(jp.p)(zr,Vj);case 14:return e.next=16,Object(jp.p)(Kr,Vj);case 16:return e.next=18,Object(jp.p)(Ua,Vj);case 18:return e.next=20,Object(jp.p)(Cu,Vj);case 20:return e.next=22,Object(jp.p)(Pl,Vj);case 22:return e.next=24,Object(jp.p)(Xa,Bj);case 24:case"end":return e.stop()}}),Fj)}var Lj=regeneratorRuntime.mark((function e(t){var n,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.a.get(t,"messageId")||l.a.get(t,"payload.messageId"),r=l.a.get(t,"status")||l.a.get(t,"payload.status"),!l.a.includes(["seen","read"],r)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(jp.l)(Kt);case 6:return a=e.sent,e.next=9,Object(jp.l)(cn);case 9:if(c=e.sent,a&&c){e.next=13;break}return e.next=13,Object(jp.h)(Fl({messageId:n}));case 13:case"end":return e.stop()}}),e)})),Vj=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Jt);case 2:if(t=e.sent){e.next=7;break}return e.next=6,Object(jp.c)(kb.stopTitleBlink);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,Object(jp.l)(jt);case 9:if(e.sent!==bt.ENGAGED){e.next=16;break}return e.next=13,Object(jp.l)(Ht);case 13:n=e.sent,e.next=19;break;case 16:return e.next=18,Object(jp.l)(Nt);case 18:n=e.sent;case 19:return r="".concat(t," new message").concat(t>1?"s":""," from ").concat(n),e.next=22,Object(jp.c)(kb.startTitleBlink,r);case 22:case"end":return e.stop()}}),e)})),Hj=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.c)(kb.stopTitleBlink);case 2:return e.next=4,Object(jp.h)(Ml());case 4:case"end":return e.stop()}}),e)})),Bj=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.l)(Fe);case 2:return n=e.sent,r=l.a.get(t,"payload.messageId"),e.next=6,Object(jp.h)(qu({chatId:n,messageId:r}));case 6:case"end":return e.stop()}}),e)})),Gj=regeneratorRuntime.mark(Jj),Uj=regeneratorRuntime.mark(Xj),Wj=regeneratorRuntime.mark(Yj),qj=regeneratorRuntime.mark(Qj),zj=regeneratorRuntime.mark(Zj),Kj=7e3;function Jj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.p)(Co,Xj);case 2:return e.next=4,Object(jp.p)(No,Qj);case 4:case"end":return e.stop()}}),Gj)}function Xj(e){var t,n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(jp.h)(Mo(Po.SENDING));case 3:return a.next=5,Object(jp.l)(Le);case 5:if(n=a.sent,!l.a.includes([ge.CHATTING,ge.WAITING],n)){a.next=17;break}return a.next=10,Object(jp.l)(Fe);case 10:return r=a.sent,a.next=13,Object(jp.c)(ff,r,t);case 13:return a.next=15,Object(jp.h)(Mo(Po.SENT));case 15:a.next=19;break;case 17:return a.next=19,Object(jp.c)(Yj,t);case 19:case"end":return a.stop()}}),Uj)}function Yj(e){var t,n,r,a,c,o=arguments;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=!(o.length>1&&void 0!==o[1])||o[1],i.next=3,Object(jp.l)(De);case 3:return n=i.sent,i.next=6,Object(jp.l)(Me);case 6:return r=i.sent,i.next=9,Object(jp.l)(Rs);case 9:return a=i.sent,c="".concat("https://happyfoxchat.com","/api/v2/visitors/").concat(n,"/").concat(r,"/email_transcript/"),i.prev=11,i.next=14,Object(jp.c)(Of.a,c,{method:"POST",data:{embedToken:a,email:e}});case 14:if(202!==i.sent.status||!t){i.next=20;break}return i.next=18,Object(jp.h)(Mo(Po.SENT));case 18:return i.next=20,Object(jp.h)(Fo());case 20:i.next=27;break;case 22:return i.prev=22,i.t0=i.catch(11),i.next=26,Object(jp.h)(Mo(Po.FAILED));case 26:console.error("Unable to send email transcript",i.t0);case 27:case"end":return i.stop()}}),Wj,null,[[11,22]])}function Qj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.m)(Zj);case 2:case"end":return e.stop()}}),qj)}function Zj(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.f)(Kj);case 2:return e.next=4,Object(jp.h)(Do());case 4:case"end":return e.stop()}}),zj)}var $j=regeneratorRuntime.mark(ey);function ey(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jp.b)([Pb(),Bb(),cg(),Og(),Pg(),qg(),$g(),yO(),MO(),ZO(),sh(),dh(),Xh(),Dj(),Ah(),fv(),Mj(),Rv(),Jj()]);case 2:case"end":return e.stop()}}),$j)}n("8uCd");var ty=i.d,ny=Object(xp.b)(),ry=[];ry.push(ny),ry.push((function(e){return function(e){return function(t){try{return e(t)}catch(e){console.error("Caught an exception in reducer",e)}}}}));var ay=Object(i.e)(vp,ty(i.a.apply(void 0,ry)));ny.run(ey),Object(o.render)(c.a.createElement(s.a,{store:ay}," ",c.a.createElement(Ms,null)),document.getElementById("___root")),ay.dispatch({type:C})},C87V:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/sounds/efa61ba62518ba3fd7ae1ae83dbf9893.mp3"},CnX5:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/ec9e4ae093f9b53a564e5c8efa93e362.svg"},E9vI:function(e,t,n){"use strict";var r=n("IG+Q");e.exports=function(e,t,n){"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=e,this.message=t,r.extend(this,n)},n("sG8X").inherits(e.exports,Error)},EkVg:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/sounds/0eaba34d14acc6dccc348f565f5ed08c.mp3"},Fp0C:function(e,t,n){var $=n("GaOt"),r={prefix:"",postfix:""},a=["log","info","warn","error","debug"];function c(e,t){var n=Array.prototype.slice.call(t);r.prefix&&n.unshift(r.prefix),r.postfix&&n.push(r.postfix),-1!==a.indexOf(e)?!0!==r.disabled&&window.console[e]&&window.console[e].apply(window.console,n):window.console.error(r.prefix+"Unknown log level. Given level:",e)}function o(e){return function(){c(e,arguments)}}var i={configure:function(e){return r=$.extend(r,e),i},log:o("log"),info:o("info"),warn:o("warn"),debug:o("debug"),error:o("error")};e.exports=i},HTgU:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n("xHiZ"),i=n("NbRN"),s=n("OBa8"),u=n("CliE"),l=n("s994"),p=n("OOiM"),m=n("AnA6"),f=n("0BHY"),d=l.promisifyRequest(i);function b(e){if(!e)throw new Error("Session token is missing");return this._visitorAccessToken=e,s.extend(this,new u),this}b.prototype.initiateChat=function(e,t,n){var r=this.connect().then((function(n){var r=a({},e,{},t.department&&{department:t.department});return n.sendAck("VisitorInitiateChat",r)}));return l.attachCallback(r,n)},b.prototype.sendTextMessage=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("VisitorMessage",{chat:e,text:t.text})}));return l.attachCallback(r,n)},b.prototype.sendVisitorSpecialMessage=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("VisitorSpecialMessage",{chat:e,text:t.text,replyFor:t.replyFor,type:t.type})}));return l.attachCallback(r,n)},b.prototype.sendAudio=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendAudio",{chat:e,name:r,url:a,size:c})}));return l.attachCallback(o,n)},b.prototype.sendVideo=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendVideo",{chat:e,name:r,url:a,size:c})}));return l.attachCallback(o,n)},b.prototype.sendFile=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendFile",{chat:e,name:r,url:a,size:c})}));return l.attachCallback(o,n)},b.prototype.sendImage=function(e,t,n){var r=t.name,a=t.url,c=t.size,o=this.connect().then((function(t){return t.sendAck("SendImage",{chat:e,name:r,url:a,size:c})}));return l.attachCallback(o,n)},b.prototype.endChat=function(e,t){var n=this.connect().then((function(t){return t.sendAck("VisitorEndChat",{chat:e})}));return l.attachCallback(n,t)},b.prototype.getClientState=function(e){var t=this.connect().then((function(e){return e.sendAck("VisitorClientState")}));return l.attachCallback(t,e)},b.prototype.sendIsTyping=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("IsTyping",{chat:e,text:t})}));return l.attachCallback(r,n)},b.prototype.closeSession=function(e){var t=o.resolve();return l.attachCallback(t,e)},b.prototype.updatePersonalInfo=function(e,t){var n=this.connect().then((function(t){return t.sendAck("UpdatePersonalInfo",e)}));return l.attachCallback(n,t)},b.prototype.setVisitorPageHistory=function(e,t){var n=this.connect().then((function(t){return t.sendAck("SetVisitorPageHistory",e)}));return l.attachCallback(n,t)},b.prototype.setVisitorLocation=function(e,t){var n=this.connect().then((function(t){return t.sendAck("SetVisitorLocation",e)}));return l.attachCallback(n,t)},b.prototype.updateCustomFields=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("UpdateCustomFields",{visitorId:e,customFields:t})}));return l.attachCallback(r,n)},b.prototype.updateCustomPrechatFields=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("UpdateCustomPrechatFields",{visitorId:e,customPrechatFields:t})}));return l.attachCallback(r,n)},b.prototype.requestTranscript=function(e,t,n){var r=this.connect().then((function(n){return n.sendAck("RequestTranscript",{chat:e,toEmail:t})}));return l.attachCallback(r,n)},b.prototype.messageReadAck=function(e,t,n){var r=t.messageId,a=this.connect().then((function(t){return t.sendAck("MessageReadAck",{chat:e,message:r})}));return l.attachCallback(a,n)},b.prototype.messageDeliveredAck=function(e,t,n){var r=t.messageId,a=this.connect().then((function(t){return t.sendAck("MessageDeliveredAck",{chat:e,message:r})}));return l.attachCallback(a,n)},b.prototype.connect=function(){return this._connectOnce()},b.prototype._connectOnce=function(){return this._connPromise||(this._connPromise=this._createWebsocketConnection()),this._connPromise},b.prototype._createWebsocketConnection=function(){var e=this;return p.Socket(f.visitor.wsSession(this._visitorAccessToken)).then((function(t){return t.on("message",e._messageHandler,e),t.on("disconnected",e.onDisconnect,e),t.on("connecting",e.onConnecting,e),t.on("connected",e.onConnect,e),t.on("reconnected",e.onReconnect,e),o.resolve(t)}))},b.prototype._messageHandler=function(e){s.isObject(e)?this.emit("notification",e):console.error("Received invalid payload:",e)},b.prototype.onDisconnect=function(e){this.emit("disconnected")},b.prototype.onConnecting=function(e){this.emit("connecting")},b.prototype.onConnect=function(e){this.emit("connected")},b.prototype.onReconnect=function(e){this.emit("reconnected")},e.exports={register:function(e,t,n,r){var c;if(e)if(t){var i=a({profile:t},n.name&&{name:n.name},{},n.email&&{email:n.email},{},n.phoneNumber&&{phoneNumber:n.phoneNumber},{},n.timezone&&{timezone:n.timezone});c=d({uri:f.visitor.register(),method:"POST",body:i,headers:{"X-HFC-CHAT-AUTH":e,"Content-Type":"application/json; charset=utf-8"},json:!0}).then((function(e){return o.resolve({session:new b(e.accessToken),response:e})}))}else c=o.reject(new m("PROFILE_ID_MISSING","Profile ID missing"));else c=o.reject(new m("VISITOR_API_TOKEN_MISSING","Visitor API token missing"));return l.attachCallback(c,r)},Session:b}},KPS2:function(e,t){var n=/^([^0-9]*)$/,r=/^\d+$/,a=/^(\d*\.)?\d+$/,c=/[^a-zA-Z0-9\s]/,o=/<|>/,i={isWholeNumber:function(e){return!e||r.test(e)},isDecimalNumber:function(e){return!e||a.test(e)},hasNumbers:function(e){return e&&!n.test(e)},hasSpecialChars:function(e){return e&&c.test(e)},hasSpaces:function(e){return e&&-1!==e.indexOf(" ")},hasScript:function(e){var t=!1;return"string"==typeof e&&(t=e.match(o)),t}};e.exports=i},MMVh:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/dcb4a71ce2f8d1e90472e187f0337d06.png"},NfW0:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/0820c6e9568851181d5e2e2e8369ee8f.svg"},OOiM:function(e,t,n){var r=n("OBa8"),a=n("CliE"),c=n("AnA6"),o=n("8im8"),i=n("oJQv"),s=n("s994"),u="undefined"!=typeof WebSocket,l={autoReconnect:!0};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.options=r.defaults(t,l),this._url=e,this._timeout=null,this._retriesMade=0,this.connectPromise=null,this._connectedOnce=!1,r.extend(this,new a),this.connect(),this}p.prototype.connect=function(){var e=this;this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.stopHeartBeat(),this.connectPromise&&"pending"===this.connectPromise.status()&&this.connectPromise.reject(new Error("Connection failed")),this.connectPromise=s.Deferred(),this.connection=m(this._url),this.connection instanceof Error?"ERR_NO_WEBSOCKET_SUPPORT"!==this.connection.message&&this.reconnect():(this.setupListeners(),this.connectPromise.then((function(){return e.mId=0,e._retriesMade=0,e.promiseCache&&e.promiseCache.rejectAll(new Error("Websocket closed")),e.promiseCache=new i,e.startHeartBeat(),e._connectedOnce?e.emit("reconnected"):(e._connectedOnce=!0,e.emit("connected")),null})).catch((function(e){console.error(e)})))},p.prototype._removeOfflineEventHandler=function(){window.removeEventListener("offline",this._offlineEventHandler)},p.prototype.setupListeners=function(){var e=this.connection,t=this;this._offlineEventHandler=function(){console.warn("System went offline..."),t.disconnect(),t.emit("disconnected")},e?(e.onclose=function(e){switch(t.emit("disconnected"),e.code){case 1012:case 1013:case 1006:t.reconnect();break;default:t.reset()}},e.onopen=function(e){t.connectPromise.resolve(t),window.addEventListener("offline",t._offlineEventHandler)},e.onerror=function(e){t.emit("error",e),t.connectPromise.reject(new Error("Failed to open websocket connection")),window.removeEventListener("offline",t._offlineEventHandler)},e.onmessage=function(e){var n=e.data,r=o.parseSafe(n);"object"==typeof r&&r.ack?t._handleAcks(r):t.emit("message",r)}):t.connectPromise.reject(new Error("Connection not found"))},p.prototype.disconnect=function(){this.reset(),this.connection&&this.connection.close()},p.prototype.reset=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._removeOfflineEventHandler(),this.stopHeartBeat(),delete this.connection,delete this.mId,this.promiseCache&&this.promiseCache.rejectAll(new Error("Websocket closed"))},p.prototype.reconnect=function(){this.reset(),this.options.autoReconnect&&(this._retriesMade>=5?(console.warn("Max retries made for socket reconnection..."),this.emit("max_retries_made")):(this._retriesMade++,this.emit("connecting"),this._timeout=setTimeout(this.connect.bind(this),5e3)))},p.prototype.send=function(e,t){var n=this;return this.connectPromise.then((function(){if(!e)return console.error("Oops! type needed to send message"),Promise.reject(new c("TYPE_MISSING","First argument must be a valid type string"));var r={mid:++n.mId,type:e,data:t};return n.connection.send(JSON.stringify(r)),n.postponeHeartBeatTimer(),Promise.resolve(r)}))},p.prototype.sendAck=function(e,t,n){var r=this;return this.connectPromise.then((function(){var n=s.Deferred();n.setTimeout(6e4);var a=++r.mId;if(r.promiseCache.add(a,n),e){var o={mid:a,type:e,data:t};r.connection.send(JSON.stringify(o)),r.postponeHeartBeatTimer()}else console.error("Oops! type needed to send message"),n.reject(new c("TYPE_MISSING","First argument must be a valid type string"));return n}))},p.prototype.startHeartBeat=function(){this._canPing=!0,this._pollHeartBeat()},p.prototype._pollHeartBeat=function(){var e=this;this.sendPing().finally((function(){e._scheduleHeartBeat()}))},p.prototype._scheduleHeartBeat=function(){var e=this;clearTimeout(this._pingPollTimeout),this._canPing&&(this._pingPollTimeout=setTimeout((function(){e._pollHeartBeat()}),2e4))},p.prototype.postponeHeartBeatTimer=function(){this._scheduleHeartBeat()},p.prototype.stopHeartBeat=function(){this._canPing=!1,clearTimeout(this._pingPollTimeout)},p.prototype.sendPing=function(){return this.sendAck("Ping")},p.prototype._handleAcks=function(e){if(e&&e.ack)if(e.mid){var t=e.mid;this.promiseCache.get(t)?"success"===e.status?this.promiseCache.resolve(t,r.get(e,"response.data")):"failure"===e.status?this.promiseCache.reject(t,this.constructError(e)):console.error("Received unknown status in ack notification. Received status:",e.status):console.warn("Received acknowledgment for unknown message. Message ID:",e.mid)}else console.error('Ack message does not have "mid" in it. Received payload:',e);else console.error("Not a valid ack message. Received payload:",e)},p.prototype.constructError=function(e){var t=r.get(e,"response.error.Type")||r.get(e,"response.error.type"),n=r.get(e,"response.error.Message")||r.get(e,"response.error.message");return new c(t||"UNKNOWN",n||"Unknown error")};var m=function(e){try{return u?new WebSocket(e):new Error("ERR_NO_WEBSOCKET_SUPPORT")}catch(e){return new Error("ERR_CONNECTION")}};t.Socket=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new p(e,t);return n.connectPromise},e.exports=t},Q6FD:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/bd4994974bf4478950fcf4838fbc6ce1.svg"},"RtV/":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache={}}var t,r,a;return t=e,(r=[{key:"add",value:function(e,t){return this._cache[e]=t}},{key:"get",value:function(e){return this._cache[e]}},{key:"remove",value:function(e){return delete this._cache[e]}},{key:"getIds",value:function(){return Object.keys(this._cache)}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=r},SGgC:function(e,t,n){var r=n("xHiZ"),a=n("NbRN"),c=(n("OBa8"),n("s994")),o=n("0BHY");function i(e){return this._adminApiToken=e,this._createRequestObj(),this}i.prototype._createRequestObj=function(){var e=a.defaults({headers:{"X-HFC-CHAT-AUTH":this._adminApiToken,"Content-Type":"application/json; charset=utf-8"},json:!0});return this.request=c.promisifyRequest(e),this.request},i.prototype.registerCompany=function(e){return this.request({uri:o.company.companies(),method:"POST",json:{name:e}})},i.prototype.lookupCompany=function(e){return this.request({uri:o.company.company(e),method:"GET"})},i.prototype.listAllCompanies=function(){return this.request({uri:o.company.companies(),method:"GET"})},e.exports={newSession:function(e){return r.resolve({session_token:e})},Session:i}},cZ9t:function(e,t){var n={};e.exports={add:function(e,t){return n[e]||(n[e]=[]),n[e].push(t),t},check:function(e,t){return n[e]&&-1!==n[e].indexOf(t)},removeByName:function(e){return delete n[e]},removeByHandler:function(e,t){var r=!1,a=!1,c=n[e]||[],o=c.indexOf(t);return-1!==o&&(c.splice(o,1),a=0===c.length,r=!0),{isAllHandlersRemoved:a,isRemoved:r}}}},"d/FD":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/d098887b555d53d6906de57895f21259.png"},f7TE:function(e,t,n){var r=n("xHiZ"),a=n("NbRN"),c=n("OBa8"),o=(n("s994"),n("OOiM"),n("0BHY"));function i(e){this._companyAPIToken=e,this.setRequestObj()}i.prototype.closeSession=function(e){return this.unsetRequestObj(),r.resolve()},i.prototype.setRequestObj=function(){var e=a.defaults({headers:{"X-HFC-CHAT-AUTH":this._companyAPIToken,"Content-Type":"application/json; charset=utf-8"},json:!0});return this.request=requestHelpers.promisifyRequest(e),this.request},i.prototype.unsetRequestObj=function(){return this._companyAPIToken="",this.request=requestHelpers.promisifyRequest(a),this.request},i.prototype.whoAmI=function(){return this.request({uri:o.company.whoami(),method:"GET"})},i.prototype.registerAgent=function(e,t){return this.request({uri:o.company.agents(),method:"POST",json:{name:t}})},i.prototype.lookupAgent=function(e){return this.request({uri:o.company.agent(e),method:"GET"})},i.prototype.listAllAgents=function(){return this.request({uri:o.company.agents(),method:"GET"})},i.prototype.setAgentName=function(e,t){return this.request({uri:o.company.agentNameUpdate(e),method:"PATCH",json:{name:t}})},i.prototype.lookupVisitor=function(e){return this.request({uri:o.company.visitor(e),method:"GET"})},i.prototype.lookupChat=function(e){return r.resolve({})},i.prototype.broadcastToAgents=function(e,t){return this.request({uri:o.company.broadcast(),method:"POST",json:{messageType:e,messageBody:t}})},i.prototype.addProfile=function(e,t,n){return this.request({uri:o.company.profiles(),method:"POST",json:{name:e}})},i.prototype.updateProfile=function(e,t,n){return this.request({uri:o.company.profile(e),method:"PATCH",json:{name:t}})},i.prototype.listAllProfiles=function(){return this.request({uri:o.company.profiles(),method:"GET"})},i.prototype.lookupProfile=function(e){return this.request({uri:o.company.profile(e),method:"GET"})},i.prototype.enableProfile=function(e){return this.request({uri:o.company.profile(e),method:"PATCH",json:{deleted:!1}})},i.prototype.disableProfile=function(e){return this.request({uri:o.company.profile(e),method:"PATCH",json:{deleted:!0}})},i.prototype.enableDepartments=function(e,t){var n=this,a=[];return c.each(t,(function(e){a.push(n.request({uri:o.company.department(e),method:"PATCH",json:{active:!0}}))})),r.all(a)},i.prototype.disableDepartments=function(e){var t=this;return this.request({uri:o.company.departments(e),method:"GET"}).then((function(e){var n=[];return c.each(e,(function(e){n.push(t.request({uri:o.company.department(e._id),method:"PATCH",json:{active:!1}}))})),r.all(n)}))},i.prototype.addDepartment=function(e,t,n){var a=this;return this.request({uri:o.company.departments(),method:"POST",json:{profile:e,name:t,default:!0}}).then((function(e){return n&&n.length?a.request({uri:o.company.addAgentsToDept(e._id),method:"PATCH",json:n}).then((function(){return r.resolve(e)})):r.resolve(e)}))},i.prototype.updateDepartment=function(e,t,n,a){var i=this;return this.request({uri:o.company.department(t),method:"PATCH",json:{name:n}}).then((function(e){return a&&c.isArray(a)?i.request({uri:o.company.setAgentsInDept(t),method:"PUT",json:a}):r.resolve(e)}))},i.prototype.removeDepartment=function(e,t){return this.request({uri:o.company.department(t),method:"DELETE"})},i.prototype.listAllDepartments=function(e){return this.request({uri:o.company.departments(e),method:"GET"})},i.prototype.lookupDepartment=function(e,t){return this.request({uri:o.company.department(t),method:"GET"})},i.prototype.enableBroadcast=function(e,t,n,a,c){return r.resolve()},i.prototype.enableAutoAssign=function(e,t,n,a,c,o,i){return r.resolve()},i.prototype.setMaxChatLimitForAnAgent=function(e,t){return this.request({uri:o.company.agentMaxChatLimit(e),method:"PATCH",json:{maxChatLimit:t}})},i.prototype.enableWorkHours=function(e,t){return r.resolve()},i.prototype.disableWorkHours=function(e){return r.resolve()},i.prototype.listAllWorkHours=function(e){return r.resolve()},i.prototype.enableTranslation=function(){return r.resolve()},i.prototype.disableTranslation=function(){return r.resolve()},i.prototype.setProfileLanguage=function(e,t){return r.resolve()},i.prototype.banVisitor=function(e,t,n){return r.resolve()},i.prototype.unbanVisitor=function(e,t,n){return r.resolve()},i.prototype.enableVisitorBanning=function(){return r.resolve()},i.prototype.disableVisitorBanning=function(){return r.resolve()},i.prototype.registerWebhooks=function(e,t){return r.resolve()},i.prototype.unregisterWebhooks=function(e,t){return r.resolve()},e.exports={newSession:function(e){return r.resolve({session_token:e})},Session:i}},ffmp:function(e,t,n){var r=n("IG+Q"),a=n("hySx"),c=n("KPS2"),o=n("E9vI"),i=50,s=1e3;function u(e,t,n){var r,a,c,o,s,u=!0,g=t[0],O=[];function h(e,t,n){O.push(j(e,t,n))}switch(e.dataType){case"string":r=l(e,g,n),a=p(e,g),c=m(e,g),o=f(e,g),s=d(e,g),r||h("TEXT_EMPTY_ERROR","This field value should not be empty","label.textRequired"),c||h("TEXT_NUMBER_ERROR","This field value should not contain numbers","label.numbersNotAllowed"),o||h("TEXT_SPACES_ERROR","This field value should not contain spaces","label.spacesNotAllowed"),s||h("TEXT_SPECIAL_CHAR_ERROR","This field value should not contain special characters","label.specialCharactersNotAllowed"),a||h("TEXT_LENGTH_ERROR","This field value cannot exceed "+i+" "+y(i,"character"),"label.notExceedChars"),u=r&&a&&c&&o&&s;break;case"number":r=l(e,g,n),a=p(e,g),c=b(e,g),r||h("TEXT_NUMBER_EMPTY_ERROR","This field value should not be empty","label.textRequired"),c||h("TEXT_NUMBER_ONLY_ERROR","This field can take only numbers","label.onlyNumbers"),a||h("TEXT_NUMBER_LENGTH_ERROR","This field value cannot exceed "+i+" "+y(i,"character"),"label.notExceedChars"),u=r&&a&&c;break;default:h("TEXT_UNKNOWN_DATA_TYPE","Unknown text data type"),u=!1}return{isValid:u,errors:O}}function l(e,t,n){n||(n={}),r.defaults(n,{skipRequiredCheck:!1});var a=!0;return n.skipRequiredCheck?a=!0:e.validations.isRequired&&r.isEmpty(r.trim(t))&&(a=!1),a}function p(e,t){var n=!0;return t&&String(t).length>i&&(n=!1),n}function m(e,t){var n=!0;return!e.validations.isNumbersAllowed&&c.hasNumbers(t)&&(n=!1),n}function f(e,t){var n=!0;return!e.validations.isSpacesAllowed&&c.hasSpaces(t)&&(n=!1),n}function d(e,t){var n=!0;return!e.validations.isSpecialCharsAllowed&&c.hasSpecialChars(t)&&(n=!1),n}function b(e,t){return e.validations.isDecimalsAllowed?c.isDecimalNumber(t):c.isWholeNumber(t)}function g(e,t,n){var r=t.length<=1,a=x(e,t,n),c=r&&a,o=[];function i(e,t,n){o.push(j(e,t,n))}return r||i("RADIO_ONE_OPTION","This field can take only one option"),a||i("RADIO_EMPTY_OPTIONS","This field needs atleast one option","label.optionRequired"),{isValid:c,errors:o}}function O(e,t,n){var r=x(e,t,n),a=function(e,t){var n=!0,r=e.validations.noOfOptionsAllowed;"object"==typeof r&&"number"==typeof r.min&&t.length<r.min&&(n=!1);return n}(e,t),c=function(e,t){var n=!0,r=e.validations.noOfOptionsAllowed;"object"==typeof r&&"number"==typeof r.max&&t.length>r.max&&(n=!1);return n}(e,t),o=r&&a&&c,i=[];function s(e,t,n){i.push(j(e,t,n))}return r||s("CHECKBOX_EMPTY_OPTIONS","This field needs atleast one option","label.optionRequired"),a||s("CHECKBOX_MIN_OPTIONS","This field needs atleast "+e.validations.noOfOptionsAllowed.min+" "+y(e.validations.noOfOptionsAllowed.min,"option"),"label.checkBoxMinRequired"),c||s("CHECKBOX_MAX_OPTIONS","This field can have maximum of "+e.validations.noOfOptionsAllowed.max+" "+y(e.validations.noOfOptionsAllowed.max,"option"),"label.checkBoxMaxRequired"),{isValid:o,errors:i}}function h(e,t,n){var r=t.length<=1,a=x(e,t,n),c=r&&a,o=[];function i(e,t,n){o.push(j(e,t,n))}return r||i("DROPDOWN_ONE_OPTION","This field can take only one option"),a||i("DROPDOWN_EMPTY_OPTIONS","This field needs atleast one option","label.optionRequired"),{isValid:c,errors:o}}function v(e,t,n){var r,a,c,o,i,u=!0,g=t[0],O=[];function h(e,t,n){O.push(j(e,t,n))}switch(e.dataType){case"string":r=l(e,g,n),a=function(e,t){var n=!0;return t&&String(t).length>s&&(n=!1),n}(0,g),c=m(e,g),o=f(e,g),i=d(e,g),r||h("TEXT_EMPTY_ERROR","This field value should not be empty","label.textRequired"),c||h("TEXT_NUMBER_ERROR","This field value should not contain numbers","label.numbersNotAllowed"),o||h("TEXT_SPACES_ERROR","This field value should not contain spaces","label.spacesNotAllowed"),i||h("TEXT_SPECIAL_CHAR_ERROR","This field value should not contain special characters","label.specialCharactersNotAllowed"),a||h("TEXT_LENGTH_ERROR","This field value cannot exceed "+s+" "+y(s,"character"),"label.notExceedChars"),u=r&&a&&c&&o&&i;break;case"number":r=l(e,g,n),a=p(0,g),c=b(e,g),r||h("TEXT_NUMBER_EMPTY_ERROR","This field value should not be empty"),c||h("TEXT_NUMBER_ONLY_ERROR","This field can take only numbers"),a||h("TEXT_NUMBER_LENGTH_ERROR","This field value cannot exceed "+s+" "+y(s,"character")),u=r&&a&&c;break;default:h("TEXT_UNKNOWN_DATA_TYPE","Unknown text data type"),u=!1}return{isValid:u,errors:O}}function x(e,t,n){n||(n={}),r.defaults(n,{skipRequiredCheck:!1});var a=!0;return n.skipRequiredCheck?a=!0:e.validations.isRequired&&0===t.length&&(a=!1),a}function j(e,t,n){var r;return"function"==typeof o?r=new o(e,t,{i18nKey:n}):((r=new Error(t)).type=e,r.i18nKey=n),r}function y(e,t){var n=t;return"function"==typeof pluralise?n=pluralise(e,t):"function"==typeof a&&(n=a(t,e)),n}e.exports={validatePrechatFieldValues:function(e,t,n){n||(n={}),r.defaults(n,{skipEmptyArrayCheck:!1,skipRequiredCheck:!1});var a,c,i,s,l,p,m,f={},d=!0,b={};function x(e,t){f[e.fieldId]=t}return e.forEach((function(e){if(a=t[e.fieldId],i=r.isArray(a),e.isEnabled||!r.isEmpty(a))if(n.skipEmptyArrayCheck||i){switch(i||(a=[]),e.type){case"text":c=u(e,a,n);break;case"radio":c=g(e,a,n);break;case"checkbox":c=O(e,a,n);break;case"dropdown":c=h(e,a,n);break;case"textarea":c=v(e,a,n);break;default:c={isValid:!1,error:[j("UNKNOWN_TYPE","Unknown prechat field type")]}}c.isValid||x(e,c.errors),d=d&&c.isValid}else x(e,[j("INVALID_FIELD_VALUE","Field value must be an array")])})),b.isValid=d,d||(b.error=(s="VALIDATION_FAILED",l="One or more prechat field validation failed","function"==typeof o?(m={},Object.keys(f).length&&(m.fieldErrors=f),p=new o(s,l,m)):((p=new Error(l)).type=s,Object.keys(f).length&&(p.fieldErrors=f)),p)),b},validateText:u,validateRadio:g,validateCheckbox:O,validateDropdown:h,validateTextarea:v}},"j0+A":function(e,t,n){var r=n("xHiZ"),a=n("IG+Q"),c=n("CliE"),o=n("8im8"),i=n("OOiM"),s=n("0BHY");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=t,!e)throw new Error("Session token is missing");return this._sessionToken=e,a.extend(this,new c),this}u.prototype.setProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect().then((function(t){return t.sendAck("SetProperties",e)}))},u.prototype.sendVisitorDetails=function(){return this.connect().then((function(e){return e.sendAck("SendVisitorDetails",{})}))},u.prototype.setActive=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect().then((function(t){return t.sendAck("SetActive",e)}))},u.prototype.setChatStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect().then((function(t){return t.sendAck("SetChatStatus",a.pick(e,"chat_status","agent_id","agent_chat_id","agent_name"))}))},u.prototype.updateDeliveredTill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect().then((function(t){return t.sendAck("UpdateDeliveredTill",a.pick(e,"delivered_till"))}))},u.prototype.updateReadTill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.connect().then((function(t){return t.sendAck("UpdateReadTill",a.pick(e,"read_till"))}))},u.prototype.connect=function(){return this._connectOnce()},u.prototype._connectOnce=function(){return this._connPromise||(this._connPromise=this._createWebsocketConnection()),this._connPromise},u.prototype._createWebsocketConnection=function(){var e=this;return i.Socket(s.visitor.vInfoWsSession(this._sessionToken),this.options).then((function(t){return t.on("message",e._messageHandler,e),t.on("disconnected",e.onDisconnect,e),t.on("connecting",e.onConnecting,e),t.on("connected",e.onConnect,e),t.on("reconnected",e.onReconnect,e),t.on("error",e.onError,e),t.on("max_retries_made",e.onMaxRetriesMade,e),e.onConnect(),r.resolve(t)}))},u.prototype._messageHandler=function(e){a.isString(e)&&(e=o.parseSafe(e)),e?this.emit("notification",e):console.error("Received invalid payload:",e)},u.prototype.onDisconnect=function(){this.options.autoReconnect||(this._connPromise=null),this.emit("disconnected")},u.prototype.onConnecting=function(){this.emit("connecting")},u.prototype.onConnect=function(){this.emit("connected")},u.prototype.onReconnect=function(){this.emit("reconnected")},u.prototype.onError=function(){this.emit("error")},u.prototype.onMaxRetriesMade=function(){this.emit("max_retries_made")},e.exports={Session:u}},jeAe:function(e,t,n){"use strict";var r=n("IG+Q");e.exports=function(e,t,n){"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=e,this.message=t,r.extend(this,n)},n("sG8X").inherits(e.exports,Error)},joUK:function(e,t,n){var r=n("SGgC"),a=n("f7TE"),c=n("HTgU"),o=n("3cWP"),i=n("0BHY");e.exports={urls:i,admin:r,company:a,visitor:c,agent:o}},k6Wu:function(e,t,n){var r=n("IG+Q").includes;function a(){return{documents:[{name:"PDF",extension:".pdf",type:["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/x-bzpdf","application/x-gzpdf"]},{name:"TXT",extension:".txt",type:["text/plain","application/text"]},{name:"DOC",extension:".doc",type:["application/msword","application/doc","appl/text","application/vnd.msword","application/vnd.ms-word","application/winword","application/word","application/x-msw6","application/x-msword"]},{name:"DOCX",extension:".docx",type:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},{name:"XLS",extension:".xls",type:["application/excel","application/vnd.ms-excel","application/msexcell","application/x-msexcel","application/x-excel","application/x-msexcel","application/x-dos_ms_excel","application/xls"]},{name:"XLSX",extension:".xlsx",type:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},{name:"PPS",extension:".pps",type:["application/mspowerpoint","application/vnd.ms-powerpoint"]},{name:"PPT",extension:".ppt",type:["application/mspowerpoint","application/ms-powerpoint","application/powerpoint","application/x-powerpoint","application/mspowerpnt","application/vnd-mspowerpoint","application/vnd.ms-powerpoint","application/x-mspowerpoint","application/x-m"]},{name:"PPSX",extension:".ppsx",type:["application/vnd.openxmlformats-officedocument.presentationml.slideshow"]},{name:"PPTX",extension:".pptx",type:["application/vnd.openxmlformats-officedocument.presentationml.presentation"]}],images:[{name:"PNG",extension:".png",type:["image/png","image/x-png","application/png","application/x-png"]},{name:"JPG",extension:".jpg",type:["image/jpeg","image/jpg","application/jpg","application/x-jpg"]},{name:"GIF",extension:".gif",type:["image/gif","image/x-xbitmap","image/gi_"]},{name:"BMP",extension:".bmp",type:["image/bmp","image/x-bmp","image/x-bitmap","image/x-xbitmap","image/x-win-bitmap","image/x-windows-bmp","image/ms-bmp","image/x-ms-bmp","application/bmp","application/x-bmp","application/x-win-bitmap","application/preview"]}],audio:[{name:"OGG",extension:".ogg",type:["audio/ogg"]},{name:"WAV",extension:".wav",type:["audio/x-wav","audio/x-wav","application/x-wav","audio/wav"]},{name:"MP3",extension:".mp3",type:["audio/mp3","audio/mpeg3","audio/mpg","audio/mpeg","audio/x-mpeg","audio/x-mpeg-3","audio/mp3","audio/x-mpegaudio","audio/x-mpg","audio/x-mp3","audio/mpeg3"]}],video:[{name:"MP4",extension:".mp4",type:["video/mp4"]},{name:"MOV",extension:".mov",type:["video/quicktime"]},{name:"AVI",extension:".avi",type:["video/x-msvideo","video/avi","video/msvideo","image/avi","video/xmpg2","application/x-troff-msvideo","audio/aiff","audio/avi"]}]}}function c(){o();for(var e,t,n={documents:[{name:"PDF",extension:".pdf",type:["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/x-bzpdf","application/x-gzpdf"]},{name:"TXT",extension:".txt",type:["text/plain","application/text"]},{name:"DOC",extension:".doc",type:["application/msword","application/doc","appl/text","application/vnd.msword","application/vnd.ms-word","application/winword","application/word","application/x-msw6","application/x-msword"]},{name:"DOCX",extension:".docx",type:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},{name:"XLS",extension:".xls",type:["application/excel","application/vnd.ms-excel","application/msexcell","application/x-msexcel","application/x-excel","application/x-msexcel","application/x-dos_ms_excel","application/xls"]},{name:"XLSX",extension:".xlsx",type:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},{name:"PPS",extension:".pps",type:["application/mspowerpoint","application/vnd.ms-powerpoint"]},{name:"PPT",extension:".ppt",type:["application/mspowerpoint","application/ms-powerpoint","application/powerpoint","application/x-powerpoint","application/mspowerpnt","application/vnd-mspowerpoint","application/vnd.ms-powerpoint","application/x-mspowerpoint","application/x-m"]},{name:"PPSX",extension:".ppsx",type:["application/vnd.openxmlformats-officedocument.presentationml.slideshow"]},{name:"PPTX",extension:".pptx",type:["application/vnd.openxmlformats-officedocument.presentationml.presentation"]}],images:[{name:"PNG",extension:".png",type:["image/png","image/x-png","application/png","application/x-png"]},{name:"JPG",extension:".jpg",type:["image/jpeg","image/jpg","application/jpg","application/x-jpg"]},{name:"GIF",extension:".gif",type:["image/gif","image/x-xbitmap","image/gi_"]},{name:"BMP",extension:".bmp",type:["image/bmp","image/x-bmp","image/x-bitmap","image/x-xbitmap","image/x-win-bitmap","image/x-windows-bmp","image/ms-bmp","image/x-ms-bmp","application/bmp","application/x-bmp","application/x-win-bitmap","application/preview"]}],audio:[{name:"OGG",extension:".ogg",type:["audio/ogg"]},{name:"WAV",extension:".wav",type:["audio/x-wav","audio/x-wav","application/x-wav","audio/wav"]},{name:"MP3",extension:".mp3",type:["audio/mp3","audio/mpeg3","audio/mpg","audio/mpeg","audio/x-mpeg","audio/x-mpeg-3","audio/mp3","audio/x-mpegaudio","audio/x-mpg","audio/x-mp3","audio/mpeg3"]}],video:[{name:"MP4",extension:".mp4",type:["video/mp4"]},{name:"MOV",extension:".mov",type:["video/quicktime"]},{name:"AVI",extension:".avi",type:["video/x-msvideo","video/avi","video/msvideo","image/avi","video/xmpg2","application/x-troff-msvideo","audio/aiff","audio/avi"]}]},r=Object.keys(n),a=[],c=0;c<r.length;c++)for(var i=n[r[c]],s=0;s<i.length;s++){e=i[s].type;for(var u=0;u<e.length;u++)t=e[u],-1===a.indexOf(t)&&a.push(t)}return a}function o(){Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(a){if("object"!=typeof a&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var c,o,i=[];for(c in a)e.call(a,c)&&i.push(c);if(t)for(o=0;o<r;o++)e.call(a,n[o])&&i.push(n[o]);return i}}())}function i(e){var t=e.type.split("/")[0].toLowerCase();return r(["text","application"],t)&&(t="file"),t}e.exports={getSupportedMimeTypes:a,isValidMimeType:function(e){return o(),-1!==c().indexOf(e)},getSupportedTypes:c,getSupportedExtensions:function(){o();for(var e={documents:[{name:"PDF",extension:".pdf",type:["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/x-bzpdf","application/x-gzpdf"]},{name:"TXT",extension:".txt",type:["text/plain","application/text"]},{name:"DOC",extension:".doc",type:["application/msword","application/doc","appl/text","application/vnd.msword","application/vnd.ms-word","application/winword","application/word","application/x-msw6","application/x-msword"]},{name:"DOCX",extension:".docx",type:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},{name:"XLS",extension:".xls",type:["application/excel","application/vnd.ms-excel","application/msexcell","application/x-msexcel","application/x-excel","application/x-msexcel","application/x-dos_ms_excel","application/xls"]},{name:"XLSX",extension:".xlsx",type:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},{name:"PPS",extension:".pps",type:["application/mspowerpoint","application/vnd.ms-powerpoint"]},{name:"PPT",extension:".ppt",type:["application/mspowerpoint","application/ms-powerpoint","application/powerpoint","application/x-powerpoint","application/mspowerpnt","application/vnd-mspowerpoint","application/vnd.ms-powerpoint","application/x-mspowerpoint","application/x-m"]},{name:"PPSX",extension:".ppsx",type:["application/vnd.openxmlformats-officedocument.presentationml.slideshow"]},{name:"PPTX",extension:".pptx",type:["application/vnd.openxmlformats-officedocument.presentationml.presentation"]}],images:[{name:"PNG",extension:".png",type:["image/png","image/x-png","application/png","application/x-png"]},{name:"JPG",extension:".jpg",type:["image/jpeg","image/jpg","application/jpg","application/x-jpg"]},{name:"GIF",extension:".gif",type:["image/gif","image/x-xbitmap","image/gi_"]},{name:"BMP",extension:".bmp",type:["image/bmp","image/x-bmp","image/x-bitmap","image/x-xbitmap","image/x-win-bitmap","image/x-windows-bmp","image/ms-bmp","image/x-ms-bmp","application/bmp","application/x-bmp","application/x-win-bitmap","application/preview"]}],audio:[{name:"OGG",extension:".ogg",type:["audio/ogg"]},{name:"WAV",extension:".wav",type:["audio/x-wav","audio/x-wav","application/x-wav","audio/wav"]},{name:"MP3",extension:".mp3",type:["audio/mp3","audio/mpeg3","audio/mpg","audio/mpeg","audio/x-mpeg","audio/x-mpeg-3","audio/mp3","audio/x-mpegaudio","audio/x-mpg","audio/x-mp3","audio/mpeg3"]}],video:[{name:"MP4",extension:".mp4",type:["video/mp4"]},{name:"MOV",extension:".mov",type:["video/quicktime"]},{name:"AVI",extension:".avi",type:["video/x-msvideo","video/avi","video/msvideo","image/avi","video/xmpg2","application/x-troff-msvideo","audio/aiff","audio/avi"]}]},t=Object.keys(e),n=[],r=0;r<t.length;r++)for(var a=e[t[r]],c=0;c<a.length;c++)n.push(a[c].extension);return n},formatBytes:function(e){if(0===e)return"0 Byte";var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]},getPreviewImage:function(e,t,r){var a=n("tCsO"),c=e.split("/")[0].toLowerCase(),o="";return"image"===c?o=t:("text"!==c&&"file"!==c||(c="application"),o=r?r+"/images/widget/"+c+"_icon.png":a("./"+c+"_icon.png")),o},getPreviewImage_v2:function(e){var t=n("tCsO"),r=i(e),a="";return"image"===r?a=e.url:("text"!==r&&"file"!==r||(r="application"),a=t("./"+r+"_icon.png")),a},getAttachmentType:i}},kswo:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/801129682bd65ab546bcb38d1ccb6816.png"},oJQv:function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=n("RtV/"),s=(n("AnA6"),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,c(t).call(this))}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,e),n=t,(i=[{key:"resolve",value:function(e,t){return this.get(e).resolve(t),this.remove(e),this}},{key:"reject",value:function(e,t){return this.get(e).reject(t),this.remove(e),this}},{key:"rejectAll",value:function(e){var t=this;this.getIds().forEach((function(n){t.reject(n,e)}))}},{key:"setTimeout",value:function(e,t){var n=this;if(t){var r=this.get(e);r&&(r.setTimeout(t),r.catch((function(t){throw"TIMEDOUT"===t.type&&n.remove(e),t})))}}}])&&r(n.prototype,i),s&&r(n,s),t}(i));e.exports=s},pJYS:function(e,t,n){var r={"./af":"a2iI","./af.js":"a2iI","./ar":"qPzD","./ar-ma":"DUVZ","./ar-ma.js":"DUVZ","./ar-sa":"aoIg","./ar-sa.js":"aoIg","./ar-tn":"C4dg","./ar-tn.js":"C4dg","./ar.js":"qPzD","./az":"6EVF","./az.js":"6EVF","./be":"hT6L","./be.js":"hT6L","./bg":"3kDF","./bg.js":"3kDF","./bn":"9arh","./bn.js":"9arh","./bo":"QKt9","./bo.js":"QKt9","./br":"Z0Yu","./br.js":"Z0Yu","./bs":"NF+/","./bs.js":"NF+/","./ca":"oxlq","./ca.js":"oxlq","./cs":"GOkH","./cs.js":"GOkH","./cv":"Xq1I","./cv.js":"Xq1I","./cy":"Uk8F","./cy.js":"Uk8F","./da":"RGez","./da.js":"RGez","./de":"dcWW","./de-at":"hDZd","./de-at.js":"hDZd","./de.js":"dcWW","./el":"y9oP","./el.js":"y9oP","./en-au":"VZI1","./en-au.js":"VZI1","./en-ca":"WyKH","./en-ca.js":"WyKH","./en-gb":"kX2B","./en-gb.js":"kX2B","./eo":"78n2","./eo.js":"78n2","./es":"3/23","./es.js":"3/23","./et":"ULdE","./et.js":"ULdE","./eu":"VGI5","./eu.js":"VGI5","./fa":"sT8a","./fa.js":"sT8a","./fi":"W0+E","./fi.js":"W0+E","./fo":"7nUs","./fo.js":"7nUs","./fr":"/xps","./fr-ca":"Yh7a","./fr-ca.js":"Yh7a","./fr.js":"/xps","./fy":"Ezr8","./fy.js":"Ezr8","./gl":"16NB","./gl.js":"16NB","./he":"byTR","./he.js":"byTR","./hi":"w+LK","./hi.js":"w+LK","./hr":"VIfZ","./hr.js":"VIfZ","./hu":"+rhA","./hu.js":"+rhA","./hy-am":"e0gR","./hy-am.js":"e0gR","./id":"oHi4","./id.js":"oHi4","./is":"+rdI","./is.js":"+rdI","./it":"7SJw","./it.js":"7SJw","./ja":"RwFu","./ja.js":"RwFu","./jv":"IC88","./jv.js":"IC88","./ka":"+/n2","./ka.js":"+/n2","./km":"+HR8","./km.js":"+HR8","./ko":"I/c7","./ko.js":"I/c7","./lb":"GqJX","./lb.js":"GqJX","./lt":"Ukyy","./lt.js":"Ukyy","./lv":"tDlX","./lv.js":"tDlX","./me":"ZqHZ","./me.js":"ZqHZ","./mk":"6Aks","./mk.js":"6Aks","./ml":"vlzl","./ml.js":"vlzl","./mr":"SkMt","./mr.js":"SkMt","./ms":"mL0s","./ms-my":"e1zB","./ms-my.js":"e1zB","./ms.js":"mL0s","./my":"q0/+","./my.js":"q0/+","./nb":"Skil","./nb.js":"Skil","./ne":"BZIV","./ne.js":"BZIV","./nl":"cHpQ","./nl.js":"cHpQ","./nn":"tdPS","./nn.js":"tdPS","./pl":"2tjr","./pl.js":"2tjr","./pt":"s5gh","./pt-br":"11uw","./pt-br.js":"11uw","./pt.js":"s5gh","./ro":"1goK","./ro.js":"1goK","./ru":"1wnn","./ru.js":"1wnn","./si":"eS8R","./si.js":"eS8R","./sk":"FKnK","./sk.js":"FKnK","./sl":"mKUj","./sl.js":"mKUj","./sq":"Vd3B","./sq.js":"Vd3B","./sr":"vWrn","./sr-cyrl":"J+Ca","./sr-cyrl.js":"J+Ca","./sr.js":"vWrn","./sv":"crXW","./sv.js":"crXW","./ta":"5I0Q","./ta.js":"5I0Q","./th":"QUVj","./th.js":"QUVj","./tl-ph":"sSXk","./tl-ph.js":"sSXk","./tr":"WKIg","./tr.js":"WKIg","./tzl":"FVQL","./tzl.js":"FVQL","./tzm":"/MfB","./tzm-latn":"d/fj","./tzm-latn.js":"d/fj","./tzm.js":"/MfB","./uk":"cY93","./uk.js":"cY93","./uz":"Ad4x","./uz.js":"Ad4x","./vi":"msAF","./vi.js":"msAF","./zh-cn":"kDBA","./zh-cn.js":"kDBA","./zh-tw":"Dgp9","./zh-tw.js":"Dgp9"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="pJYS"},s994:function(e,t,n){var r=n("OBa8"),a=n("xHiZ"),c=n("AnA6"),o=function(){};e.exports={attachCallback:function(e,t){var n=r.isFunction(t);n||(t=o);var c=e.then((function(e){return t(null,e),a.resolve(e)})).catch((function(e){return t(e,null),a.reject(e)}));return n&&c.suppressUnhandledRejections(),c},promisifyRequest:function(e,t){return r.isObject(t)||(t={}),function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return new a((function(n,a){e.apply(void 0,r.concat([function(e,r,c){if(e)e.response=r,e.body=c,a(e);else if(/^2/.test(""+r.statusCode))r.body=c,n(t.resolveWithFullResponse?r:c);else{var o=new Error("Request failed. Response code: "+r.statusCode);o.response=r,a(o)}}]))}))}},Deferred:function(){var e,t,n=new a((function(n,r){e=n,t=r}));return n._status="pending",n.resolve=function(){this._status="resolved",e.apply(void 0,arguments)},n.reject=function(){this._status="rejected",t.apply(void 0,arguments)},n.status=function(){return this._status},n.setTimeout=function(e){var t=this;e&&"pending"===this.status()&&setTimeout((function(){"pending"===t.status()&&t.reject(new c("TIMEDOUT","Timed out"))}),e)},n}}},tCsO:function(e,t,n){var r={"./application_icon.png":"6ydX","./audio_icon.png":"MMVh","./bg-pattern.png":"8oMm","./chat-bubble-icon.svg":"1wLG","./default-bubble.svg":"CnX5","./default_avatar.svg":"NfW0","./ex-circle-icon.png":"kswo","./google-translation-badge.png":"vc9D","./offline.svg":"Q6FD","./proactive-bubble-pointer.png":"3zkq","./video_icon.png":"ygn+"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="tCsO"},usMY:function(e,t){e.exports={s4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},integer:function(e){return Math.floor(Math.pow(10,e-1)+Math.random()*(Math.pow(10,e)-Math.pow(10,e-1)-1))}}},vc9D:function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/0113b6dccdc245c8bc9ec3651000537a.png"},"ygn+":function(e,t){e.exports="https://widget.happyfoxchat.com/v2/visitor/images/2418fe2390219a7f7d6b78e550eab5c2.png"},zjcW:function(e,t,n){var r=n("Fp0C");function a(e,t){return function(){t.apply(e,arguments)}}e.exports={recompose:function e(t,n){try{var r=n.split("."),a=t[r[0]];if(r[1]){r.splice(0,1);var c=r.join(".");return"function"==typeof a?a:e(a,c)}return a}catch(e){return null}},recomposeWithScope:function(e,t){var n,r,a,c,o=t.split("."),i=o.length;for(c=e,n=0;n<i;n++)if("undefined"===typeof(c=(a=c)[r=o[n]])&&i!==n+1)return{};return{object:c,scope:a,lastVar:r}},parseSafe:function(e,t){var n;try{n=JSON.parse(e)}catch(a){t||(t={}),t.default&&(n=t.default),t.skipErrorLog||r.error("Exception while parsing JSON string. Given string:",e)}return n},bindAll:function(e){var t,n,r,c=Array.prototype.slice.call(arguments,1);for(t in c)if("string"==typeof(n=c[t])&&"function"==typeof(r=e[n])&&!r._binded){var o=a(e,r);o._binded=!0,e[n]=o}},stringifySafe:function(e){var t,n={};try{"function"==typeof Object&&(n.objectToJSON=Object.prototype.toJSON,delete Object.prototype.toJSON),"function"==typeof Array&&(n.arrayToJSON=Array.prototype.toJSON,delete Array.prototype.toJSON),"function"==typeof Hash&&(n.hashToJSON=Hash.prototype.toJSON,delete Hash.prototype.toJSON),"function"==typeof String&&(n.stringToJSON=String.prototype.toJSON,delete String.prototype.toJSON)}catch(e){r.error("Error while backing up overriden toJSON methods. Error:",e)}t=JSON.stringify(e);try{n.objectToJSON&&(Object.prototype.toJSON=n.objectToJSON),n.arrayToJSON&&(Array.prototype.toJSON=n.arrayToJSON),n.hashToJSON&&(Hash.prototype.toJSON=n.hashToJSON),n.stringToJSON&&(String.prototype.toJSON=n.stringToJSON)}catch(e){r.error("Error while restoring backed up toJSON methods. Error:",e)}return n=null,t},bind:a,forEach:function(e,t){var n,r;if("object"==typeof e)for(r in e)e.hasOwnProperty(r)&&(n=e[r],t.call(null,n,r))}}}});
//# sourceMappingURL=widget-456aa7409b41bcca3d9ef68f7ff3ff2d.js.map